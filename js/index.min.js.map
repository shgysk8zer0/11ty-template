{"version":3,"file":"index.min.js","sources":["../https:/unpkg.com/@shgysk8zer0/kazoo@0.0.14/promises.js","../https:/unpkg.com/@shgysk8zer0/kazoo@0.0.14/math.js","../https:/unpkg.com/@shgysk8zer0/kazoo@0.0.14/trust.js","../https:/unpkg.com/@shgysk8zer0/kazoo@0.0.14/module.js","../https:/unpkg.com/@shgysk8zer0/kazoo@0.0.14/utility.js","../https:/unpkg.com/@shgysk8zer0/kazoo@0.0.14/events.js","../https:/unpkg.com/@shgysk8zer0/kazoo@0.0.14/abort.js","../https:/unpkg.com/@shgysk8zer0/kazoo@0.0.14/types.js","../https:/unpkg.com/@shgysk8zer0/kazoo@0.0.14/attrs.js","../https:/unpkg.com/@shgysk8zer0/kazoo@0.0.14/dom.js","../https:/unpkg.com/@shgysk8zer0/kazoo@0.0.14/theme-cookie.js","../https:/unpkg.com/@shgysk8zer0/kazoo@0.0.14/trust-policies.js","../https:/unpkg.com/@shgysk8zer0/kazoo@0.0.14/data-handlers.js","../https:/unpkg.com/@shgysk8zer0/kazoo@0.0.14/defaults.js","../https:/unpkg.com/@shgysk8zer0/kazoo@0.0.14/elements.js","../https:/unpkg.com/@shgysk8zer0/kazoo@0.0.14/HTTPException.js","../https:/unpkg.com/@shgysk8zer0/kazoo@0.0.14/http.js","../https:/unpkg.com/@shgysk8zer0/kazoo@0.0.14/loader.js","../https:/unpkg.com/@shgysk8zer0/kazoo@0.0.14/google-analytics.js","../https:/unpkg.com/@shgysk8zer0/components@0.0.9/consts.js","../https:/unpkg.com/@shgysk8zer0/components@0.0.9/import.meta.js","../https:/unpkg.com/@shgysk8zer0/kazoo@0.0.14/namespaces.js","../https:/unpkg.com/@shgysk8zer0/kazoo@0.0.14/svg.js","../https:/unpkg.com/@shgysk8zer0/kazoo@0.0.14/icons.js","../https:/unpkg.com/@shgysk8zer0/kazoo@0.0.14/custom-elements.js","../https:/unpkg.com/@shgysk8zer0/components@0.0.9/notification/html-notification.js","../https:/unpkg.com/@shgysk8zer0/kazoo@0.0.14/asyncDialog.js","contact-demo.js","../https:/unpkg.com/@shgysk8zer0/components@0.0.9/share-button.js","consts.js","../https:/unpkg.com/@shgysk8zer0/components@0.0.9/button/custom.js","../https:/unpkg.com/@shgysk8zer0/kazoo@0.0.14/share-targets.js","../https:/unpkg.com/@shgysk8zer0/components@0.0.9/button/share-to.js","../https:/unpkg.com/@shgysk8zer0/kazoo@0.0.14/popup.js","../https:/unpkg.com/@shgysk8zer0/kazoo@0.0.14/intersect.js","../https:/unpkg.com/@shgysk8zer0/components@0.0.9/github/user.js","../https:/unpkg.com/@shgysk8zer0/components@0.0.9/current-year.js","../https:/unpkg.com/@shgysk8zer0/components@0.0.9/bacon-ipsum.js","../https:/unpkg.com/@shgysk8zer0/kazoo@0.0.14/pwa-install.js","../https:/unpkg.com/@shgysk8zer0/components@0.0.9/install/prompt.js","../https:/unpkg.com/@shgysk8zer0/components@0.0.9/krv/ad.js","../https:/unpkg.com/@shgysk8zer0/kazoo@0.0.14/filesystem.js","../https:/unpkg.com/@shgysk8zer0/kazoo@0.0.14/krv/apps.js","../https:/unpkg.com/@shgysk8zer0/components@0.0.9/app/list-button.js","../https:/unpkg.com/@shgysk8zer0/components@0.0.9/app/stores.js","index.js"],"sourcesContent":["/**\n * @copyright 2023 Chris Zuber <admin@kernvalley.us>\n */\nimport { signalAborted } from './abort.js';\nexport const infinitPromise = new Promise(() => {});\n\nexport async function locksSupported() {\n\tif ('locks' in navigator) {\n\t\ttry {\n\t\t\treturn await navigator.locks.request('lock-test', () => true);\n\t\t} catch(err) {\n\t\t\treturn false;\n\t\t}\n\t}\n}\n\nexport function isAsyncFunction(what) {\n\treturn what instanceof Function && what.constructor.name === 'AsyncFunction';\n}\n\nexport function isAsync(what) {\n\treturn isAsyncFunction(what) || what instanceof  Promise;\n}\n\nexport function getDeferred({ signal } = {}) {\n\tconst deferred = {};\n\n\tdeferred.promise = new Promise((resolve, reject) => {\n\t\tdeferred.resolve = resolve;\n\t\tdeferred.reject = reject;\n\t});\n\n\tif (signal instanceof EventTarget && signal.throwIfAborted instanceof Function) {\n\t\tif (signal.aborted) {\n\t\t\tdeferred.reject(signal.reason);\n\t\t} else {\n\t\t\tsignal.addEventListener('abort', ({ target }) => deferred.reject(target.reason), { once: true });\n\t\t}\n\t}\n\n\treturn Object.seal(deferred);\n}\n\nexport async function callAsAsync(callback, args = [], { thisArg = globalThis, signal } = {}) {\n\tconst { promise, resolve, reject } = getDeferred({ signal });\n\n\tif (! (callback instanceof Function)) {\n\t\treject(new TypeError('`callAsAsync` expects callback to be a function'));\n\t} else if (! Array.isArray(args)) {\n\t\treject(new TypeError('`args` must be an array'));\n\t} else if (signal instanceof AbortSignal && signal.aborted) {\n\t\treject(signal.reason);\n\t} else if (isAsyncFunction(callback)) {\n\t\tcallback.call(thisArg, args).then(resolve).catch(reject);\n\t} else {\n\t\tqueueMicrotask(() => {\n\t\t\ttry {\n\t\t\t\tresolve(callback.call(thisArg, args));\n\t\t\t} catch(err) {\n\t\t\t\treject(err);\n\t\t\t}\n\t\t});\n\t}\n\n\treturn await promise;\n}\n\nexport function createDeferredCallback(callback, { signal, thisArg } = {}) {\n\tconst { promise, resolve } = getDeferred({ signal });\n\tconst retPromise = promise.then(() => callAsAsync(callback, [], { signal, thisArg }));\n\n\treturn async () => {\n\t\tresolve();\n\t\treturn await retPromise;\n\t};\n}\n\nexport async function lock(name, callback, {\n\tthisArg = globalThis,\n\targs = [],\n\tmode = 'exclusive',\n\tifAvailable = false,\n\tsteal = false,\n\tallowFallback = true,\n\tsignal,\n} = {}) {\n\tif ((! allowFallback) || await locksSupported()) {\n\t\treturn await navigator.locks.request(name, { mode, ifAvailable, steal, signal }, async lock => {\n\t\t\tif (lock) {\n\t\t\t\treturn await callAsAsync(callback, [lock, ...args], { thisArg, signal });\n\t\t\t}\n\t\t});\n\t} else {\n\t\treturn await callAsAsync(callback, [null, ...args], { signal, thisArg });\n\t}\n}\n\nexport async function onAnimationFrame(callback, {\n\tthisArg = globalThis,\n\targs = [],\n\tsignal,\n} = {}) {\n\tconst { promise, resolve, reject } = getDeferred({ signal });\n\tconst id = requestAnimationFrame(hrts => callAsAsync(callback, [hrts, ...args], { signal, thisArg }).then(resolve, reject));\n\n\tif (signal instanceof AbortSignal) {\n\t\tsignalAborted(signal).finally(() => cancelAnimationFrame(id));\n\t}\n\n\treturn await promise;\n}\n\nexport async function onIdle(callback, {\n\ttimeout,\n\tthisArg = globalThis,\n\targs = [],\n\tsignal,\n} = {}) {\n\tconst { promise, resolve, reject } = getDeferred({ signal });\n\tconst id = requestIdleCallback(hrts => callAsAsync(callback, [hrts, ...args], { thisArg, signal }).then(resolve, reject), { timeout });\n\n\tif (signal instanceof AbortSignal) {\n\t\tsignalAborted(signal).finally(() => cancelIdleCallback(id));\n\t}\n\n\treturn await promise;\n}\n\nexport async function onTimeout(callback, {\n\ttimeout = 0,\n\tthisArg = globalThis,\n\targs = [],\n\tsignal,\n} = {}) {\n\tconst { resolve, reject, promise } = getDeferred({ signal });\n\n\tif (Number.isSafeInteger(timeout) && timeout >= 0) {\n\t\tconst id = setTimeout(() => {\n\t\t\tcallAsAsync(callback, args, { signal, thisArg }).then(resolve).catch(reject);\n\t\t}, timeout);\n\n\t\tif (signal instanceof AbortSignal) {\n\t\t\tsignalAborted(signal).finally(() => clearTimeout(id));\n\t\t}\n\t} else {\n\t\treject(new TypeError('`timeout` must be a positive intege'));\n\t}\n\n\treturn await promise;\n}\n\nexport async function sleep(timeout, { signal } = {}) {\n\tconst { resolve, promise } = getDeferred({ signal });\n\tonTimeout(() => resolve(performance.now()), { signal, timeout })\n\t\t.catch(() => resolve(performance.now()));\n\treturn await promise;\n}\n","/**\n * @copyright 2023 Chris Zuber <admin@kernvalley.us>\n */\nexport const isNumber = num => typeof num === 'number' && ! Number.isNaN(num);\n\nexport const divisibleBy = (num, divisor) => isNumber(num) && num % divisor === 0;\n\nexport const even = num => divisibleBy(num, 2);\n\nexport const odd = num => ! even(num);\n\nexport const between = (min, val, max) => isNumber(val) && val >= min && val <= max;\n\nexport const clamp = (min, value, max) => Math.min(max, Math.max(min, value));\n\nexport const uint8 = n => Math.min(0, parseInt(n) % 255);\n\nexport const uint8clamped = n => clamp(0, parseInt(n), 255);\n\nexport const toHex = val => uint8clamped(val).toString(16).padStart(2, '0');\n\nconst supportsRange = () => 'Iterator' in globalThis && (globalThis.Iterator.range instanceof Function);\n\n/**\n * @deprecated\n */\nexport function range(start, end, step = 1) {\n\tconsole.warn('range() is deprecated. Use `Iterator.range()` instead.');\n\tif (supportsRange()) {\n\t\treturn Iterator.range(start, end, { step });\n\t} else {\n\t\tthrow new DOMException('`Iterator.range()` not supported.');\n\t}\n}\n\n/**\n * Note: Requires iterator helper methods & `Iterator.range()`\n */\nexport function isPrime(n) {\n\tif (! supportsRange()) {\n\t\tthrow new DOMException('`Iterator.range()` not supported.');\n\t} else if (! Number.isSafeInteger(n) || n < 2) {\n\t\treturn false;\n\t} else if (n === 2 || n === 3 || n === 5 || n === 7) {\n\t\treturn true;\n\t} else if (n % 2 === 0) {\n\t\treturn false;\n\t} else {\n\t\tconst sqrtAndOne = Math.floor(Math.sqrt(n)) + 1;\n\t\treturn ! Iterator.range(3, sqrtAndOne, { step: 2 }).some(f => n % f === 0);\n\t}\n}\n\n/**\n * Note: Requires iterator helper methods & `Iterator.range()`\n */\nexport const primes = (start = 2, end = Infinity) => Iterator.range(start, end).filter(isPrime);\n\nexport function* fibonacci(terms = Number.MAX_SAFE_INTEGER) {\n\tif (! (Number.isSafeInteger(terms) && terms > 0)) {\n\t\tthrow new TypeError('Invalid terms given');\n\t}\n\n\tlet current = 1, prev = 1;\n\tyield 1;\n\n\tfor (let term = 1; term < terms; term++) {\n\t\tyield current;\n\t\t[prev, current] = [current, current + prev];\n\t}\n}\n\nexport function randomFloat(min, max) {\n\t[min, max] = [Math.min(min, max), Math.max(min, max)];\n\treturn Math.random() * (max - min + 1) + min;\n}\n\nexport function randomInt() {\n\treturn crypto.getRandomValues(new Uint32Array(1))[0];\n}\n\nexport function* rng({ length = 32 } = {}) {\n\twhile(true) {\n\t\tfor (const num of crypto.getRandomValues(new Uint8Array(length))) {\n\t\t\tyield num;\n\t\t}\n\t}\n}\n\nexport function* rng16({ length = 32 } = {}) {\n\twhile(true) {\n\t\tfor (const num of crypto.getRandomValues(new Uint16Array(length))) {\n\t\t\tyield num;\n\t\t}\n\t}\n}\n\nexport function* rng32({ length = 32 } = {}) {\n\twhile(true) {\n\t\tfor (const num of crypto.getRandomValues(new Uint32Array(length))) {\n\t\t\tyield num;\n\t\t}\n\t}\n}\n\nexport function sigma(start, end, callback) {\n\treturn Iterator.range(start, end).map(callback).reduce((sum, n) => sum + n);\n}\n\nexport function sum(...nums) {\n\treturn nums.reduce((sum, num) => sum + num);\n}\n\nexport function product(...nums) {\n\treturn nums.reduce((prod, num) => prod * num);\n}\n\nexport function mean(...nums) {\n\treturn sum(...nums) / nums.length;\n}\n\nexport function variance(...nums) {\n\tif (nums.length <= 1) {\n\t\treturn 0;\n\t}\n\tconst m = mean(...nums);\n\treturn nums.reduce((sum, num) => sum + (num - m)**2, 0) / (nums.length - 1);\n}\n\nexport function standardDeviation(...nums) {\n\treturn Math.sqrt(variance(...nums));\n}\n\nexport function choose(n, k) {\n\tif (k === 0 || k === n) {\n\t\treturn 1;\n\t} else if (! (Number.isInteger(n) && Number.isInteger(k))) {\n\t\treturn NaN;\n\t}\n\treturn factorial(n) / (k * factorial(n - k));\n}\n\nexport function factorial(n) {\n\tif (! Number.isInteger(n)) {\n\t\treturn NaN;\n\t} else if (n > 1) {\n\t\treturn n * factorial(n - 1);\n\t} else if (n === 1 || n === 0) {\n\t\treturn 1;\n\t} else {\n\t\treturn undefined;\n\t}\n}\n","/**\n * @copyright 2023 Chris Zuber <admin@kernvalley.us>\n */\nimport { callOnce } from './utility.js';\n\nexport function setProp(el, prop, val, {\n\tpolicy,\n} = {}) {\n\tswitch(getPropertyType(el.tagName, prop)) {\n\t\tcase 'TrustedScript':\n\t\t\tel[prop] = createScript(val, { policy });\n\t\t\tbreak;\n\n\t\tcase 'TrustedScriptURL':\n\t\t\tel[prop] = createScriptURL(val, { policy });\n\t\t\tbreak;\n\n\t\tcase 'TrustedHTML':\n\t\t\tel[prop] = createHTML(val, { policy });\n\t\t\tbreak;\n\n\t\tdefault:\n\t\t\tel[prop] = val;\n\t}\n}\n\nexport function setAttr(el, attr, val, {\n\telementNs,\n\tpolicy,\n} = {}) {\n\tswitch(getAttributeType(el.tagName, attr, elementNs)) {\n\t\tcase 'TrustedScriptURL':\n\t\t\tif (typeof elementNs === 'string') {\n\t\t\t\tel.setAttributeNs(elementNs, attr, createScriptURL(val, { policy }));\n\t\t\t} else {\n\t\t\t\tel.setAttribute(attr, createScriptURL(val, { policy }));\n\t\t\t}\n\t\t\tbreak;\n\n\t\tcase 'TrustedScript':\n\t\t\tif (typeof elementNs === 'string') {\n\t\t\t\tel.setAttributeNS(elementNs, attr, createScript(val, { policy }));\n\t\t\t} else {\n\t\t\t\tel.setAttribute(attr, createScript(val, { policy }));\n\t\t\t}\n\t\t\tbreak;\n\n\t\tcase 'TrustedHTML':\n\t\t\tif (typeof elementNs === 'string') {\n\t\t\t\tel.setAttributeNS(elementNs, attr, createHTML(val, { policy }));\n\t\t\t} else {\n\t\t\t\tel.setAttribute(attr, createHTML(val, { policy }));\n\t\t\t}\n\t\t\tbreak;\n\n\t\tdefault:\n\t\t\tif (typeof elementNs === 'string') {\n\t\t\t\tel.setAttributeNS(elementNs, attr, val);\n\t\t\t} else {\n\t\t\t\tel.setAttribute(attr, val);\n\t\t\t}\n\t}\n}\n\nexport function supported() {\n\treturn 'trustedTypes' in globalThis\n\t\t&& trustedTypes instanceof EventTarget\n\t\t&& trustedTypes.createPolicy instanceof Function;\n}\n\nexport function isTrustPolicy(policy) {\n\tif ('TrustedTypePolicy' in globalThis && policy instanceof TrustedTypePolicy) {\n\t\treturn true;\n\t} else {\n\t\treturn policy != null && policy.createHTML instanceof Function;\n\t}\n}\n\nexport function hasDefaultPolicy() {\n\treturn supported() && isTrustPolicy(trustedTypes.defaultPolicy);\n}\n\nexport function getAttributeType(tagName, attribute, elementNs) {\n\tif (supported()) {\n\t\treturn trustedTypes.getAttributeType(tagName.toLowerCase(), attribute, elementNs);\n\t} else {\n\t\treturn null;\n\t}\n}\n\nexport function getPropertyType(tagName, property) {\n\tif (supported()) {\n\t\treturn trustedTypes.getPropertyType(tagName.toLowerCase(), property);\n\t} else {\n\t\treturn null;\n\t}\n}\n\nexport function isHTML(input) {\n\tif (supported()) {\n\t\treturn trustedTypes.isHTML(input);\n\t} else {\n\t\treturn typeof input === 'string';\n\t}\n}\n\nexport function isScript(input) {\n\tif (supported()) {\n\t\treturn trustedTypes.isScript(input);\n\t} else {\n\t\treturn typeof input === 'string';\n\t}\n}\n\nexport function isScriptURL(input) {\n\tif (supported()) {\n\t\treturn trustedTypes.isScriptURL(input);\n\t} else {\n\t\treturn typeof input === 'string' || input instanceof URL;\n\t}\n}\n\nexport function isTrustedType(input) {\n\tif (supported()) {\n\t\treturn trustedTypes.isHTML(input) || trustedTypes.isScript(input) || trustedTypes.isScriptURL(input);\n\t} else {\n\t\treturn true;\n\t}\n}\n\nexport function createHTML(input, { policy = getDefaultPolicy() } = {}) {\n\tif (isTrustPolicy(policy) && ! isHTML(input)) {\n\t\treturn policy.createHTML(input);\n\t} else {\n\t\treturn input;\n\t}\n}\n\nexport function createScript(input, { policy = getDefaultPolicy() } = {}) {\n\tif (isTrustPolicy(policy) && ! isScript(input)) {\n\t\treturn policy.createScript(input);\n\t} else {\n\t\treturn input;\n\t}\n}\n\nexport function createScriptURL(input, { policy = getDefaultPolicy() } = {}) {\n\tif (isTrustPolicy(policy) && ! isScriptURL(input)) {\n\t\treturn policy.createScriptURL(input);\n\t} else {\n\t\treturn input;\n\t}\n}\n\nexport function createPolicy(name, {\n\tcreateHTML = () => {\n\t\tthrow new TypeError('This policy does not provide `createHTML()`');\n\t},\n\tcreateScript = () => {\n\t\tthrow new TypeError('This policy does not provide `createScript()`');\n\t},\n\tcreateScriptURL = () => {\n\t\tthrow new TypeError('This policy does not provide `createScriptURL()`');\n\t},\n}) {\n\tif (supported()) {\n\t\treturn trustedTypes.createPolicy(name, { createHTML, createScript, createScriptURL });\n\t} else {\n\t\treturn Object.freeze({\n\t\t\tname,\n\t\t\tcreateHTML: (input, ...args) => createHTML(input.toString(), ...args),\n\t\t\tcreateScript: (input, ...args) => createScript(input.toString(), ...args),\n\t\t\tcreateScriptURL: (input, ...args) => createScriptURL(input.toString(), ...args),\n\t\t});\n\t}\n}\n\nexport function getDefaultPolicy() {\n\tif (supported()) {\n\t\treturn trustedTypes.defaultPolicy;\n\t} else {\n\t\treturn null;\n\t}\n}\n\nexport const createHTMLPolicyGetter = (name, cb) => callOnce(() => createPolicy(name, { createHTML: cb }));\n\nexport const createScriptPolicyGetter = (name, cb) => callOnce(() => createPolicy(name, { createScript: cb }));\n\nexport const createScriptURLPolicyGetter = (name, cb) => callOnce(() => createPolicy(name, { createScriptURL: cb }));\n","const maps = new Map();\nconst cache = new Map();\n\nexport const URL_PREFIXES = ['http:', 'https:'];\nexport const PATH_PREFIXES = ['/', './', '../'];\nexport const isString = str => typeof str === 'string';\nexport const isURL = str => isString(str) && URL_PREFIXES.some(pre => str.startsWith(pre));\nexport const isPath = str => isString(str) && PATH_PREFIXES.some(pre => str.startsWith(pre));\nexport const isBare = str => isString(str)\n\t&& ! [...URL_PREFIXES, ...PATH_PREFIXES].some(pre => str.startsWith(pre));\n\nexport function getImportmap() {\n\tif (maps.has(document)) {\n\t\treturn maps.get(document);\n\t} else {\n\t\tconst script = document.head.querySelector('script[type=\"importmap\"]');\n\n\t\tif (script instanceof HTMLScriptElement) {\n\t\t\tconst { imports = {}, scope = {} } = JSON.parse(script.textContent);\n\t\t\treturn { imports, scope };\n\t\t} else {\n\t\t\treturn { imports: {}, scope: {} };\n\t\t}\n\t}\n}\n\nexport function resolveModule(specifier, { imports } = getImportmap()) {\n\tif (cache.has(specifier)) {\n\t\treturn cache.get(specifier);\n\t} else if (imports.hasOwnProperty(specifier)) {\n\t\treturn imports[specifier];\n\t} else if (specifier.includes('/')) {\n\t\tlet found = false;\n\n\t\tconst longest = Object.keys(imports)\n\t\t\t.filter(spec => spec.endsWith('/'))\n\t\t\t.reduce((match, spec) => {\n\t\t\t\tif (! found && specifier.startsWith(spec)) {\n\t\t\t\t\tfound = true;\n\t\t\t\t\treturn spec;\n\t\t\t\t} else if (found && spec.length > match && specifier.startsWith(spec)) {\n\t\t\t\t\treturn spec;\n\t\t\t\t} else {\n\t\t\t\t\treturn match;\n\t\t\t\t}\n\t\t\t}, null);\n\t\tif (! found) {\n\t\t\tthrow new TypeError(`Resolution of specifier “${specifier}” was blocked by a null entry.`);\n\t\t} else if (found) {\n\t\t\tconst resolved = new URL(specifier.replace(longest, imports[longest]), document.baseURI).href;\n\t\t\tcache.set(specifier, resolved);\n\t\t\treturn resolved;\n\t\t}\n\t}\n}\n","/**\n * @copyright 2023 Chris Zuber <admin@kernvalley.us>\n */\nimport { randomInt } from './math.js';\nimport { isAsyncFunction, getDeferred } from './promises.js';\nimport { isScriptURL, isTrustPolicy } from './trust.js';\nimport { isBare, resolveModule } from './module.js';\n\nconst funcs = new WeakMap();\n\nexport function isStrictMode() {\n\t// Probably always true\n\treturn typeof this === 'undefined';\n}\n\nexport const autoServiceWorkerRegistration = callOnce(async ({\n\tpolicy = 'trustedTypes' in globalThis ? trustedTypes.defaultPolicy : null,\n} = {}) => {\n\tif ('serviceWorker' in navigator && 'serviceWorker' in document.documentElement.dataset) {\n\t\tconst { serviceWorker, scope = '/', updateViaCache } = document.documentElement.dataset;\n\n\t\ttry {\n\t\t\tif (isTrustPolicy(policy)) {\n\t\t\t\tawait registerServiceWorker(policy.createScriptURL(serviceWorker), { scope, updateViaCache });\n\t\t\t} else {\n\t\t\t\tawait registerServiceWorker(serviceWorker, { scope, updateViaCache });\n\t\t\t}\n\n\t\t\tawait reloadOnUpdate();\n\t\t} catch(err) {\n\t\t\tconsole.error(err);\n\t\t}\n\t}\n});\n\nexport async function reloadOnUpdate() {\n\tif ('serviceWorker' in navigator && 'reloadOnUpdate' in document.documentElement.dataset) {\n\t\tconst reg = await navigator.serviceWorker.ready;\n\n\t\treg.addEventListener('updatefound', async ({ target }) => {\n\t\t\ttarget.update();\n\n\t\t\tconst HTMLNotificationElement = await customElements.whenDefined('html-notification');\n\t\t\tconst notification = new HTMLNotificationElement('Update available', {\n\t\t\t\tbody: 'App updated in background. Would you like to reload to see updates?',\n\t\t\t\trequireInteraction: true,\n\t\t\t\tactions: [{\n\t\t\t\t\ttitle: 'Reload',\n\t\t\t\t\taction: 'reload',\n\t\t\t\t}, {\n\t\t\t\t\ttitle: 'Dismiss',\n\t\t\t\t\taction: 'dismiss',\n\t\t\t\t}]\n\t\t\t});\n\n\t\t\tnotification.addEventListener('notificationclick', ({ target, action }) => {\n\t\t\t\tswitch(action) {\n\t\t\t\t\tcase 'dismiss':\n\t\t\t\t\t\ttarget.close();\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'reload':\n\t\t\t\t\t\ttarget.close();\n\t\t\t\t\t\tlocation.reload();\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t}\n}\n\nexport async function registerServiceWorker(source, {\n\tscope,\n\tpolicy = 'trustedTypes' in globalThis ? trustedTypes.defaultPolicy : null,\n\ttype = 'classic',\n\tupdateViaCache = 'none',\n} = {}) {\n\tconst { resolve, reject, promise } = getDeferred();\n\n\tif (! ('serviceWorker' in navigator && navigator.serviceWorker.register instanceof Function)) {\n\t\treject(new DOMException('Service worker not supported'));\n\t} else if (! (typeof source === 'string' || isScriptURL(source) || source instanceof URL)) {\n\t\treject(new TypeError('Invalid Service worker registration source'));\n\t} else if (! isScriptURL(source) && isTrustPolicy(policy)) {\n\t\tnavigator.serviceWorker.register(\n\t\t\tpolicy.createScriptURL(source),\n\t\t\t{ scope, type, updateViaCache }\n\t\t).then(resolve).catch(reject);\n\t} else {\n\t\tnavigator.serviceWorker.register(source, { scope, type, updateViaCache })\n\t\t\t.then(resolve).catch(reject);\n\t}\n\n\treturn await promise;\n}\n\nexport function getURLResolver({ base = document.baseURI, path = './' } = {}) {\n\tif (isBare(base)) {\n\t\treturn getURLResolver({ base: resolveModule(base), path });\n\t} else {\n\t\tconst url = new URL(path, base);\n\n\t\treturn path => new URL(path, url).href;\n\t}\n}\n\nexport function isObject(thing) {\n\treturn typeof thing === 'object' && ! Object.is(thing, null) && ! Array.isArray(thing);\n}\n\nexport function isNull(val) {\n\treturn Object.is(val, null);\n}\n\nexport function isUndefined(val) {\n\treturn typeof val === 'undefined';\n}\n\nexport function isIterable(thing) {\n\treturn Array.isArray(thing) || (isObject(thing) && thing[Symbol.iterator] instanceof Function);\n}\n\nexport function isNullish(val) {\n\tswitch (typeof val) {\n\t\tcase 'undefined':\n\t\t\treturn true;\n\n\t\tcase 'object':\n\t\t\tif (Object.is(val, null)) {\n\t\t\t\treturn true;\n\t\t\t} else if (Array.isArray(val)) {\n\t\t\t\treturn val.length === 0;\n\t\t\t} else if (val instanceof Date) {\n\t\t\t\treturn Number.isNaN(val.getTime());\n\t\t\t} else {\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\tcase 'number':\n\t\t\treturn Number.isNaN(val);\n\n\t\tcase 'string':\n\t\t\treturn val.length === 0;\n\n\t\tdefault:\n\t\t\treturn false;\n\t}\n}\n\nexport function getType(thing) {\n\tswitch (typeof thing) {\n\t\tcase 'undefined':\n\t\t\treturn 'Undefined';\n\n\t\tcase 'function':\n\t\t\tif ('prototype' in thing) {\n\t\t\t\treturn getType(thing.prototype);\n\t\t\t} else if ('constructor' in thing) {\n\t\t\t\treturn thing.constructor.name;\n\t\t\t} else {\n\t\t\t\treturn 'Function';\n\t\t\t}\n\n\t\tcase 'object':\n\t\t\tif (Object.is(thing, null)) {\n\t\t\t\treturn 'Null';\n\t\t\t} else if ('constructor' in thing) {\n\t\t\t\treturn thing.constructor.name;\n\t\t\t} else if (Symbol.toStringTag in thing) {\n\t\t\t\treturn thing[Symbol.toStringTag];\n\t\t\t} else if ('prototype' in thing) {\n\t\t\t\treturn  getType(thing.prototype);\n\t\t\t} else {\n\t\t\t\tconsole.log(thing);\n\t\t\t\treturn 'Unknown Object';\n\t\t\t}\n\n\t\tcase 'string':\n\t\t\treturn 'String';\n\n\t\tcase 'number':\n\t\t\treturn Number.isNaN(thing) ? 'NaN' : 'Number';\n\n\t\tcase 'bigint':\n\t\t\treturn 'BigInt';\n\n\t\tcase 'boolean':\n\t\t\treturn 'Boolean';\n\n\t\tcase 'symbol':\n\t\t\treturn 'Symbol';\n\n\t\tdefault:\n\t\t\treturn 'Unknown';\n\t}\n}\n\nexport function isA(thing, expectedType) {\n\tif (typeof expectedType === 'string') {\n\t\treturn getType(thing) === expectedType;\n\t} else if (isObject(expectedType) && 'constructor' in expectedType) {\n\t\treturn isA(thing, expectedType.constructor.name);\n\t} else {\n\t\tthrow new TypeError('Invalid argument for `expectedType`');\n\t}\n}\n\nexport function sameType(thing1, thing2) {\n\treturn isA(thing1, getType(thing2));\n}\n\nexport function deepEquals(thing1, thing2, { depth = 5 } = {}) {\n\tconst type1 = getType(thing1);\n\tconst type2 = getType(thing2);\n\n\tif (! Number.isSafeInteger(depth)) {\n\t\tthrow new TypeError('`depth` must be an integer');\n\t} else if (type1 !== type2) {\n\t\treturn false;\n\t} else if (thing1 === thing2) {\n\t\treturn true;\n\t} else {\n\t\tdepth--;\n\t\tswitch(type1) {\n\t\t\tcase 'NaN':\n\t\t\t\t// Since NaN !== NaN\n\t\t\t\treturn true;\n\n\t\t\tcase 'BigInt':\n\t\t\tcase 'Number':\n\t\t\tcase 'String':\n\t\t\tcase 'Symbol':\n\t\t\tcase 'Boolean':\n\t\t\t\t// Already know not equal\n\t\t\t\treturn false;\n\n\t\t\tcase 'Object':\n\t\t\t\treturn depth < 0 || deepEquals(Object.entries(thing1), Object.entries(thing2), { depth });\n\n\t\t\tcase 'Array':\n\t\t\t\treturn depth < 0 || (\n\t\t\t\t\tthing1.length === thing2.length\n\t\t\t\t\t&& thing1.every((thing, i) => deepEquals(thing, thing2[i], { depth }))\n\t\t\t\t);\n\n\t\t\tcase 'Map':\n\t\t\tcase 'Set':\n\t\t\t\treturn depth < 0 || deepEquals([...thing1], [...thing2], { depth });\n\n\t\t\tcase 'URL':\n\t\t\t\treturn thing1.href === thing2.href;\n\n\t\t\tdefault:\n\t\t\t\tif (thing1 instanceof Node) {\n\t\t\t\t\treturn thing1.isSameNode(thing2);\n\t\t\t\t} else if (Symbol.iterator in thing1) {\n\t\t\t\t\treturn depth < 0 || deepEquals([...thing1], [...thing2], { depth });\n\t\t\t\t} else {\n\t\t\t\t\t// Since already not `===`\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t}\n\t}\n}\n\n/* global define */\nexport function amd(name, factory, requires = {}) {\n\tif (typeof define === 'function' && define.amd) {\n\t\t// AMD. Register as an anonymous module.\n\t\ttry {\n\t\t\tdefine(name, requires, factory);\n\t\t\treturn true;\n\t\t} catch(err) {\n\t\t\tconsole.error(err);\n\t\t\treturn false;\n\t\t}\n\t} else {\n\t\treturn false;\n\t}\n}\n\nexport function errorToEvent(error, type = 'error') {\n\tif (error instanceof Error) {\n\t\tconst { message, name, fileName: filename, lineNumber: lineno, columnNumber: colno } = error;\n\t\treturn new ErrorEvent(type, { error, message: `${name}: ${message}`, filename, lineno, colno });\n\t} else {\n\t\tthrow new TypeError('`errorToEvent()` only accepts Errors');\n\t}\n}\n\nexport function callOnce(callback, thisArg) {\n\tif (callback.once instanceof Function) {\n\t\treturn callback.once(thisArg);\n\t} else {\n\t\treturn function(...args) {\n\t\t\tif (funcs.has(callback)) {\n\t\t\t\treturn funcs.get(callback);\n\t\t\t} else if (isAsyncFunction(callback)) {\n\t\t\t\tconst retVal = callback.apply(thisArg || this, args).catch(err => {\n\t\t\t\t\tfuncs.delete(callback);\n\t\t\t\t\tthrow err;\n\t\t\t\t});\n\n\t\t\t\tfuncs.set(callback, retVal);\n\t\t\t\treturn retVal;\n\t\t\t} else if (callback instanceof Function) {\n\t\t\t\tconst retVal = callback.apply(thisArg || this, args);\n\t\t\t\tfuncs.set(callback, retVal);\n\t\t\t\treturn retVal;\n\t\t\t}\n\t\t};\n\t}\n}\n\nexport function setURLParams(forURL, params) {\n\tconst url = new URL(forURL, document.baseURI);\n\n\tif (params instanceof HTMLFormElement) {\n\t\treturn setURLParams(url, new FormData(params));\n\t} else if (params instanceof FormData) {\n\t\treturn setURLParams(url, Object.fromEntries(params));\n\t} else if (params instanceof URLSearchParams) {\n\t\treturn setURLParams(url, Object.fromEntries(params));\n\t} else if (Array.isArray(params) || typeof params === 'string') {\n\t\treturn setURLParams(url, new URLSearchParams(params));\n\t} else if (isObject(params)) {\n\t\tObject.entries(params).forEach(([k, v]) => {\n\t\t\tif (typeof v === 'string' || (typeof v === 'number' && ! Number.isNaN(v))) {\n\t\t\t\turl.searchParams.set(k, v);\n\t\t\t} else if (typeof v === 'boolean') {\n\t\t\t\tif (v) {\n\t\t\t\t\turl.searchParams.set(k, '');\n\t\t\t\t} else {\n\t\t\t\t\turl.searchParams.delete(k);\n\t\t\t\t}\n\t\t\t} else if (! isNullish(v)) {\n\t\t\t\turl.searchParams.set(k, v.toString());\n\t\t\t}\n\t\t});\n\t}\n\n\treturn url;\n}\n\nexport function setUTMParams(url, {\n\tsource: utm_source,\n\tmedium: utm_medium = 'referral',\n\tcontent: utm_content,\n\tcampaign: utm_campaign,\n\tterm: utm_term,\n} = {}) {\n\tif (isNullish(url)) {\n\t\treturn null;\n\t} else if (! (url instanceof URL)) {\n\t\treturn setUTMParams(new URL(url, document.baseURI), {\n\t\t\tsource: utm_source,\n\t\t\tmedium: utm_medium,\n\t\t\tcontent: utm_content,\n\t\t\tcampaign: utm_campaign,\n\t\t\tterm: utm_term,\n\t\t});\n\t} else if (typeof utm_source !== 'string') {\n\t\treturn url;\n\t} else {\n\t\treturn setURLParams(url, { utm_source, utm_medium, utm_content, utm_campaign, utm_term });\n\t}\n}\n\nexport function debounce(callback, { delay = 17, thisArg } = {}) {\n\tif (! (callback instanceof Function)) {\n\t\tthrow new TypeError('Callback must be a function');\n\t} else if (! Number.isFinite(delay) || delay < 0) {\n\t\tthrow new TypeError('Timeout must be a positive intiger');\n\t} else {\n\t\tlet to;\n\t\treturn function(...args) {\n\t\t\tif (typeof to === 'number') {\n\t\t\t\tclearTimeout(to);\n\t\t\t\tto = null;\n\t\t\t}\n\t\t\tto = setTimeout((...args) => callback.apply(thisArg, args), delay, ...args);\n\t\t};\n\t}\n}\n\nexport function throttle(callback, { delay = 17, thisArg } = {}) {\n\tif (! (callback instanceof Function)) {\n\t\tthrow new TypeError('Callback must be a function');\n\t} else if (! Number.isFinite(delay) || delay < 0) {\n\t\tthrow new TypeError('Timeout must be a positive intiger');\n\t} else {\n\t\tlet to;\n\t\treturn function(...args) {\n\t\t\tif (typeof to !== 'number') {\n\t\t\t\tto = setTimeout(() => to = null, delay);\n\t\t\t\tcallback.apply(thisArg, args);\n\t\t\t}\n\t\t};\n\t}\n}\n\nexport function random(arr) {\n\tif (Array.isArray(arr) && arr.length !== 0) {\n\t\treturn arr[randomInt(0, arr.length)];\n\t}\n}\n\nexport const toSpinalCase = str => str.replace(/[A-Z]/g, (m, i) => i === 0\n\t? m.toLowerCase()\n\t: `-${m.toLowerCase()}`);\n\nexport const toCamelCase = str => str.replace(/-[a-z\\d]/g, m => m.substr(1).toUpperCase());\n\nexport const ucFirst = str => str.substr(0, 1).toUpperCase() + str.substr(1);\n","/**\n * @copyright 2023 Chris Zuber <admin@kernvalley.us>\n */\nimport { query, when } from './dom.js';\nimport { signalAborted } from './abort.js';\nimport { getDeferred } from './promises.js';\nimport { debounce as db, throttle } from './utility.js';\n\nexport async function loaded(target, {\n\tsignal: passedSignal,\n\tsuccess = 'load',\n\terror = 'error',\n} = {}) {\n\treturn await new Promise(async (resolve, reject) => {\n\t\tif (passedSignal instanceof AbortSignal && passedSignal.aborted) {\n\t\t\treject(passedSignal.reason);\n\t\t} else if (target instanceof HTMLScriptElement && target.noModule && HTMLScriptElement.supports('module')) {\n\t\t\t/**\n\t\t\t * <script nomodule> will never load\n\t\t\t */\n\t\t\tresolve(target);\n\t\t} else if (target instanceof HTMLLinkElement && target.disabled) {\n\t\t\t/**\n\t\t\t * <link disabled> will never load\n\t\t\t */\n\t\t\tresolve(target);\n\t\t} else if (target instanceof HTMLImageElement && target.loading === 'lazy' && !(target.parentElement instanceof Element)) {\n\t\t\t/**\n\t\t\t * <img loading=\"lazy\"> will not load until appended\n\t\t\t */\n\t\t\tresolve(target);\n\t\t} else if (target instanceof HTMLImageElement && target.decode instanceof Function) {\n\t\t\tawait target.decode();\n\t\t\treturn target;\n\t\t} else {\n\t\t\tconst controller = new AbortController();\n\t\t\tconst signal = passedSignal instanceof AbortSignal ? AbortSignal.any([\n\t\t\t\tpassedSignal,\n\t\t\t\tcontroller.signal,\n\t\t\t]) : passedSignal;\n\n\t\t\tlisten(target, success, ({ target }) => {\n\t\t\t\tresolve(target);\n\t\t\t\tcontroller.abort();\n\t\t\t}, { once: true, signal });\n\n\t\t\tlisten(target, error, ({ target: { tagName, src, href} }) => {\n\t\t\t\tconst error = new Error(`Failed to load <${tagName.toLowerCase()}>`, {\n\t\t\t\t\tcause: new Error(`Request to ${src || href} failed`),\n\t\t\t\t});\n\n\t\t\t\treject(error);\n\t\t\t\tcontroller.abort(error);\n\t\t\t}, { once: true, signal });\n\n\t\t\tif (passedSignal instanceof AbortSignal) {\n\t\t\t\tlisten(passedSignal, 'abort', ({ target: { reason }}) => {\n\t\t\t\t\tif (! controller.signal.aborted) {\n\t\t\t\t\t\treject(reason);\n\t\t\t\t\t\tcontroller.abort(reason);\n\t\t\t\t\t}\n\t\t\t\t}, { once: true, signal: controller.signal });\n\t\t\t}\n\t\t}\n\t});\n}\n\nexport function getEventFeatures() {\n\tconst el = document.createElement('div');\n\tconst eventFeatures = {\n\t\tnativeSignal: 'AbortController' in globalThis && AbortController.prototype.hasOwnProperty('signal'),\n\t\tsignal: false,\n\t\tpassive: false,\n\t\tcapture: false,\n\t\tonce: false,\n\t};\n\n\t// Use of a getter will detect support when properties are read\n\tconst options = {\n\t\tget passive() {\n\t\t\teventFeatures.passive = true;\n\t\t\treturn undefined;\n\t\t},\n\t\tget signal() {\n\t\t\teventFeatures.signal = true;\n\t\t\treturn undefined;\n\t\t},\n\t\tget capture() {\n\t\t\teventFeatures.capture = true;\n\t\t\treturn undefined;\n\t\t},\n\t\tget once() {\n\t\t\teventFeatures.once = true;\n\t\t\treturn undefined;\n\t\t},\n\t};\n\n\ttry {\n\t\tel.addEventListener('click', null, options);\n\t\tel.removeEventListener('click', null, options);\n\t} catch(err) {\n\t\tconsole.error(err);\n\t}\n\n\treturn Object.seal(eventFeatures);\n}\n\nexport const features = getEventFeatures();\n\nexport function addListener(targets, events, callback, { capture, once, passive, signal } = {}) {\n\tif (! Array.isArray(targets)) {\n\t\ttargets = query(targets);\n\t}\n\n\tif (! Array.isArray(events)) {\n\t\tevents = Array.of(events);\n\t}\n\n\ttargets.forEach(target => {\n\t\tevents.forEach(event => listen(target, event, callback, { capture, once, passive, signal }));\n\t});\n}\n\nexport function listen(target, event, callback, { capture, once, passive, signal } = {}) {\n\tif (! (signal instanceof EventTarget && signal.aborted)) {\n\t\ttarget.addEventListener(event, callback, { capture, once, passive, signal });\n\n\t\tif (features.signal === false && signal instanceof EventTarget) {\n\t\t\tsignalAborted(signal).finally(() => target.removeEventListener(event, callback, { capture, once, passive, signal }));\n\t\t}\n\t}\n}\n\nexport async function once(target, event, { capture, passive, signal } = {}) {\n\tconst { resolve, promise } = getDeferred({ signal, reason: new DOMException('Operation aborted') });\n\tlisten(target, event, resolve, { capture, once: true, passive, signal });\n\treturn await promise;\n}\n\nexport function removeListener(targets, events, callback, { capture, once, passive, signal } = {}) {\n\tif (! Array.isArray(targets)) {\n\t\ttargets = query(targets);\n\t}\n\n\tif (! Array.isArray(events)) {\n\t\tevents = Array.of(events);\n\t}\n\n\ttargets.forEach(target => {\n\t\tevents.forEach(event => target.removeEventListener(event, callback, { capture, once, passive, signal }));\n\t});\n}\n\n/**\n * Control the execution rate of callbacks, i.e. for listeners\n * https://davidwalsh.name/function-debounce\n *\n * @param  Callable callback    The callback\n * @param  int      [ms]        Number of milliseconds, defaulting to 1/60th a second\n * @param  bool     [immediate] Trigger function immediately instead of after wait ms\n * @return function             Rate limited function\n */\nexport function debounce(func, wait = 17, immediate = false) {\n\tconsole.warn('debounce() in events.js is deprecated. Please use utility.js instead.');\n\treturn immediate ? throttle(func, { delay: wait }): db(func, { delay: wait });\n}\n\nexport async function whenOnline({ signal } = {}) {\n\tif (navigator.onLine === false) {\n\t\tawait when(window, 'online', { signal });\n\t}\n}\n\nexport async function whenOffline({ signal } = {}) {\n\tif (navigator.onLine === true) {\n\t\tawait when(window, 'offline', { signal });\n\t}\n}\n\nexport async function whenVisible({ signal } = {}) {\n\tif (document.visibilityState === 'hidden') {\n\t\tawait when(document, 'visibilitychange', { signal });\n\t}\n}\n\nexport async function whenHidden({ signal } = {}) {\n\tif (document.visibilityState === 'visible') {\n\t\tawait when(document, 'visibilitychange', { signal });\n\t}\n}\n\nexport async function* yieldEvents(target, event, { capture, passive, signal } = {}) {\n\tconst pending = [];\n\tconst def = {};\n\n\tif (! (signal instanceof AbortSignal)) {\n\t\tthrow new TypeError('`signal` required to be an `AbortSignal`.');\n\t}\n\n\ttarget.addEventListener(event, ev => {\n\t\tif (def.resolve instanceof Function) {\n\t\t\tconst resolve = def.resolve;\n\t\t\tdelete def.resolve;\n\t\t\tresolve(ev);\n\t\t} else {\n\t\t\tpending.push(ev);\n\t\t}\n\t}, { capture, passive, signal });\n\n\twhile (! signal.aborted) {\n\t\twhile (pending.length !== 0 && ! signal.aborted) {\n\t\t\tyield pending.shift();\n\t\t}\n\n\t\tif (! (def.resolve instanceof Function)) {\n\t\t\tconst { resolve, promise, reject } = getDeferred();\n\t\t\tdef.resolve = resolve;\n\t\t\tdef.reject = reject;\n\t\t\tdef.promise = promise;\n\t\t}\n\n\t\tyield await def.promise;\n\t}\n\n\treturn pending;\n}\n","/**\n * @copyright 2023 Chris Zuber <admin@kernvalley.us>\n */\nimport { when, beforeUnload, unloaded } from './dom.js';\nimport { getDeferred } from './promises.js';\nimport { listen } from './events.js';\nexport const supported =  'AbortController' in window && AbortController.prototype.hasOwnProperty('signal');\n\nexport function throwIfAborted(signal) {\n\tif (signal instanceof AbortController) {\n\t\tsignal.signal.throwIfAborted();\n\t} else if (signal instanceof AbortSignal) {\n\t\tsignal.throwIfAborted();\n\t}\n}\n\nexport function getBeforeUnloadSignal() {\n\tconst controller = new AbortController();\n\tbeforeUnload().then(() => controller.abort());\n\treturn controller.signal;\n}\n\nexport function getUnloadSignal() {\n\tconst controller = new AbortController();\n\tunloaded().then(() => controller.abort());\n\treturn controller.signal;\n}\n\nexport function isAborted(signal) {\n\tif (signal instanceof AbortController) {\n\t\treturn signal.signal.aborted;\n\t} else {\n\t\treturn signal instanceof AbortSignal && signal.aborted;\n\t}\n}\n\nexport async function signalAborted(signal) {\n\tconst { reject, promise } = getDeferred();\n\n\tif (signal instanceof AbortController) {\n\t\treturn signalAborted(signal.signal);\n\t} else if (! (signal instanceof EventTarget)) {\n\t\treject(new DOMException('Not an AbortSignal'));\n\t} else if (signal.aborted) {\n\t\treject(signal.reason);\n\t} else {\n\t\tsignal.addEventListener('abort', ({ target }) => reject(target.reason),{ once: true });\n\t}\n\n\treturn promise;\n}\n\nexport function abortButtonController(button, { reason } = {}) {\n\tif (! (button instanceof HTMLButtonElement)) {\n\t\tthrow new TypeError('Not a <button>');\n\t}\n\n\tconst controller = new AbortController();\n\tbutton.disabled = false;\n\n\tlisten(button, 'click', () => controller.abort(reason), { signal: controller.signal, once: true });\n\tlisten(controller.signal, 'abort', () => button.disabled = true, { once: true });\n\n\treturn controller;\n}\n\n/**\n * @deprecated\n */\nexport function abortTimeoutController(timeout, { reason } = {}) {\n\tconsole.warn('`abortTimeoutController()` is deprecated. Use `AbortSignal.timeout()` instead.');\n\tconst controller = new AbortController();\n\n\tabortableTimeout(() => controller.abort(reason), timeout, { signal: controller.signal });\n\n\treturn controller;\n}\n\n/**\n * @deprecated\n */\nexport function abortTimeoutSignal(timeout, { reason } = {}) {\n\treturn abortTimeoutController(timeout, { reason }).signal;\n}\n\nexport function abortEventController(what, events, { passive, capture, reason } = {}) {\n\tconst controller = new AbortController();\n\n\twhen(what, events, { signal: controller.signal, capture, passive, once: true }).then(() => {\n\t\tif (! controller.signal.aborted) {\n\t\t\tcontroller.abort(reason);\n\t\t}\n\t});\n\n\treturn controller;\n}\n\nexport function abortableTimeout(callback, ms, { signal } = {}) {\n\tconst id = setTimeout(() => callback(), ms);\n\n\tif (signal instanceof AbortSignal) {\n\t\tsignalAborted(signal).finally(() => clearTimeout(id));\n\t}\n\n\treturn id;\n}\n\nexport function abortableInterval(callback, ms, { signal } = {}) {\n\tconst id = setInterval(() => callback(), ms);\n\n\tif (signal instanceof AbortSignal) {\n\t\tsignalAborted(signal).finally(() => clearInterval(id));\n\t}\n\n\treturn id;\n}\n\nexport function abortableAnimationFrame(callback, { signal } = {}) {\n\tconst id = requestAnimationFrame(callback);\n\n\tif (signal instanceof AbortSignal) {\n\t\tsignalAborted(signal).finally(() => cancelAnimationFrame(id));\n\t}\n\n\treturn id;\n}\n\nexport function abortableIdleCallback(callback, { signal, timeout } = {}) {\n\tconst id = requestIdleCallback(callback);\n\n\tif (signal instanceof AbortSignal) {\n\t\tsignalAborted(signal).finally(() => cancelIdleCallback(id, { timeout }));\n\t}\n\n\treturn id;\n}\n\nexport function signalRaceController(...signals) {\n\tconst controller = new AbortController();\n\tconst signal = anyAbortedSignal(...signals);\n\n\tsignal.addEventListener('abort', ({ target }) => {\n\t\tcontroller.abort(target.reason || new DOMException('Operation aborted.'));\n\t}, { signal: controller.signal });\n\n\treturn controller;\n}\n\nexport function signalAllController(...signals) {\n\tconst controller = new AbortController();\n\n\tPromise.all(signals.map(signal => signalAborted(signal))).finally(() => controller.abort());\n\n\treturn controller;\n}\n\nexport function anyAbortedSignal(...signals) {\n\tif (AbortSignal.any instanceof Function) {\n\t\treturn AbortSignal.any(signals);\n\t} else {\n\t\tconst controller = new AbortController();\n\n\t\tfor (const signal of signals) {\n\t\t\tif (! (signal instanceof AbortSignal)) {\n\t\t\t\tconst err = new TypeError('`signal` is not an `AbortSignal`');\n\t\t\t\tcontroller.abort(err);\n\t\t\t\tthrow err;\n\t\t\t} else if (signal.aborted) {\n\t\t\t\tcontroller.abort(signal.reason || new DOMException('Operation aborted.'));\n\t\t\t\tbreak;\n\t\t\t} else {\n\t\t\t\tsignal.addEventListener('abort', ({ target }) => {\n\t\t\t\t\tcontroller.abort(target.reason || new DOMException('Operation aborted.'));\n\t\t\t\t}, { signal: controller.signal });\n\t\t\t}\n\t\t}\n\n\t\treturn controller.signal;\n\t}\n}\n","/**\n * @copyright 2023 Chris Zuber <admin@kernvalley.us>\n */\nexport const TEXT = 'text/plain';\nexport const HTML = 'text/html';\nexport const CSS = 'text/css';\nexport const JS = 'application/javascript';\nexport const JSON = 'application/json';\nexport const XML = 'application/xml';\nexport const JSON_LD = 'application/ld+json';\nexport const JPEG = 'image/jpeg';\nexport const PNG = 'image/png';\nexport const GIF = 'image/gif';\nexport const WEBP = 'image/webp';\nexport const SVG = 'image/svg+xml';\nexport const FORM_URL_ENCODED = 'application/x-www-form-urlencoded';\nexport const FORM_MULTIPART = 'multipart/form-data';\n","/**\n * @copyright 2023 Chris Zuber <admin@kernvalley.us>\n */\nimport { clamp, between } from './math.js';\nimport { isObject, isNullish } from './utility.js';\nimport { toHexColor, parseHexColor } from './color-utils.js';\nimport { setAttr, isScriptURL, isTrustedType } from './trust.js';\nimport { COLOR } from './patterns.js';\n\nexport function getAttrs(el) {\n\tif (typeof el === 'string') {\n\t\treturn getAttrs(document.querySelector(el));\n\t} else if (el instanceof Element) {\n\t\treturn Object.fromEntries([...el.attributes].map(({ name, value }) => [name, value]));\n\t} else {\n\t\tthrow new TypeError(`Expected an element or selector but got a ${typeof el}`);\n\t}\n}\n\nexport function aria(el, props = {}) {\n\tif (! (el instanceof Element)) {\n\t\tthrow new TypeError('`el` must be an Element');\n\t} else {\n\t\tObject.entries(props).forEach(([prop, val]) => {\n\t\t\tif (prop !== 'role') {\n\t\t\t\tprop = `aria-${prop.toLowerCase()}`;\n\t\t\t}\n\n\t\t\tif (isNullish(val)) {\n\t\t\t\tel.removeAttribute(prop);\n\t\t\t} else {\n\t\t\t\tel.setAttribute(prop, val);\n\t\t\t}\n\t\t});\n\t}\n}\n\nexport function data(el, props = {}) {\n\tif (! (el instanceof Element)) {\n\t\tthrow new TypeError('el must be an Element');\n\t} if (! isObject(props)) {\n\t\tthrow new TypeError('props must be an object');\n\t} else {\n\t\tObject.entries(props).forEach(([p, v]) => {\n\t\t\tswitch (typeof v) {\n\t\t\t\tcase 'string':\n\t\t\t\tcase 'number':\n\t\t\t\t\tel.dataset[p] = v.toString();\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'boolean':\n\t\t\t\t\tif (v) {\n\t\t\t\t\t\tel.dataset[p] = '';\n\t\t\t\t\t} else {\n\t\t\t\t\t\tdelete el.dataset[p];\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'undefined':\n\t\t\t\t\tdelete el.dataset[p];\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'object':\n\t\t\t\t\tif (Object.is(v, null)) {\n\t\t\t\t\t\tdelete el.dataset[p];\n\t\t\t\t\t} else if (v instanceof Date) {\n\t\t\t\t\t\tel.dataset[p] = v.toISOString();\n\t\t\t\t\t} else if (v instanceof URL) {\n\t\t\t\t\t\tel.dataset[p] = v.href;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tel.dataset[p] = JSON.stringify(v);\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tthrow new TypeError(`Unable to handle type: ${typeof v}`);\n\t\t\t}\n\t\t});\n\t}\n}\n\nexport function css(el, props = {}, { priority } = {}) {\n\tif (! (el instanceof Element)) {\n\t\tthrow new TypeError('el must be an Element');\n\t} if (! isObject(props)) {\n\t\tthrow new TypeError('props must be an object');\n\t} else {\n\t\tObject.entries(props).forEach(([p, v]) => {\n\t\t\tif (typeof v === 'string' || typeof v === 'number') {\n\t\t\t\tel.style.setProperty(p, v, priority);\n\t\t\t} else if (v instanceof URL) {\n\t\t\t\tel.type.setProperty(p, v.href, priority);\n\t\t\t} else if (typeof v === 'object' && ! Object.is(v, null) && v.toString instanceof Function) {\n\t\t\t\tel.style.setProperty(p, v.toString(), priority);\n\t\t\t} else {\n\t\t\t\tel.style.removeProperty(p);\n\t\t\t}\n\t\t});\n\t}\n}\n\nexport function attr(el, props = {}, {\n\tnamespace: elementNs = null,\n\tpolicy,\n} = {}) {\n\tif (! (el instanceof Element)) {\n\t\tthrow new TypeError('el must be an Element');\n\t} if (! isObject(props)) {\n\t\tthrow new TypeError('props must be an object');\n\t} else {\n\t\tObject.entries(props).forEach(([p, v]) => {\n\t\t\tif (typeof v === 'string' || typeof v === 'number') {\n\t\t\t\tsetAttr(el, p, v, { policy, elementNs });\n\t\t\t} else if ('trustedTypes' in globalThis && isTrustedType(v)) {\n\t\t\t\tif (v.toString().length === 0) {\n\t\t\t\t\tel.removeAttribute(p);\n\t\t\t\t} else {\n\t\t\t\t\tsetAttr(el, p, v, { policy, elementNs });\n\t\t\t\t}\n\t\t\t} else if (typeof v === 'boolean') {\n\t\t\t\tif (typeof namespace === 'string') {\n\t\t\t\t\tv ? el.setAttributeNS(elementNs, p, '') : el.removeAttributeNS(elementNs, p);\n\t\t\t\t} else {\n\t\t\t\t\tel.toggleAttribute(p, v);\n\t\t\t\t}\n\t\t\t} else if (v instanceof Date) {\n\t\t\t\tsetAttr(el, p, v.toISOString(), { policy, elementNs });\n\t\t\t} else if (v instanceof URL) {\n\t\t\t\tsetAttr(el, p, v.href, { policy, elementNs });\n\t\t\t} else if (typeof v === 'undefined' || v === null) {\n\t\t\t\tif (typeof namespace === 'string') {\n\t\t\t\t\tel.removeAttributeNS(elementNs, p);\n\t\t\t\t} else {\n\t\t\t\t\tel.removeAttribute(p);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tsetAttr(el, p, JSON.stringify(v), { policy, elementNs });\n\t\t\t}\n\t\t});\n\t}\n}\n\nexport function getBool(el, attr) {\n\treturn el.hasAttribute(attr);\n}\n\nexport function setBool(el, attr, val) {\n\tel.toggleAttribute(attr, val);\n}\n\nexport function getInt(el, attr, {\n\tfallback = NaN,\n\tmin = Number.MIN_SAFE_INTEGER,\n\tmax = Number.MAX_SAFE_INTEGER,\n} = {}) {\n\tif (el.hasAttribute(attr)) {\n\t\tconst val = clamp(min, parseInt(el.getAttribute(attr)), max);\n\t\treturn Number.isNaN(val) ? fallback : val;\n\t} else {\n\t\treturn fallback;\n\t}\n}\n\nexport function setInt(el, attr, val, {\n\tmin = Number.MIN_SAFE_INTEGER,\n\tmax = Number.MAX_SAFE_INTEGER,\n\tpolicy,\n} = {}) {\n\tif (val instanceof Date) {\n\t\tsetAttr(el, attr, val.getTime(), { min, max, policy});\n\t} else if (Number.isInteger(val)) {\n\t\tsetAttr(el, attr, clamp(min, val, max), { policy });\n\t} else if (typeof val === 'string') {\n\t\tsetInt(el, attr, parseInt(val), { min, max });\n\t} else {\n\t\tel.removeAttribute(attr);\n\t}\n}\n\nexport function getFloat(el, attr, {\n\tfallback = NaN,\n\tmin = Number.MIN_SAFE_INTEGER,\n\tmax = Number.MAX_SAFE_INTEGER,\n} = {}) {\n\tif (el.hasAttribute(attr)) {\n\t\tconst val = clamp(min, parseFloat(el.getAttribute(attr)), max);\n\t\treturn Number.isNaN(val) ? fallback : val;\n\t} else {\n\t\treturn fallback;\n\t}\n}\n\nexport function setFloat(el, attr, val, {\n\tmin = Number.MIN_SAFE_INTEGER,\n\tmax = Number.MAX_SAFE_INTEGER,\n\tpolicy,\n} = {}) {\n\tif (typeof val === 'number' && ! Number.isNaN(val)) {\n\t\tsetAttr(el, attr, clamp(min, val, max), { policy });\n\t} else if (typeof val === 'string') {\n\t\tsetFloat(el, attr, parseFloat(val), { min, max });\n\t} else {\n\t\tel.removeAttribute(attr);\n\t}\n}\n\nexport function getString(el, attr, { fallback = null } = {}) {\n\tif (el.hasAttribute(attr)) {\n\t\treturn el.getAttribute(attr) || fallback;\n\t} else {\n\t\treturn fallback;\n\t}\n}\n\nexport function setString(el, attr, val, {\n\tminLength = 1,\n\tmaxLength = Infinity,\n\tpattern   = null,\n\tfallback,\n\tpolicy,\n} = {}) {\n\tif (\n\t\ttypeof val === 'string'\n\t\t&& between(minLength, val.length, maxLength)\n\t\t&& (! (pattern instanceof RegExp) || pattern.test(val))\n\t) {\n\t\tsetAttr(el, attr, val, { policy });\n\t} else if(isTrustedType(val)) {\n\t\tconst str = val.toString();\n\n\t\tif (\n\t\t\tbetween(minLength, str.length, maxLength)\n\t\t\t&& (! (pattern instanceof RegExp) || pattern.test(str))\n\t\t) {\n\t\t\tsetAttr(el, attr, val, { policy });\n\t\t} else {\n\t\t\tel.removeAttribute(attr);\n\t\t}\n\t} else if (typeof fallback === 'string' || isTrustedType(fallback)) {\n\t\tsetString(el, attr, fallback, { pattern, policy, minLength, maxLength });\n\t} else {\n\t\tel.removeAttribute(attr);\n\t}\n}\n\nexport function getURL(el, attr, { base = document.baseURI } = {}) {\n\tif (el.hasAttribute(attr)) {\n\t\treturn new URL(el.getAttribute(attr), base);\n\t} else {\n\t\treturn null;\n\t}\n}\n\nexport function setURL(el, attr, val, {\n\tbase = document.baseURI,\n\trequirePath = false,\n\tpolicy,\n} = {}) {\n\tif ((val instanceof URL) && (! requirePath || val.pathname.length > 1)) {\n\t\tsetAttr(el, attr, val.href, { policy });\n\t} else if (typeof val === 'string' && val.length !== 0) {\n\t\tsetURL(el, attr, new URL(val, base), { requirePath });\n\t} else if (isScriptURL(val)) {\n\t\tconst url = new URL(val.toString(), document.baseURI);\n\n\t\tif (! requirePath || url.pathname.length > 1) {\n\t\t\tsetAttr(el, attr, val, { policy });\n\t\t} else {\n\t\t\tel.removeAttribute(attr);\n\t\t}\n\t} else {\n\t\tel.removeAttribute(attr);\n\t}\n}\n\nexport function getEnum(el, attr, {\n\tallowed  = [],\n\tfallback = undefined,\n}) {\n\tif (! Array.isArray(allowed) || allowed.length === 0) {\n\t\tthrow new TypeError('`allowed` must be a non-empty array.');\n\t} else if (el.hasAttribute(attr)) {\n\t\tconst val = el.getAttribute(attr);\n\t\treturn allowed.includes(val) ? val : fallback;\n\t} else {\n\t\treturn fallback;\n\t}\n}\n\nexport function setEnum(el, attr, val, {\n\tallowed = [],\n\tfallback = undefined,\n}) {\n\tif (! Array.isArray(allowed) || allowed.length === 0) {\n\t\tthrow new TypeError('`allowed` must be a non-empty array.');\n\t} else if (allowed.includes(val)) {\n\t\tsetAttr(el, attr, val);\n\t} else if (! isNullish(fallback)) {\n\t\tsetAttr(el, attr, fallback);\n\t} else {\n\t\tel.removeAttribute(attr);\n\t}\n}\n\nexport function getColor(el, attr, { fallback } = {}) {\n\tconst val = getString(el, attr);\n\treturn typeof val === 'string' && COLOR.test(val) ? val : fallback;\n}\n\nexport function setColor(el, attr, val, { fallback } = {}) {\n\tsetString(el, attr, val, { fallback, minLength: 3, maxLength: 9, pattern: COLOR });\n}\n\nexport function getRGB(el, attr, { fallback = '#000000' } = {}) {\n\tconst { red = 0, green = 0, blue = 0 } = parseHexColor(getColor(el, attr, { fallback }));\n\treturn { red, green, blue };\n}\n\nexport function setRGB(el, attr, { red = 0, green = 0, blue = 0 } = {}) {\n\tsetColor(el, attr, toHexColor({ red, green, blue }));\n}\n\nexport function getRGBA(el, attr, { fallback = '#000000' } = {}) {\n\tconst { red = 0, green = 0, blue = 0, alpha = 1 } = parseHexColor(getColor(el, attr, { fallback }));\n\treturn { red, green, blue, alpha };\n}\n\nexport function setRGBA(el, attr, { red = 0, green = 0, blue = 0, alpha = 1 } = {}) {\n\tsetColor(el, attr, toHexColor({ red, green, blue, alpha }));\n}\n\nexport { setAttr };\n","/**\n * @copyright 2021-2023 Chris Zuber <admin@kernvalley.us>\n */\nimport { signalAborted } from './abort.js';\nimport { addListener, listen } from './events.js';\nimport { getDeferred, isAsync } from './promises.js';\nimport { isHTML, isTrustPolicy } from './trust.js';\nimport { HTML } from './types.js';\nimport { errorToEvent, callOnce, isNullish, isIterable } from './utility.js';\nimport { data as setData, css as setCss, attr as setAttr, aria as setAria } from './attrs.js';\n\nexport const readyStates = ['loading', 'interactive', 'complete'];\n\nexport const readyStateIndex = (state = document.readyState) => readyStates.indexOf(state);\n\nexport const reachedState = state => ! readyStateIndex(document.readyState) > readyStateIndex(state);\n\nexport function query(what, base = document) {\n\tif (Array.isArray(what)) {\n\t\treturn what;\n\t} else if (what instanceof EventTarget) {\n\t\treturn [what];\n\t} else if (typeof what === 'string') {\n\t\tconst matches = Array.from(base.querySelectorAll(what));\n\n\t\tif (base.matches instanceof Function && base.matches(what)) {\n\t\t\tmatches.push(base);\n\t\t}\n\t\treturn matches;\n\t} else if (isIterable(what)) {\n\t\treturn Array.from(what);\n\t} else {\n\t\tthrow new TypeError('Invalid \"what\" given to query()');\n\t}\n}\n\nexport function nth(what, n, { base } = {}) {\n\treturn query(what, base).at(n);\n}\n\nexport function first(what, base) {\n\treturn nth(what, 0, { base });\n}\n\nexport function last(what, base) {\n\treturn nth(what, -1, { base });\n}\n\nexport function each(what, callback, { base } = {}) {\n\tconst items = query(what, base);\n\titems.forEach(callback);\n\treturn items;\n}\n\nexport function map(what, callback, { base } = {}) {\n\treturn query(what, base).map(callback);\n}\n\nexport function some(what, callback, { base } = {}) {\n\treturn query(what, base).some(callback);\n}\n\nexport function every(what, callback, { base } = {}) {\n\treturn query(what, base).every(callback);\n}\n\nexport function find(what, callback, { base } = {}) {\n\treturn query(what, base).find(callback);\n}\n\nexport function filter(what, callback, { base } = {}) {\n\treturn query(what, base).filter(callback);\n}\n\nexport function groupToMap(what, callback, { base } = {}) {\n\treturn query(what, base).groupToMap(callback);\n}\n\nexport function group(what, callback, { base } = {}) {\n\treturn query(what, base).group(callback);\n}\n\nexport function append(parent, ...nodes) {\n\tparent.append(...nodes);\n}\n\nexport function remove(what, { base } = {}) {\n\treturn each(what, item => item.remove(), { base });\n}\n\nexport function meta({ name, itemprop, property, charset, content }) {\n\tconst meta = document.createElement('meta');\n\n\tif (typeof name === 'string') {\n\t\tmeta.name = name;\n\t\tmeta.content = content;\n\t} else if (typeof itemprop === 'string') {\n\t\tmeta.setAttribute('itemprop', itemprop);\n\t\tmeta.content = content;\n\t} else if (typeof property === 'string') {\n\t\tmeta.setAttribute('property', property);\n\t\tmeta.content = content;\n\t} else if (typeof charset === 'string') {\n\t\tmeta.setAttribute('charset', charset);\n\t} else {\n\t\tthrow new Error('Meta must have either name, itemprop, property, or charset given');\n\t}\n\n\treturn meta;\n}\n\nexport function css(what, props = {}, { base, priority } = {}) {\n\treturn each(what, item => setCss(item, props, { priority }), { base });\n}\n\nexport function aria(what, props ={}, { base } = {}) {\n\teach(what, item => setAria(item, props), { base });\n}\n\nexport function data(what, props = {}, { base } = {}) {\n\treturn each(what, item => setData(item, props), { base });\n}\n\nexport function attr(what, props = {}, { base, namespace = null, policy } = {}) {\n\treturn each(what, item => setAttr(item, props, { namespace, policy }), { base });\n}\n\nexport function toggleAttr(what, attrs, { base, force, signal } = {}) {\n\tif (! Array.isArray(attrs)) {\n\t\tattrs = [attrs];\n\t}\n\tconst items = query(what, base);\n\n\tif (! (signal instanceof AbortSignal)) {\n\t\titems.forEach(item => attrs.forEach(attr => item.toggleAttribute(attr, force)));\n\t} else if (signal.aborted) {\n\t\titems.forEach(item => attrs.forEach(attr => item.removeAttribute(attr)));\n\t} else {\n\t\tif (typeof force !== 'boolean') {\n\t\t\tforce = true;\n\t\t}\n\n\t\titems.forEach(item => attrs.forEach(attr => item.toggleAttribute(attr, force)));\n\n\t\tsignal.addEventListener('abort', () => {\n\t\t\titems.forEach(item => attrs.forEach(attr => item.toggleAttribute(attr, !force)));\n\t\t}, { once: true });\n\t}\n\treturn items;\n}\n\nexport function disable(what, { base, value = true } = {}) {\n\treturn each(what, el => el.disabled = value, { base });\n}\n\nexport function enable(what, { base, value = false } = {}) {\n\treturn disable(what, { base, value });\n}\n\nexport function hide(what, { base, value = true } = {}) {\n\treturn each(what, el => el.hidden = value, { base });\n}\n\nexport function unhide(what, { base, value = false } = {}) {\n\treturn hide(what, { base, value });\n}\n\nexport function value(what, value, { base } = {}) {\n\tif (value == null) {\n\t\treturn each(what, el => el.removeAttribute('value'), { base });\n\t} else {\n\t\treturn each(what, el => el.value = value, { base });\n\t}\n}\n\nexport function addClass(what, ...args) {\n\treturn each(what, el => el.classList.add(...args));\n}\n\nexport function removeClass(what, ...args) {\n\treturn each(what, el => el.classList.remove(...args));\n}\n\nexport function toggleClass(what, classes = {}, { base, force } = {}) {\n\treturn each(what, item => {\n\t\tif (typeof classes === 'string') {\n\t\t\treturn item.classList.toggle(classes, force);\n\t\t} else if (Array.isArray(classes)) {\n\t\t\tclasses.forEach(cn => item.classList.toggle(cn, force));\n\t\t} else {\n\t\t\tObject.entries(classes).forEach(([cl, cond]) => {\n\t\t\t\tif (cond instanceof Function) {\n\t\t\t\t\titem.classList.toggle(cl, cond.apply(what, [cl]));\n\t\t\t\t} else if (cond instanceof AbortSignal) {\n\t\t\t\t\tif (cond.aborted) {\n\t\t\t\t\t\titem.classList.remove(cl);\n\t\t\t\t\t} else {\n\t\t\t\t\t\titem.classList.add(cl, true);\n\t\t\t\t\t\tcond.addEventListener('abort', () => {\n\t\t\t\t\t\t\titem.classList.remove(cl);\n\t\t\t\t\t\t}, { once: true });\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\titem.classList.toggle(cl, cond);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}, { base });\n}\n\nexport function replaceClass(what, classes = {}, { base } = {}) {\n\tconst entries = Object.entries(classes);\n\n\treturn each(what, item => {\n\t\tentries.forEach(([from, to]) => item.classList.replace(from, to));\n\t}, { base });\n}\n\nexport function text(what, text, { base } = {}) {\n\treturn each(what, el => el.textContent = text, { base });\n}\n\nexport function html(what, text, {\n\tbase,\n\tsanitizer,\n\tpolicy = 'trustedTypes' in globalThis ? globalThis.trustedTypes.defaultPolicy : undefined,\n} = {}) {\n\tif (typeof sanitizer !== 'undefined' && Element.prototype.setHTML instanceof Function) {\n\t\treturn each(what, el => el.setHTML(text, { sanitizer }), { base });\n\t} else if (isHTML(text)) {\n\t\treturn each(what, el => el.innerHTML = text, { base });\n\t} else if (! isNullish(policy) && policy.createHTML instanceof Function) {\n\t\ttext = policy.createHTML(text);\n\t\treturn each(what, el => el.innerHTML = text, { base });\n\t} else {\n\t\treturn each(what, el => el.innerHTML = text, { base });\n\t}\n}\n\nexport function on(what, when, ...args) {\n\t// @TODO: Figure out a way of adding `base` to arguments\n\tconst items = query(what);\n\n\tif (typeof when === 'string') {\n\t\taddListener(items, [when], ...args);\n\t} else if (Array.isArray(when)) {\n\t\taddListener(items, when, ...args);\n\t} else {\n\t\tObject.entries(when).forEach(([ev, cb]) => addListener(items, [ev], cb, ...args));\n\t}\n\n\treturn items;\n}\n\nexport function prevent(what, event = ['submit'], { signal, capture } = {}) {\n\treturn on(what, event, ev => ev.preventDefault(), { signal, capture });\n}\n\nexport function off(what, when, ...args) {\n\treturn each(what, item => {\n\t\tif (typeof when === 'string') {\n\t\t\titem.removeEventListener(when, ...args);\n\t\t} else if (Array.isArray(when)) {\n\t\t\twhen.forEach(e =>  item.removeEventListener(e, ...args));\n\t\t} else {\n\t\t\tObject.entries(when).forEach(([ev, cb]) => item.removeEventListener(ev, cb, ...args));\n\t\t}\n\t});\n}\n\nexport async function when(what, events, { capture, passive, signal, base } = {}) {\n\tconst controller = new AbortController();\n\tconst { promise, resolve, reject } = getDeferred();\n\n\tif (signal instanceof AbortSignal) {\n\t\tif (signal.aborted) {\n\t\t\tcontroller.abort(signal.reason);\n\t\t} else {\n\t\t\taddEventListener([signal], ['abort'], () => {\n\t\t\t\tcontroller.abort(signal.reason);\n\t\t\t\treject(signal.reason);\n\t\t\t}, { once: true, signal: controller.signal });\n\t\t}\n\t}\n\n\tif (controller.signal.aborted) {\n\t\treject(controller.signal.reason);\n\t} else {\n\t\ton(query(what, base), events, event => {\n\t\t\tresolve(event);\n\t\t\tcontroller.abort();\n\t\t}, { capture, passive, signal: controller.signal });\n\t}\n\n\treturn promise;\n}\n\nexport const ready = callOnce(async function ready({ signal } = {}) {\n\tconst { promise, resolve, reject } = getDeferred();\n\n\tif (signal instanceof AbortSignal && signal.aborted) {\n\t\treject(signal.reason || new DOMException('Operation aborted.'));\n\t} else if (readyStateIndex() === 0) {\n\t\tlisten(document, 'DOMContentLoaded', resolve, { signal, once: true, capture: true });\n\n\t\tif (signal instanceof AbortSignal) {\n\t\t\tsignal.addEventListener('abort',\n\t\t\t\t({ target }) => reject(target.reason || new DOMException('Operation aborted.')),\n\t\t\t\t{ once: true }\n\t\t\t);\n\t\t}\n\t} else {\n\t\tresolve();\n\t}\n\n\treturn promise;\n});\n\nexport async function whenReadyState(state, { signal } = {}) {\n\tconst { resolve, reject, promise } = getDeferred();\n\tconst stateIndex = readyStateIndex(state);\n\n\tif (signal instanceof AbortSignal && signal.aborted) {\n\t\treject(signal.reason || new DOMException('Operation aborted.'));\n\t} else if (stateIndex < 0) {\n\t\treject(new DOMException(`Invalid state: ${state}`));\n\t} else if (stateIndex > readyStateIndex()) {\n\t\tconst controller = new AbortController();\n\t\tlet settled = false;\n\n\t\tcontroller.signal.addEventListener('abort', ({ target }) => {\n\t\t\tif (! settled) {\n\t\t\t\treject(target.reason || new DOMException('Operation aborted.'));\n\t\t\t\tsettled = true;\n\t\t\t}\n\t\t}, { once: true });\n\n\t\tif (signal instanceof AbortSignal) {\n\t\t\tsignal.addEventListener('abort', ({ target }) => {\n\t\t\t\tcontroller.abort(target.reason);\n\t\t\t}, { once: true, signal: controller.signal });\n\t\t}\n\n\t\tdocument.addEventListener('readystatechange', () => {\n\t\t\tif (document.readyState === state) {\n\t\t\t\tresolve();\n\t\t\t\tsettled = true;\n\t\t\t\tcontroller.abort();\n\t\t\t}\n\t\t}, { signal: controller.signal });\n\t} else {\n\t\tresolve();\n\t}\n\n\treturn promise;\n}\n\nexport const interactive =  callOnce(async function interactive({ signal } = {}) {\n\tawait whenReadyState('interactive', { signal });\n});\n\nexport const complete = callOnce(async function complete({ signal } = {}) {\n\tawait whenReadyState('complete', { signal });\n});\n\nexport const loaded =  callOnce(async function loaded({ signal } = {}) {\n\tconst { promise, resolve, reject } = getDeferred();\n\n\tif (signal instanceof AbortSignal && signal.aborted) {\n\t\treject(signal.reason || new DOMException('Operation aborted.'));\n\t} else if (readyStateIndex() < 2) {\n\t\tlisten(globalThis, 'load', resolve, { signal, once: true, capture: true });\n\n\t\tif (signal instanceof AbortSignal) {\n\t\t\tsignal.addEventListener('abort',\n\t\t\t\t({ target }) => reject(target.reason || new DOMException('Operation aborted.')),\n\t\t\t\t{ once: true }\n\t\t\t);\n\t\t}\n\t} else {\n\t\tresolve();\n\t}\n\n\treturn promise;\n});\n\nexport const unloaded = callOnce(async function unloaded({ signal } = {}) {\n\tconst { promise, resolve } = getDeferred();\n\tlisten(globalThis, 'unload', resolve, { signal, once: true, capture: true });\n\treturn promise;\n});\n\nexport const beforeUnload = callOnce(async function beforeUnload({ signal } = {}) {\n\tconst { promise, resolve } = getDeferred({ signal });\n\tlisten(globalThis, 'beforeunload', resolve, { signal, once: true, capture: true });\n\treturn promise;\n});\n\nexport const beforeInstallPrompt = callOnce(async function({ signal } = {}) {\n\tconst { promise, resolve, reject } = getDeferred();\n\n\tif (signal instanceof AbortSignal && signal.aborted) {\n\t\treject(signal.reason);\n\t} else if ('onbeforeinstallprompt' in globalThis) {\n\t\tlisten(globalThis, 'beforeinstallprompt', resolve, { once: true, capture: true, signal });\n\n\t\tif (signal instanceof AbortSignal) {\n\t\t\tlisten(signal, 'abort', ({ reason }) => reject(reason), { once: true });\n\t\t}\n\t}\n\n\treturn await promise;\n});\n\nexport async function whenPageVisible({ signal } = {}) {\n\tconst { promise, resolve } = getDeferred({ signal });\n\n\tif (document.visibilityState === 'visible') {\n\t\tresolve();\n\t} else {\n\t\tlisten(document, 'visibilitychange', () => resolve(), { once: true, signal });\n\t}\n\n\treturn promise;\n}\n\nexport async function whenPageHidden({ signal } = {}) {\n\tconst { promise, resolve } = getDeferred({ signal });\n\n\tif (document.visibilityState === 'hidden') {\n\t\tresolve();\n\t} else {\n\t\tlisten(document, 'visibilitychange', () => resolve(), { once: true, signal });\n\t}\n\n\treturn promise;\n}\n\nexport function parse(text, {\n\ttype = HTML,\n\tasFrag = true,\n\tsanitizer,\n\tpolicy = 'trustedTypes' in globalThis ? globalThis.trustedTypes.defaultPolicy : undefined,\n} = {}) {\n\tconst parser = new DOMParser();\n\n\tif (asFrag) {\n\t\treturn parseAsFragment(text, { sanitizer, policy });\n\t} else if (isTrustPolicy(policy) && ! isHTML(text)) {\n\t\treturn parser.parseFromString(policy.createHTML(text), type);\n\t} else {\n\t\treturn parser.parseFromString(text, type);\n\t}\n}\n\nexport function documentToFragment(doc, { sanitizer } = {}) {\n\tconst clone = doc.cloneNode(true);\n\tconst frag = document.createDocumentFragment();\n\tfrag.append(...clone.head.childNodes, ...clone.body.childNodes);\n\n\treturn typeof sanitizer !== 'undefined' && sanitizer.sanitize instanceof Function\n\t\t? sanitizer.sanitize(frag) : frag;\n}\n\nexport function parseAsFragment(text, {\n\tsanitizer,\n\tpolicy = 'trustedTypes' in globalThis ? globalThis.trustedTypes.defaultPolicy : undefined,\n} = {}) {\n\tconst tmp = document.createElement('template');\n\n\tif (isTrustPolicy(policy) && ! isHTML(text)) {\n\t\ttmp.innerHTML = policy.createHTML(text);\n\t} else {\n\t\ttmp.innerHTML = text;\n\t}\n\n\treturn typeof sanitizer !== 'undefined' && sanitizer.sanitize instanceof Function\n\t\t? sanitizer.sanitize(tmp.content)\n\t\t: tmp.content;\n}\n\nexport function animate(what, keyframes, opts = { duration: 400, base: document.body }) {\n\tif (opts.signal instanceof AbortSignal && opts.signal.aborted) {\n\t\tthrow opts.signal.reason;\n\t} else if (! (Element.prototype.animate instanceof Function)) {\n\t\tthrow new DOMException('Animations not supported');\n\t} else {\n\t\tif (Number.isInteger(opts)) {\n\t\t\topts = { duration: opts };\n\t\t}\n\n\t\tconst animations = query(what, opts.base).map(item => item.animate(keyframes, opts));\n\n\t\tif (opts.signal instanceof AbortSignal) {\n\t\t\topts.signal.addEventListener('abort', () => animations.forEach(anim => anim.cancel()), { once: true });\n\t\t}\n\n\t\tif (opts.resolve instanceof Function) {\n\t\t\tPromise.allSettled(animations.map(anim => anim.finished))\n\t\t\t\t.then(proms => opts.resolve(proms.group(({ status }) => status)));\n\t\t}\n\n\t\treturn animations;\n\t}\n}\n\nexport function intersect(what, callback, { root, rootMargin, signal, threshold } = {}) {\n\tif (signal instanceof AbortSignal && signal.aborted) {\n\t\tthrow signal.reason;\n\t} else if (! ('IntersectionObserver' in globalThis)) {\n\t\tthrow new DOMException('IntersectionObserver not supported');\n\t} else {\n\t\tconst observer = new IntersectionObserver((entries, observer) => {\n\t\t\tentries.forEach((entry, index) => callback.apply(null, [entry, observer, index]));\n\t\t}, { root, rootMargin, threshold });\n\n\t\teach(what, item => observer.observe(item));\n\n\t\tif (signal instanceof AbortSignal) {\n\t\t\tsignalAborted(signal).finally(() => observer.disconnect());\n\t\t}\n\n\t\treturn observer;\n\t}\n}\n\nexport function mutate(what, callback, options = {}) {\n\tif ('MutationObserver' in globalThis) {\n\t\tconst observer = new MutationObserver((records, observer) => {\n\t\t\trecords.forEach((record, index) => callback.apply(null, [record, observer, index]));\n\t\t});\n\n\t\teach(what, item => observer.observe(item, options));\n\n\t\tif (options.signal instanceof AbortSignal) {\n\t\t\tsignalAborted(options.signal).finally(() => observer.disconnect());\n\t\t}\n\n\t\treturn observer;\n\t} else {\n\t\tthrow new Error('MutationObserver not supported');\n\t}\n}\n\nexport function stripComments(node) {\n\tif (! (node instanceof Node)) {\n\t\tthrow new TypeError('Cannot strip comments from non-node');\n\t} else {\n\t\tswitch(node.nodeType) {\n\t\t\tcase Node.ELEMENT_NODE:\n\t\t\tcase Node.DOCUMENT_NODE:\n\t\t\tcase Node.DOCUMENT_FRAGMENT_NODE:\n\t\t\t\tif (node.hasChildNodes()) {\n\t\t\t\t\t[...node.childNodes].forEach(stripComments);\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tcase Node.COMMENT_NODE:\n\t\t\t\tnode.remove();\n\t\t\t\tbreak;\n\t\t}\n\t}\n}\n\nexport function supportsElement(...tags) {\n\treturn ! tags.some(tag => document.createElement(tag) instanceof HTMLUnknownElement);\n}\n\nexport function createTable(data, { caption, header, footer } = {}) {\n\tconst table = document.createElement('table');\n\tif (Array.isArray(data)) {\n\t\tdata.forEach(row => {\n\t\t\tif (Array.isArray(row)) {\n\t\t\t\tconst tr = table.insertRow();\n\t\t\t\trow.forEach(cell => tr.insertCell().textContent = cell);\n\t\t\t}\n\t\t});\n\t}\n\n\tif (Array.isArray(header)) {\n\t\tconst tHead = table.createTHead();\n\t\tconst row = tHead.insertRow();\n\t\trow.append(...header.map(cell => {\n\t\t\tconst th = document.createElement('th');\n\t\t\tth.scope = 'col';\n\t\t\tth.textContent = cell;\n\t\t\treturn th;\n\t\t}));\n\t}\n\n\tif (Array.isArray(footer)) {\n\t\tconst tFoot = table.createTFoot();\n\t\tconst row = tFoot.insertRow();\n\t\trow.append(...footer.map(cell => {\n\t\t\tconst th = document.createElement('th');\n\t\t\tth.textContent = cell;\n\t\t\treturn th;\n\t\t}));\n\t}\n\n\tif (typeof caption === 'string') {\n\t\ttable.createCaption().textContent = caption;\n\t}\n\n\treturn table;\n}\n\nexport { addListener, isAsync, errorToEvent };\n","/**\n * @copyright 2023 Chris Zuber <admin@kernvalley.us>\n */\nimport { data, attr, ready, query } from './dom.js';\n\nconst COOKIE_NAME   = 'theme';\nconst THEMES        = ['light', 'dark', 'auto'];\nconst DEFAULT_THEME = 'auto';\nconst EVENT         = 'themechange';\n\nif ('cookieStore' in globalThis && globalThis.cookieStore.get instanceof Function) {\n\tPromise.all([\n\t\tcookieStore.get({ name: COOKIE_NAME }),\n\t\tready(),\n\t]).then(([cookie]) => {\n\t\tconst $data = query(':root, [data-theme=\"auto\"]');\n\t\tconst $attr = query('[theme=\"auto\"]');\n\n\t\tconst setTheme = ({ name, value: theme = DEFAULT_THEME } = {}) => {\n\t\t\tif (name === COOKIE_NAME && THEMES.includes(theme)) {\n\t\t\t\tdocument.dispatchEvent(new CustomEvent(EVENT, { detail: { theme }}));\n\t\t\t\trequestAnimationFrame(() => {\n\t\t\t\t\tdata($data, { theme });\n\t\t\t\t\tattr($attr, { theme });\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\n\t\tif (cookie && typeof cookie.value === 'string') {\n\t\t\tsetTheme(cookie);\n\t\t}\n\n\t\tglobalThis.cookieStore.addEventListener('change', ({ changed, deleted }) => {\n\t\t\tconst cookie = [...changed, ...deleted].find(({ name }) => name === COOKIE_NAME);\n\n\t\t\tif (cookie) {\n\t\t\t\tsetTheme(cookie);\n\t\t\t}\n\t\t});\n\t});\n}\n","/**\n * @copyright 2023 Chris Zuber <admin@kernvalley.us>\n */\nimport { createPolicy } from './trust.js';\nimport { callOnce } from './utility.js';\nconst {\n\tallowElements, allowAttributes, allowComments, blockElements, dropAttributes,\n\tdropElements,\n} = Sanitizer.getDefaultConfiguration();\n\nexport const trustedOrigins = [\n\tlocation.origin,\n\t'https://cdn.kernvalley.us',\n\t'https://unpkg.com',\n];\n\nexport const googleOrigins = [\n\t'https://www.googletagmanager.com',\n\t'https://www.google-analytics.com',\n];\n\nexport const youtubeEmbedOrigins = [\n\t'https://www.youtube.com',\n\t'https://www.youtube-nocookie.com',\n];\n\nexport const youtubeEmbeds = [\n\t'https://www.youtube.com/embed/',\n\t'https://www.youtube-nocookie.com/embed/',\n];\n\nexport function isTrustedScriptOrigin(input) {\n\tconst { origin } = new URL(input, document.baseURI);\n\treturn trustedOrigins.includes(origin);\n}\n\nexport function isGoogleOrigin(input) {\n\tconst { origin } = new URL(input, document.baseURI);\n\treturn googleOrigins.includes(origin);\n}\n\nexport function isYouTubeEmbed(input) {\n\tconst { origin, pathname } = new URL(input, document.baseURI);\n\treturn youtubeEmbedOrigins.includes(origin) && pathname.startsWith('/embed/');\n}\n\nexport function isDisqusEmbedScript(input) {\n\treturn /^https:\\/\\/[\\w-]+\\.disqus\\.com\\/embed\\.js$/.test(input);\n}\n\nexport function isDisqusEmbed(input) {\n\treturn input.startsWith('https://disqus.com/embed/comments/');\n}\n\nfunction createSanitizerCallback(sanitizer = new Sanitizer(Sanitizer.getDefaultConfiguration())) {\n\tif (Sanitizer.prototype.sanitizeFor instanceof Function) {\n\t\treturn input => sanitizer.sanitizeFor('div', input).innerHTML;\n\t} else if (Element.prototype.setHTML instanceof Function) {\n\t\treturn input => {\n\t\t\tconst el = document.createElement('div');\n\t\t\tel.setHTML(input, { sanitizer });\n\t\t\treturn el.innerHTML;\n\t\t};\n\t} else {\n\t\treturn input => input;\n\t}\n}\n\nexport const createEmptyHTML = () => trustedTypes.emptyHTML;\nexport const createEmptyScript = () => trustedTypes.emptyScript;\n\n/**\n * @TODO: Add support for SVG\n */\nexport const sanitizerConfig = {\n\tallowComments,\n\tallowCustomElements: true,\n\tallowElements: [\n\t\t...allowElements, 'krv-ad', 'krv-events', 'leaflet-map', 'leaflet-marker',\n\t\t'youtube-player', 'spotify-player', 'weather-current', 'weather-forecast',\n\t\t'github-user', 'github-repo', 'github-gist', 'wfd-events', 'codepen-embed',\n\t\t'bacon-ipsum', 'facebook-post',\n\t],\n\tallowAttributes: {\n\t\t...allowAttributes,\n\t\t'theme': [\n\t\t\t'krv-ad', 'weather-current', 'weather-forecast', 'wfd-events',\n\t\t\t'codepen-embed',\n\t\t],\n\t\t'loading': [\n\t\t\t...allowAttributes.loading, 'krv-ad', 'weather-current',\n\t\t\t'weather-forecast', 'youtube-player', 'spotify-player',\n\t\t\t'github-user', 'github-repo', 'wfd-events', 'codepen-embed',\n\t\t],\n\t\t'crossorigin': [...allowAttributes.crossorigin, 'leaflet-map'],\n\t\t'source': ['krv-ad', 'krv-events', 'wfd-events'],\n\t\t'medium': ['krv-ad', 'krv-events', 'wfd-events'],\n\t\t'content': ['krv-ad', 'krv-events', 'wfd-events'],\n\t\t'campaign': ['krv-ad', 'krv-events', 'wfd-events'],\n\t\t'term': ['krv-ad', 'krv-events', 'wfd-events'],\n\t\t'count': ['krv-events'],\n\t\t'layout': ['krv-ad'],\n\t\t'center': ['leaflet-map'],\n\t\t'zoom': ['leaflet-map'],\n\t\t'tilesrc': ['leflet-map'],\n\t\t'allowlocate': ['leaflet-map'],\n\t\t'allowfullscreen': ['leaflet-map'],\n\t\t'zoomcontrol': ['leaflet-map'],\n\t\t'minzoom': ['leaflet-map', 'leaflet-marker'],\n\t\t'maxzoom': ['leaflet-map', 'leaflet-marker'],\n\t\t'longitude': ['leaflet-marker'],\n\t\t'latitude': ['leaflet-marker'],\n\t\t'open': [...allowAttributes.open, 'krv-ad'],\n\t\t'appid': ['weather-current', 'weather-forecast'],\n\t\t'postalcode': ['weather-current', 'weather-forecast'],\n\t\t'height': [\n\t\t\t...allowAttributes.height, 'youtube-player', 'github-gist',\n\t\t\t'codepen-embed', 'facebook-post',\n\t\t],\n\t\t'width': [\n\t\t\t...allowAttributes.width, 'youtube-player', 'github-gist',\n\t\t\t'codepen-embed', 'facebook-post',\n\t\t],\n\t\t'large': ['spotify-player'],\n\t\t'uri': ['spotify-player'],\n\t\t'user': [\n\t\t\t'github-repo', 'github-user', 'github-gist', 'codepen-embed',\n\t\t\t'facebook-post',\n\t\t],\n\t\t'bio': ['github-user'],\n\t\t'gist': ['github-gist'],\n\t\t'file': ['github-gist'],\n\t\t'repo': ['github-repo'],\n\t\t'pen': ['codepen-embed'],\n\t\t'tab': ['codepen-embed'],\n\t\t'editable': ['codepen-embed'],\n\t\t'clicktoload': ['codepen-embed'],\n\t\t'lines': ['bacon-ipsum'],\n\t\t'paras': ['bacon-ipsum'],\n\t\t'start-with-lorem': ['bacon-ipsum'],\n\t\t'filler': ['bacon-ipsum'],\n\t\t'post': ['facebook-post'],\n\t\t'showtext': ['facebook-post'],\n\t},\n\tdropAttributes,\n\tblockElements,\n\tdropElements,\n};\n\nexport const getDefaultPolicy = callOnce(() => {\n\tconst sanitizer = new Sanitizer(sanitizerConfig);\n\n\treturn createPolicy('default', {\n\t\tcreateHTML: createSanitizerCallback(sanitizer),\n\t\tcreateScript: createEmptyScript,\n\t\tcreateScriptURL: input => {\n\t\t\tif (isTrustedScriptOrigin(input)) {\n\t\t\t\treturn input;\n\t\t\t} else {\n\t\t\t\tthrow new TypeError(`Disallowed script origin: ${input}`);\n\t\t\t}\n\t\t}\n\t});\n});\n\nexport const getDefaultPolicyWithDisqus = callOnce(() => {\n\tconst sanitizer = new Sanitizer(Sanitizer.getDefaultConfiguration());\n\n\treturn createPolicy('default', {\n\t\tcreateHTML: createSanitizerCallback(sanitizer),\n\t\tcreateScript: createEmptyScript,\n\t\tcreateScriptURL: input => {\n\t\t\tif (isTrustedScriptOrigin(input) || isDisqusEmbed(input)) {\n\t\t\t\treturn input;\n\t\t\t} else {\n\t\t\t\tthrow new TypeError(`Disallowed script origin: ${input}`);\n\t\t\t}\n\t\t}\n\t});\n});\n\nexport const getKRVPolicy = callOnce(() => {\n\tconst sanitizer = new Sanitizer(sanitizerConfig);\n\n\treturn createPolicy('krv', {\n\t\tcreateHTML: createSanitizerCallback(sanitizer),\n\t\tcreateScript: createEmptyScript,\n\t\tcreateScriptURL: input => {\n\t\t\tif (isTrustedScriptOrigin(input)) {\n\t\t\t\treturn input;\n\t\t\t} else {\n\t\t\t\tthrow new TypeError(`Disallowed script origin: ${input}`);\n\t\t\t}\n\t\t}\n\t});\n});\n\nexport const getYouTubePolicy = callOnce(() => createPolicy('youtube#embed', {\n\tcreateScriptURL: input => {\n\t\tif (isYouTubeEmbed(input)) {\n\t\t\treturn input;\n\t\t} else {\n\t\t\tthrow new TypeError(`Invalid YouTube URL: ${input}`);\n\t\t}\n\t}\n}));\n\nexport const getGooglePolicy = callOnce(() => createPolicy('ga#script-url', {\n\tcreateHTML: createEmptyHTML,\n\tcreateScript: createEmptyScript,\n\tcreateScriptURL: input => {\n\t\tif (isGoogleOrigin(input)) {\n\t\t\treturn input;\n\t\t} else {\n\t\t\tthrow new TypeError(`${input} is not a known Google origin.`);\n\t\t}\n\t}\n}));\n\nexport const getDisqusPolicy = callOnce(() => createPolicy('disqus#script-url', {\n\tcreateScriptURL: input => {\n\t\tif (isDisqusEmbedScript(input)) {\n\t\t\treturn input;\n\t\t} else {\n\t\t\tthrow new TypeError(`Invalid Disqus URL: ${input}`);\n\t\t}\n\t}\n}));\n\nexport const getDefaultNoOpPolicy = callOnce(() => createPolicy('default', {}));\n","/**\n * @copyright 2023 Chris Zuber <admin@kernvalley.us>\n */\nimport { on, query, each, addClass, removeClass } from './dom.js';\n\nexport function remove() {\n\teach(this.dataset.remove, el => el.remove());\n}\n\nexport function hide() {\n\teach(this.dataset.hide, el => el.hidden = true);\n}\n\nexport function unhide() {\n\teach(this.dataset.unhide, el => el.hidden = false);\n}\n\nexport function disable() {\n\teach(this.dataset.disable, el => el.disabled = true);\n}\n\nexport function enable() {\n\teach(this.dataset.enable, el => el.disabled = false);\n}\n\nexport function fullScreen() {\n\tconst target = document.querySelector(this.dataset.fullScreen);\n\n\tif (target instanceof Element) {\n\t\tif (document.fullscreenElement instanceof Element && document.fullscreenElement.isSameNode(target)) {\n\t\t\tdocument.exitFullscreen();\n\t\t} else {\n\t\t\ttarget.requestFullscreen();\n\t\t}\n\t} else if (document.fullscreenElement instanceof Element) {\n\t\tdocument.exitFullscreen();\n\t}\n}\n\nexport async function cookie() {\n\tconst { cookie: name, value = null, domain = null, maxAge, expires, sameSite = 'Strict', path = '/' } = this.dataset;\n\n\tif (typeof value === 'string') {\n\t\tawait cookieStore.set({ name, value, domain, path,\n\t\t\tmaxAge: typeof maxAge === 'string' ? parseInt(maxAge) : null, sameSite,\n\t\t\texpires: typeof expires === 'string' ? new Date(expires) : null,\n\t\t\tsecure: this.dataset.hasOwnProperty('secure'),\n\t\t});\n\t} else {\n\t\tawait cookieStore.delete({ name, domain, path, secure: this.dataset.hasOwnProperty('secure') });\n\t}\n}\n\nexport function scrollTo() {\n\tconst { scrollTo, behavior = 'smooth', block = 'start', inline = 'nearest' } = this.dataset;\n\tconst target = document.querySelector(scrollTo);\n\n\tif (target instanceof Element) {\n\t\ttarget.scrollIntoView({ behavior, block, inline });\n\t}\n}\n\nexport function show() {\n\tconst target = document.querySelector(this.dataset.show);\n\n\tif (target.show instanceof Function) {\n\t\ttarget.show();\n\t} else {\n\t\ttarget.open = true;\n\t}\n}\n\nexport function open() {\n\teach(this.dataset.open, el => el.open = true);\n}\n\nexport function showModal() {\n\tconst target = document.querySelector(this.dataset.showModal);\n\n\tif (target.showModal instanceof Function) {\n\t\ttarget.showModal();\n\t}\n}\n\nexport function close() {\n\tconst { close, returnValue } = this.dataset;\n\teach(close, el => el.tagName === 'DIALOG' ? el.close(returnValue) : el.open = false);\n}\n\nexport function toggleAttribute() {\n\tconst { selector = ':root', toggleAttribute } = this.dataset;\n\n\tif ('checked' in this) {\n\t\tconst checked = this.checked;\n\t\teach(selector, el => el.toggleAttribute(toggleAttribute, checked));\n\t} else {\n\t\teach(selector, el => el.toggleAttribute(toggleAttribute));\n\t}\n}\n\nexport function copy() {\n\tif (navigator.clipboard && navigator.clipboard.writeText instanceof Function) {\n\t\tnavigator.clipboard.writeText(this.dataset.copy);\n\t}\n}\n\nexport function navigate() {\n\tswitch(this.dataset.navigate) {\n\t\tcase 'back':\n\t\t\thistory.back();\n\t\t\tbreak;\n\n\t\tcase 'forward':\n\t\t\thistory.forward();\n\t\t\tbreak;\n\n\t\tcase 'reload':\n\t\t\tlocation.reload();\n\t\t\tbreak;\n\n\t\tdefault:\n\t\t\tthrow new DOMException(`Invalid value for data-navigate: ${this.dataset.navigate}`);\n\t}\n}\n\nexport function toggleClass() {\n\tconst { selector = ':root', toggleClass = '' } = this.dataset;\n\n\tif ('checked' in this) {\n\t\tif (this.checked) {\n\t\t\taddClass(selector, ...toggleClass.split(' '));\n\t\t} else {\n\t\t\tremoveClass(selector, ...toggleClass.split(' '));\n\t\t}\n\t} else {\n\t\teach(selector, el => toggleClass.split(' ').forEach(cn => el.classList.toggle(cn)));\n\t}\n}\n\nexport function init({ base = document, capture, once, passive, signal } = {}) {\n\t// NOTE: Need to set keyboard handlers for non-button elements\n\tconst events = ['click'];\n\tconst opts = { capture, passive, once, signal };\n\n\ton(query('[data-remove]', base),           events, remove,          opts);\n\ton(query('[data-hide]', base),             events, hide,            opts);\n\ton(query('[data-unhide]', base),           events, unhide,          opts);\n\ton(query('[data-disable]', base),          events, disable,         opts);\n\ton(query('[data-enable]', base),           events, enable,          opts);\n\ton(query('[data-scroll-to]', base),        events, scrollTo,        opts);\n\ton(query('[data-show]', base),             events, show,            opts);\n\ton(query('[data-open]', base),             events, open,            opts);\n\ton(query('[data-show-modal]', base),       events, showModal,       opts);\n\ton(query('[data-close]', base),            events, close,           opts);\n\ton(query('[data-toggle-attribute]', base), events, toggleAttribute, opts);\n\ton(query('[data-toggle-class]', base),     events, toggleClass,     opts);\n\ton(query('[data-cookie]', base),           events, cookie,          opts);\n\ton(query('[data-navigate]', base),         events, navigate,        opts);\n\ton(query('[data-full-screen]', base),      events, fullScreen,      opts);\n\ton(query('[data-copy]', base),             events, copy,            opts);\n}\n","/**\n * @copyright 2023 Chris Zuber <admin@kernvalley.us>\n */\nexport const REFERRER_POLICY = 'strict-origin-when-cross-origin';\n","/**\n * @copyright 2023 Chris Zuber <admin@kernvalley.us>\n */\nimport { data, attr, css, getAttrs, aria as setAria } from './attrs.js';\nimport { listen } from './events.js';\nimport { getDeferred } from './promises.js';\nimport { setProp } from './trust.js';\nimport { REFERRER_POLICY } from './defaults.js';\nimport { isObject, isNullish, isIterable } from './utility.js';\nimport { JS } from './types.js';\nimport { isScriptURL, isHTML } from './trust.js';\nimport { resolveModule, isBare } from './module.js';\n\nexport function copyAs(target, tag, {\n\tincludeAttributes = true,\n\tincludeChildren = true,\n\tincludeId = true,\n\tdeep = true,\n\tis,\n} = {}) {\n\tif (typeof tag !== 'string') {\n\t\tthrow new TypeError(`Expected tag to be a string but got a ${typeof tag}`);\n\t} else if (typeof target === 'string') {\n\t\treturn copyAs(document.querySelector(target), tag, { includeAttributes, includeChildren, includeId, deep });\n\t} else if (! (target instanceof Element)) {\n\t\tthrow new TypeError(`Expected target to be a string or Element but got a ${typeof target}`);\n\t} else {\n\t\tconst el = document.createElement(tag, { is });\n\n\t\tif (includeAttributes && target.hasAttributes()) {\n\t\t\tObject.entries(getAttrs(target))\n\t\t\t\t.forEach(([name, value]) => el.setAttribute(name, value));\n\n\t\t\tif (! includeId) {\n\t\t\t\tel.removeAttribute('id');\n\t\t\t}\n\t\t}\n\n\t\tif (includeChildren && target.hasChildNodes()) {\n\t\t\tel.append(...[...target.childNodes].map(node => node.cloneNode(deep)));\n\t\t}\n\n\t\treturn el;\n\t}\n}\n\nexport function createElement(tag, {\n\t/* structured data attributes        */\n\t'@context':    context    = 'https://schema.org',\n\t'@type':       type       = undefined,\n\t'@identifier': identifier = undefined,\n\titemtype                  = undefined,\n\titemprop                  = undefined,\n\titemscope                 = undefined,\n\titemref                   = undefined,\n\titemid                    = undefined,\n\n\t/* Global attributes                  */\n\tid                        = undefined,\n\tclassList                 = undefined,\n\thidden                    = undefined,\n\tdataset                   = undefined,\n\taccessKey                 = undefined,\n\ttitle                     = undefined,\n\n\t/* custom element attributes          */\n\tpart                      = undefined,\n\tslot                      = undefined,\n\tis                        = undefined,\n\n\t/* non-attribute stuff / other        */\n\tchildren                  = undefined,\n\tstyles                    = undefined,\n\ttext                      = undefined,\n\thtml                      = undefined,\n\tpolicy                    = 'trustedTypes' in globalThis ? globalThis.trustedTypes.defaultPolicy : null,\n\tsanitizer                 = undefined,\n\taria                      = undefined,\n\tevents: { capture, passive, once, signal, ...events } = {},\n\tanimation: {\n\t\tkeyframes,\n\t\tduration = 0,\n\t\tdelay = 0,\n\t\tendDelay = 0,\n\t\teasing = 'linear',\n\t\tdirection = 'normal',\n\t\tfill = 'none',\n\t\titerations = 1,\n\t\titerationStart = 0,\n\t\tcomposite = 'replace',\n\t\titerationComposite = 'replace',\n\t\tpseudoElement,\n\t} = {},\n\t...attrs\n} = {}) {\n\tif (typeof tag !== 'string') {\n\t\tthrow new TypeError('tag must be a string');\n\t} else {\n\t\tconst el = document.createElement(tag, { is });\n\t\tel.hidden = hidden;\n\n\t\tif (typeof title === 'string') {\n\t\t\tel.title = title;\n\t\t}\n\n\t\tif (typeof id === 'string') {\n\t\t\tel.id = id;\n\t\t} else if (typeof identifier === 'string') {\n\t\t\tel.id = identifier;\n\t\t}\n\n\t\tif (Array.isArray(classList) && classList.length !== 0) {\n\t\t\tel.classList.add(...classList);\n\t\t}\n\n\t\tif (isObject(dataset)) {\n\t\t\tdata(el, dataset);\n\t\t}\n\n\t\tif (Array.isArray(part) && part.length !== 0) {\n\t\t\tel.part.add(...part);\n\t\t} else if(typeof part === 'string') {\n\t\t\tel.part.add(part);\n\t\t}\n\n\t\tif (typeof slot === 'string') {\n\t\t\tel.slot = slot;\n\t\t}\n\n\t\tif (isObject(styles)) {\n\t\t\tcss(el, styles);\n\t\t}\n\n\t\tObject.entries(events).forEach(([event, callback]) => {\n\t\t\tlisten(el, event, callback, { capture, passive, once, signal });\n\t\t});\n\n\t\tif (typeof text === 'string') {\n\t\t\tel.textContent = text;\n\t\t} else if (typeof html === 'string' || isHTML(html)) {\n\t\t\tif (\n\t\t\t\t'Sanitizer' in globalThis\n\t\t\t\t&& sanitizer instanceof globalThis.Sanitizer\n\t\t\t\t&& Element.prototype.setHTML instanceof Function\n\t\t\t) {\n\t\t\t\tel.setHTML(html, { sanitizer });\n\t\t\t} else {\n\t\t\t\tsetProp(el, 'innerHTML', html, { policy });\n\t\t\t}\n\t\t}\n\n\t\tif (isIterable(children)) {\n\t\t\tel.append(...children.filter(el => typeof el === 'string' || el instanceof Element));\n\t\t}\n\n\t\tif (typeof is === 'string') {\n\t\t\tattrs.is = is;\n\t\t}\n\n\t\tif (typeof itemtype === 'string') {\n\t\t\tattrs.itemtype = itemtype;\n\t\t} else if (typeof type === 'string') {\n\t\t\tattrs.itemtype = new URL(type, context).href;\n\t\t}\n\n\t\tif (typeof itemprop === 'string') {\n\t\t\tattrs.itemprop = itemprop;\n\t\t} else if (Array.isArray(itemprop)) {\n\t\t\tattrs.itemprop = itemprop.join(' ');\n\t\t}\n\n\t\tif (typeof itemref === 'string') {\n\t\t\tattrs.itemref = itemref;\n\t\t} else if (Array.isArray(itemref)) {\n\t\t\tattrs.itemref = itemref.join(' ');\n\t\t}\n\n\t\tif (typeof itemscope === 'boolean' || typeof itemscope === 'string') {\n\t\t\tattrs.itemscope = itemscope;\n\t\t} else if (attrs.hasOwnProperty('itemtype')) {\n\t\t\tattrs.itemscope = true;\n\t\t}\n\n\t\tif (typeof itemid === 'string') {\n\t\t\tattrs.itemid = itemid;\n\t\t}\n\n\t\tif (Array.isArray(accessKey)) {\n\t\t\tel.accessKey = accessKey.join(' ');\n\t\t} else if (typeof accesskey === 'string') {\n\t\t\tel.accessKey = accessKey;\n\t\t}\n\n\t\tattr(el, attrs);\n\n\t\tif (isObject(aria)) {\n\t\t\tsetAria(el, aria);\n\t\t}\n\n\t\tif ((Array.isArray(keyframes) || isObject(keyframes)) && el.animate instanceof Function) {\n\t\t\tel.animate(keyframes, {\n\t\t\t\tduration, delay, endDelay, easing, direction, fill, iterations,\n\t\t\t\titerationStart, composite, iterationComposite, pseudoElement,\n\t\t\t});\n\t\t}\n\n\t\treturn el;\n\t}\n}\n\nexport function createSlot(name, {\n\tid        = undefined,\n\tclassList = undefined,\n\thidden    = undefined,\n\tdataset   = undefined,\n\tchildren  = undefined,\n\tstyles    = undefined,\n\ttext      = undefined,\n\thtml      = undefined,\n\tpolicy    = undefined,\n\tsanitizer = undefined,\n\tevents: { capture, passive, once, signal, ...events } = {},\n\t...attrs\n} = {}) {\n\tconst slot = createElement('slot', {\n\t\tid, classList, hidden, dataset, children, styles, text, html, policy,\n\t\tsanitizer, events: { capture, passive, once, signal, ...events }, ...attrs,\n\t});\n\n\tslot.name = name;\n\treturn slot;\n}\n\nexport function createScript(src, {\n\tasync = true,\n\tdefer = false,\n\tblocking = null,\n\tintegrity = null,\n\tnonce = null,\n\ttype = JS,\n\tcrossOrigin = null,\n\treferrerPolicy = REFERRER_POLICY,\n\tnoModule = false,\n\tfetchPriority = 'auto',\n\tdataset = null,\n\tpolicy = 'trustedTypes' in globalThis ? globalThis.trustedTypes.defaultPolicy : null,\n\tevents: { capture, passive, once, signal, ...events } = {},\n\t...attrs\n} = {}) {\n\tif (isBare(src)) {\n\t\tsrc = resolveModule(src);\n\t}\n\tconst script = createElement('script', {\n\t\tdataset,\n\t\tevents: { capture, passive, once, signal, ...events },\n\t\t...attrs,\n\t});\n\n\tscript.type = type;\n\tscript.noModule = noModule;\n\tscript.async = async;\n\tscript.defer = defer;\n\tscript.referrerPolicy = referrerPolicy;\n\tscript.fetchPriority = fetchPriority;\n\n\tif (typeof crossOrigin === 'string' && src.origin !== location.origin) {\n\t\tscript.crossOrigin = crossOrigin;\n\t}\n\n\tif (typeof integrity === 'string') {\n\t\tscript.integrity = integrity;\n\t}\n\n\tif (typeof nonce === 'string') {\n\t\tscript.nonce = nonce;\n\t}\n\n\tif (Array.isArray(blocking)) {\n\t\tscript.setAttribute('blocking', blocking.join(' '));\n\t} else if (typeof blocking === 'string') {\n\t\tscript.setAttribute('blocking', blocking);\n\t}\n\n\tsetProp(script, 'src', src, { policy });\n\n\treturn script;\n}\n\nexport function createImage(src, {\n\talt = '',\n\tid = null,\n\theight = undefined,\n\twidth = undefined,\n\tcrossOrigin = null,\n\t'@type': type,\n\t'@context': context,\n\titemprop = null,\n\titemtype = null,\n\titemscope = undefined,\n\tsizes = null,\n\tsrcset = null,\n\treferrerPolicy = REFERRER_POLICY,\n\tfetchPriority = 'auto',\n\tloading = 'eager',\n\tdecoding = 'async',\n\trole = null,\n\tslot = null,\n\tpart = [],\n\tclassList = [],\n\tdataset = null,\n\tstyles = null,\n\tanimation,\n\tevents: { capture, passive, once, signal, ...events } = {},\n\t...attrs\n} = {}) {\n\tif (isBare(src)) {\n\t\tsrc = new URL(resolveModule(src));\n\t} else if (! (src instanceof URL)) {\n\t\tsrc = new URL(src, document.baseURI);\n\t}\n\n\tconst img = createElement('img', {\n\t\tid, classList, dataset, slot, part, styles,\n\t\titemtype, itemprop, itemscope, '@type': type, '@context': context,\n\t\tevents: { capture, passive, once, signal, ...events }, animation,\n\t\t...attrs\n\t});\n\n\tif (Number.isSafeInteger(width)) {\n\t\timg.width = width;\n\t}\n\n\tif (Number.isSafeInteger(height)) {\n\t\timg.height = height;\n\t}\n\n\timg.alt = alt;\n\timg.referrerPolicy = referrerPolicy;\n\timg.loading = loading;\n\timg.decoding = decoding;\n\timg.fetchPriority = fetchPriority;\n\n\tif (typeof role === 'string') {\n\t\timg.role = role;\n\t}\n\n\tif (typeof crossOrigin === 'string' && location.origin !== src.origin) {\n\t\timg.crossOrigin = crossOrigin;\n\t}\n\n\tif (isObject(srcset)) {\n\t\timg.srcset = Object.entries(srcset).map(([size, src]) => `${src} ${size}`).join(', ');\n\t} else if (Array.isArray(srcset) && srcset.length !== 0) {\n\t\timg.srcset = srcset.join(', ');\n\t} else if (typeof srcset === 'string') {\n\t\timg.srcset = srcset;\n\t}\n\n\tif (Array.isArray(sizes) && sizes.length !== 0) {\n\t\timg.sizes = sizes.join(', ');\n\t} else if (typeof sizes === 'string') {\n\t\timg.sizes = sizes;\n\t}\n\n\tif (typeof src === 'string' && src.length !== 0) {\n\t\timg.src = src;\n\t} else if (src instanceof URL) {\n\t\timg.src = src.href;\n\t}\n\n\treturn img;\n}\n\nexport function createLink(href = null, {\n\trel = [],\n\ttype = null,\n\tas = null,\n\tblocking = null,\n\tcrossOrigin = 'anonymous',\n\treferrerPolicy = 'no-referrer',\n\tfetchPriority = 'auto',\n\tintegrity = null,\n\tnonce = null,\n\tmedia = 'all',\n\tdisabled = false,\n\tdataset = null,\n\ttitle = null,\n\tsizes = [],\n\tevents: { capture, passive, once, signal, ...events } = {},\n\t...rest\n}) {\n\tif (isBare(href)) {\n\t\thref = resolveModule(href);\n\t}\n\tconst link = createElement('link', {\n\t\tdataset, ...rest,\n\t\tevents: { capture, passive, once, signal, ...events },\n\t});\n\n\tif (Array.isArray(rel)) {\n\t\tlink.relList.add(...rel);\n\t} else if (typeof rel === 'string') {\n\t\tlink.relList.add(rel);\n\t}\n\n\tif (typeof type === 'string') {\n\t\tlink.type = type;\n\t}\n\n\tif (typeof as === 'string') {\n\t\tlink.as = as;\n\t}\n\n\tif (typeof crossOrigin === 'string') {\n\t\tlink.crossOrigin = crossOrigin;\n\t}\n\n\tif (typeof referrerPolicy === 'string') {\n\t\tlink.referrerPolicy = referrerPolicy;\n\t}\n\n\tif (typeof fetchPriority === 'string') {\n\t\tlink.fetchPriority = fetchPriority;\n\t}\n\n\tif (typeof integrity === 'string') {\n\t\tlink.integrity = integrity;\n\t}\n\n\tif (typeof nonce === 'string') {\n\t\tlink.nonce = nonce;\n\t}\n\n\tif (typeof media === 'string') {\n\t\tlink.media = media;\n\t}\n\n\tif (Array.isArray(blocking)) {\n\t\tlink.setAttribute('blocking', blocking.join(' '));\n\t} else if (typeof blocking === 'string') {\n\t\tlink.setAttribute('blocking', blocking);\n\t}\n\n\tif (typeof href === 'string') {\n\t\tlink.href = href;\n\t}\n\n\tif (disabled) {\n\t\tlink.disabled = true;\n\t}\n\n\tif (typeof title === 'string') {\n\t\tlink.title = title;\n\t}\n\n\tif (Array.isArray(sizes) && sizes.length !== 0) {\n\t\tlink.sizes.add(...sizes);\n\t} else if (typeof sizes === 'string') {\n\t\tlink.sizes.add(sizes);\n\t}\n\n\treturn link;\n}\n\nexport function createIframe(src, {\n\tname = null,\n\tid = null,\n\twidth = null,\n\theight = null,\n\tsrcdoc = null,\n\tloading = 'eager',\n\tframeBorder = 0,\n\tfetchPriority = 'auto',\n\tsandbox = ['allow-scripts'],\n\tallow = [],\n\treferrerPolicy = REFERRER_POLICY,\n\tclassList = [],\n\tdataset = null,\n\tstyles = null,\n\tpart = [],\n\tslot = null,\n\ttitle = null,\n\tanimation,\n\tpolicy = 'trustedTypes' in globalThis ? globalThis.trustedTypes.defaultPolicy : undefined,\n\tevents: { capture, passive, once, signal, ...events } = {},\n\t...rest\n} = {}) {\n\tconst iframe = createElement('iframe', {\n\t\tid, classList, dataset, styles, part, slot, animation,\n\t\tevents: { capture, passive, once, signal, ...events },\n\t\t...rest\n\t});\n\n\tiframe.loading = loading;\n\tiframe.fetchPriority = fetchPriority;\n\tiframe.referrerPolicy = referrerPolicy;\n\tiframe.frameBorder = frameBorder.toString();\n\n\tif (typeof name === 'string') {\n\t\tiframe.name = name;\n\t}\n\n\tif (typeof title === 'string') {\n\t\tiframe.title = title;\n\t}\n\n\tif (Array.isArray(sandbox)) {\n\t\tiframe.sandbox.add(...sandbox);\n\t}\n\n\tif (typeof height === 'number' && ! Number.isNaN(height)) {\n\t\tiframe.height = height;\n\t}\n\n\tif (typeof width === 'number' && ! Number.isNaN(width)) {\n\t\tiframe.width = width;\n\t}\n\n\tif (Array.isArray(allow) && allow.length !== 0) {\n\t\tiframe.allow = allow.join('; ');\n\n\t\tif (allow.includes('fullscreen')) {\n\t\t\tiframe.allowFullscreen = true;\n\t\t}\n\t} else if (isObject(allow)) {\n\t\tconst quoted = ['self', 'none'];\n\n\t\tiframe.allow = Object.entries(allow).map(([key, val]) => {\n\t\t\tif (Array.isArray(val)) {\n\t\t\t\tconst vals = val.map(item => {\n\t\t\t\t\tif (quoted.includes(item)) {\n\t\t\t\t\t\treturn `'${item}'`;\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn item;\n\t\t\t\t\t}\n\t\t\t\t}).join('; ');\n\n\t\t\t\treturn `${key} ${vals}`;\n\t\t\t} else if (quoted.includes(val)) {\n\t\t\t\treturn `${key} '${val}'`;\n\t\t\t} else {\n\t\t\t\treturn `${key} ${val}`;\n\t\t\t}\n\t\t}).join('; ') + ';';\n\n\t\tif ('fullscreen' in allow) {\n\t\t\tiframe.allowFullscreen = true;\n\t\t}\n\t} else if (typeof allow === 'string') {\n\t\tiframe.allow = allow;\n\t}\n\n\tif ((typeof srcdoc === 'string' && srcdoc.length !== 0) || isHTML(srcdoc)) {\n\t\tsetProp(iframe, 'srcdoc', srcdoc, { policy });\n\t} else if (srcdoc instanceof Document) {\n\t\tsetProp(iframe, 'srcdoc'. srcdoc.documentElement.outerHTML.replace(/\\n/g, ''), { policy });\n\t}\n\n\tif (typeof src === 'string' || src instanceof URL || isScriptURL(src)) {\n\t\tsetProp(iframe, 'src', src, { policy });\n\t} else if (src instanceof Document) {\n\t\tsetProp(iframe, 'srcdoc'. src.documentElement.outerHTML.replace(/\\n/g, ''), { policy });\n\t}\n\n\treturn iframe;\n}\n\nexport function createOption(option) {\n\tif (isObject(option)) {\n\t\tconst { label, value, disabled = false, selected = false, options } = option;\n\n\t\tif (Array.isArray(options)) {\n\t\t\treturn createOptGroup(label, options);\n\t\t} else {\n\t\t\tconst opt = document.createElement('option');\n\t\t\topt.label = label;\n\t\t\topt.value = value;\n\t\t\topt.disabled = disabled;\n\t\t\topt.selected = selected;\n\t\t\treturn opt;\n\t\t}\n\t} else {\n\t\tconst opt = document.createElement('option');\n\t\topt.label = option;\n\t\topt.value = option;\n\t\treturn opt;\n\t}\n}\n\nexport function createOptGroup(label, options) {\n\tif (typeof label !== 'string') {\n\t\tthrow new TypeError('label must be a string');\n\t} else if (! Array.isArray(options)) {\n\t\tthrow new TypeError('options must be an array');\n\t} else {\n\t\tconst optgroup = document.createElement('optgroup');\n\t\toptgroup.label = label;\n\t\toptgroup.append(...options.map(createOption));\n\t\treturn optgroup;\n\t}\n}\n\nexport function createDatalist(id, items) {\n\tif (typeof id !== 'string') {\n\t\tthrow new TypeError('id must be a string');\n\t} else if (! Array.isArray(items) || items.length == 0) {\n\t\tthrow new TypeError('Items must be a non-empty array');\n\t} else {\n\t\tconst list = document.createElement('datalist');\n\t\tlist.id = id;\n\n\t\tlist.append(...items.map(createOption));\n\n\t\treturn list;\n\t}\n}\n\nexport function createInput(name, {\n\ttype = 'text',\n\trequired = false,\n\tdisabled = false,\n\treadOnly = false,\n\tmultiple = false,\n\tchecked = false,\n\taccept,\n\tid,\n\tclassList,\n\tlist,\n\tvalue,\n\tplaceholder,\n\tpattern,\n\tinputMode,\n\tmin = NaN,\n\tmax = NaN,\n\tstep = NaN,\n\tminLength = NaN,\n\tmaxLength = NaN,\n\tautocomplete,\n\tstyles,\n\tdataset,\n\tpart,\n\tslot,\n\tanimation,\n\tevents: { capture, passive, once, signal, ...events } = {},\n\t...attrs\n} = {}) {\n\tif (typeof name !== 'string') {\n\t\tthrow new TypeError('name must be a string');\n\t} else {\n\t\tconst input = createElement('input', {\n\t\t\tid, classList, dataset, styles, part, slot, animation,\n\t\t\tevents: { capture, passive, once, signal, ...events },\n\t\t\t...attrs\n\t\t});\n\n\t\tinput.name = name;\n\t\tinput.type = type;\n\t\tinput.required = required;\n\t\tinput.disabled = disabled;\n\t\tinput.readOnly = readOnly;\n\t\tinput.multiple = multiple;\n\t\tinput.checked = checked;\n\n\t\tif (typeof autocomplete === 'string') {\n\t\t\tinput.autocomplete = autocomplete;\n\t\t}\n\n\t\tif (typeof inputMode === 'string') {\n\t\t\tinput.inputMode = inputMode;\n\t\t}\n\n\t\tif (typeof list === 'string') {\n\t\t\tinput.setAttribute('list', list);\n\t\t}\n\n\t\tif (typeof placeholder === 'string') {\n\t\t\tinput.placeholder = placeholder;\n\t\t}\n\n\t\tif (typeof pattern === 'string') {\n\t\t\tinput.pattern = pattern;\n\t\t}\n\n\t\tif (! isNullish(min)) {\n\t\t\tinput.min = min;\n\t\t}\n\n\t\tif (! isNullish(max)) {\n\t\t\tinput.max = max;\n\t\t}\n\n\t\tif (Number.isSafeInteger(minLength) && minLength >= 0) {\n\t\t\tinput.minLength = minLength;\n\t\t}\n\n\t\tif (Number.isSafeInteger(maxLength) && maxLength > 0) {\n\t\t\tinput.maxLength = maxLength;\n\t\t}\n\n\t\tif (! isNullish(step)) {\n\t\t\tinput.step = step;\n\t\t}\n\n\t\tif (! isNullish(value)) {\n\t\t\tinput.value = value;\n\t\t}\n\n\t\tif (typeof accept === 'string') {\n\t\t\tinput.accept = accept;\n\t\t} else if (Array.isArray(accept)) {\n\t\t\tinput.accept = accept.join(',');\n\t\t}\n\n\t\treturn input;\n\t}\n}\n\nexport function createSelect(name, options = [], {\n\trequired = false,\n\tdisabled = false,\n\tmultiple = false,\n\tid,\n\tclassList,\n\tdataset,\n\tautocomplete,\n\tstyles,\n\tslot,\n\tpart,\n\tanimation,\n\tevents: { capture, passive, once, signal, ...events } = {},\n\t...attrs\n} = {}) {\n\tif (typeof name !== 'string') {\n\t\tthrow new TypeError('name must be a string');\n\t} else if (! Array.isArray(options)) {\n\t\tthrow new TypeError('options must be an array');\n\t} else {\n\t\tconst select = createElement('select', {\n\t\t\tid, classList, dataset, styles, part, slot, animation,\n\t\t\tevents: { capture, passive, once, signal, ...events },\n\t\t\t...attrs\n\t\t});\n\n\t\tselect.name = name;\n\t\tselect.multiple = multiple;\n\t\tselect.disabled = disabled;\n\t\tselect.required = required;\n\t\tselect.append(...options.map(createOption));\n\n\t\tif (typeof autocomplete === 'string') {\n\t\t\tselect.autocomplete = autocomplete;\n\t\t}\n\n\t\treturn select;\n\t}\n}\n\nexport async function showDialog({ text, html, children = [], classList = [], animation, signal, ...rest }) {\n\tconst { resolve, reject, promise } = getDeferred();\n\n\tif (signal instanceof AbortSignal && signal.aborted) {\n\t\treject(signal.reason);\n\t} else {\n\t\tconst closeContainer = createElement('div', {\n\t\t\tclassList: ['flex', 'space-evenly'],\n\t\t\tchildren: [\n\t\t\t\tcreateElement('button', {\n\t\t\t\t\ttype: 'button',\n\t\t\t\t\tclassList: ['btn', 'btn-reject'],\n\t\t\t\t\ttext: 'Close',\n\t\t\t\t\tevents: {\n\t\t\t\t\t\tsignal,\n\t\t\t\t\t\tclick: ({ target }) => target.closest('dialog').close(),\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t]\n\t\t});\n\n\t\tconst dialog = createElement('dialog', {\n\t\t\ttext, html, children: [...children, closeContainer], classList, animation, ...rest,\n\t\t\tevents: {\n\t\t\t\tsignal,\n\t\t\t\tclose: ({ target }) => {\n\t\t\t\t\tresolve();\n\t\t\t\t\ttarget.remove();\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tdialog.append();\n\n\t\tdocument.body.append(dialog);\n\t\tdialog.showModal();\n\n\t\tif (signal instanceof AbortSignal) {\n\t\t\tconst abortHandler = ({ target }) => {\n\t\t\t\treject(target.reason);\n\t\t\t\tdialog.close();\n\t\t\t};\n\n\t\t\tsignal.addEventListener('abort', abortHandler);\n\t\t\tdialog.addEventListener('close', () => signal.removeEventListener('abort', abortHandler));\n\t\t}\n\t}\n\n\tawait promise;\n}\n","/**\n * @copyright 2023 Chris Zuber <admin@kernvalley.us>\n */\nconst symbols = { resp: Symbol('resp') };\n\nexport class HTTPException extends Error {\n\tconstructor(resp = Response.error(), { message, cause } = {}) {\n\t\tsuper(\n\t\t\ttypeof message === 'string' ? message :`<${resp.url}> [${resp.status} ${resp.statusText}]`,\n\t\t\t{ cause }\n\t\t);\n\n\t\tObject.defineProperty(this, symbols.resp, {\n\t\t\tvalue: resp,\n\t\t\tconfigurable: false,\n\t\t\twritable: false,\n\t\t\tenumerable: false,\n\t\t});\n\t}\n\n\tasync json() {\n\t\treturn await this[symbols.resp].json();\n\t}\n\n\tasync text() {\n\t\treturn await this[symbols.resp].text();\n\t}\n\n\tget body() {\n\t\treturn this[symbols.resp].body;\n\t}\n\n\tget bodyUsed() {\n\t\treturn this[symbols.resp].bodyUsed;\n\t}\n\n\tget headers() {\n\t\treturn this[symbols.resp].headers;\n\t}\n\n\tget ok() {\n\t\treturn this[symbols.resp].ok;\n\t}\n\n\tget redirected() {\n\t\treturn this[symbols.resp].redirected;\n\t}\n\n\tget status() {\n\t\treturn this[symbols.resp].status;\n\t}\n\n\tget statusText() {\n\t\treturn this[symbols.resp].statusText;\n\t}\n\n\tget type() {\n\t\treturn this[symbols.resp].type;\n\t}\n\n\tget url() {\n\t\treturn this[symbols.resp].url;\n\t}\n\n\ttoJSON() {\n\t\tconst { status, statusText, ok, url, message, type, redirected } = this;\n\t\treturn { status, ok, statusText, url, message, type, redirected };\n\t}\n}\n","/**\n * @copyright 2021-2023 Chris Zuber <admin@kernvalley.us>\n */\nimport { parse } from './dom.js';\nimport { signalAborted } from './abort.js';\nimport { setURLParams, setUTMParams, isObject, isNullish, callOnce } from './utility.js';\nimport { isTrustPolicy } from './trust.js';\nimport { HTTPException } from './HTTPException.js';\nimport * as TYPES from './types.js';\n\nfunction filename(src) {\n\tif (typeof src === 'string') {\n\t\treturn new URL(src, location.origin).pathname.split('/').at(-1);\n\t} else {\n\t\treturn '';\n\t}\n}\n\nfunction getType({ headers }) {\n\tif (headers instanceof Headers && headers.has('Content-Type')) {\n\t\treturn headers.get('Content-Type').split(';')[0];\n\t} else {\n\t\treturn null;\n\t}\n}\n\nfunction handleResponse(resp, { cause, message } = {}) {\n\tif (! (resp instanceof Response)) {\n\t\tthrow new TypeError('Expected a Response object');\n\t} else if (! resp.ok) {\n\t\tthrow new HTTPException(resp, { cause, message });\n\t} else {\n\t\treturn resp;\n\t}\n}\n\nfunction handleError(err) {\n\tif (err instanceof HTTPException) {\n\t\tthrow err;\n\t} else if (err instanceof Error) {\n\t\tthrow new HTTPException(Response.error(), { cause: err, message: err.message });\n\t} else if (typeof err === 'string') {\n\t\tthrow new HTTPException(Response.error(), {\n\t\t\tcause: new DOMException('Unknown network error'),\n\t\t\tmessage: err,\n\t\t});\n\t} else {\n\t\tthrow new HTTPException(Response.error(), {\n\t\t\tcause: new DOMException('Unknown network error'),\n\t\t\tmessage: 'Unknown network error',\n\t\t});\n\t}\n}\n\nexport async function fetch(url, opts = {}) {\n\tif (opts.signal instanceof AbortSignal && opts.signal.aborted) {\n\t\tthrow new HTTPException(Response.error(), {\n\t\t\tcause: opts.signal.reason,\n\t\t\tmessage: opts.signal.reason instanceof Error ? opts.signal.reason.message : opts.signal.reason,\n\t\t});\n\t} else if (opts.signal instanceof AbortSignal && ! ('signal' in Request.prototype)) {\n\t\treturn await Promise.race([\n\t\t\tglobalThis.fetch(url, opts),\n\t\t\tsignalAborted(opts.signal),\n\t\t]).then(resp => handleResponse(resp, { message: opts.errorMessage }), handleError);\n\t} else {\n\t\treturn await globalThis.fetch(url, opts).then(resp => handleResponse(resp, { message: opts.errorMessage }), handleError);\n\t}\n}\n\nexport const getHTTPCSP = callOnce(async function getHTTPCSP() {\n\tconst { ok, headers } = await fetch(location.href, { method: 'HEAD' });\n\n\tif (ok && headers.has('Content-Security-Policy')) {\n\t\tconst directives = headers.get('Content-Security-Policy').trim().split(';').filter(str => str.length !== 0);\n\n\t\treturn Object.fromEntries(directives.map(directive => {\n\t\t\tconst [key, ...rest] = directive.trim().split(' ').filter(part => part.length !== 0);\n\t\t\treturn [key, rest];\n\t\t}));\n\t}\n});\n\nexport const getCSP = callOnce(async function getCSP() {\n\ttry {\n\t\tconst csp = await getHTTPCSP();\n\n\t\tif (typeof csp === 'object' && ! Object.is(csp, null)) {\n\t\t\treturn csp;\n\t\t} else {\n\t\t\treturn getMetaCSP();\n\t\t}\n\t} catch(err) {\n\t\tconsole.error(err);\n\t\treturn getMetaCSP();\n\t}\n});\n\nexport function getMetaCSP() {\n\tconst meta = document.head.querySelector('meta[http-equiv=\"Content-Security-Policy\"][content]');\n\n\tif (meta instanceof HTMLMetaElement) {\n\t\tconst directives = meta.content.trim().split(';').filter(str => str.length !== 0);\n\n\t\treturn Object.fromEntries(directives.map(directive => {\n\t\t\tconst [key, ...rest] = directive.trim().split(' ').filter(part => part.length !== 0);\n\t\t\treturn [key, rest];\n\t\t}));\n\t} else {\n\t\treturn {};\n\t}\n}\n\nexport async function GET(url, {\n\tbody = undefined,\n\tmode = 'cors',\n\tcache = 'default',\n\tcredentials = 'omit',\n\tredirect = 'follow',\n\tpriority  ='auto',\n\treferrerPolicy = 'no-referrer',\n\theaders = new Headers(),\n\tintegrity = undefined,\n\tkeepalive = undefined,\n\tsignal = undefined,\n\ttimeout = null,\n\terrorMessage,\n} = {}) {\n\tif (typeof body !== 'undefined') {\n\t\turl = setURLParams(url, body);\n\t} else if (typeof url === 'string') {\n\t\turl = new URL(url, document.baseURI);\n\t}\n\n\tif (typeof signal === 'undefined' && Number.isInteger(timeout)) {\n\t\tsignal = AbortSignal.timeout(timeout);\n\t} else if (signal instanceof AbortController) {\n\t\tsignal = signal.signal;\n\t}\n\n\treturn await fetch(url, { method: 'GET', mode, credentials, referrerPolicy,\n\t\theaders, cache, redirect, priority, integrity, keepalive, signal, errorMessage });\n}\n\nexport async function POST(url, {\n\tbody = undefined,\n\tmode = 'cors',\n\tcache = 'default',\n\tcredentials = 'omit',\n\tpriority = 'auto',\n\tredirect = 'follow',\n\treferrerPolicy = 'no-referrer',\n\theaders = new Headers(),\n\tintegrity = undefined,\n\tkeepalive = undefined,\n\tsignal = undefined,\n\ttimeout = null,\n\terrorMessage,\n} = {}) {\n\tif (typeof body === 'object' && ! (body instanceof FormData)) {\n\t\tif (body instanceof HTMLFormElement) {\n\t\t\tbody = new FormData(body);\n\t\t} else if (body instanceof File) {\n\t\t\tlet file;\n\t\t\t[body, file] = [new FormData(), body];\n\t\t\t// @TODO figure out a default param name for the file\n\t\t\t// @TODO handle multiple files and arrays containing files\n\t\t\tbody.set(file.name, file, file.name);\n\t\t} else {\n\t\t\tbody = JSON.stringify(body);\n\n\t\t\tif (headers instanceof Headers && ! headers.has('Content-Type')) {\n\t\t\t\theaders.set('Content-Type', TYPES.JSON);\n\t\t\t}\n\t\t}\n\t}\n\n\tif (typeof signal === 'undefined' && Number.isInteger(timeout)) {\n\t\tsignal = AbortSignal.timeout(timeout);\n\t} else if (signal instanceof AbortController) {\n\t\tsignal = signal.signal;\n\t}\n\n\treturn await fetch(url, { method: 'POST', body, mode, credentials, referrerPolicy,\n\t\theaders, cache, redirect, priority, integrity, keepalive, signal, errorMessage });\n}\n\nexport async function DELETE(url, {\n\tbody = undefined,\n\tmode = 'cors',\n\tcache = 'default',\n\tcredentials = 'omit',\n\tredirect = 'follow',\n\tpriority = 'auto',\n\treferrerPolicy = 'no-referrer',\n\theaders = new Headers(),\n\tintegrity = undefined,\n\tkeepalive = undefined,\n\tsignal = undefined,\n\ttimeout = null,\n\terrorMessage,\n} = {}) {\n\tif (typeof body !== 'undefined') {\n\t\turl = setURLParams(url, body);\n\t} else if (typeof url === 'string') {\n\t\turl = new URL(url, document.baseURI);\n\t}\n\n\tif (typeof signal === 'undefined' && Number.isInteger(timeout)) {\n\t\tsignal = AbortSignal.timeout(timeout);\n\t} else if (signal instanceof AbortController) {\n\t\tsignal = signal.signal;\n\t}\n\n\treturn await fetch(url, { method: 'DELETE', mode, credentials, referrerPolicy,\n\t\theaders, cache, redirect, priority, integrity, keepalive, signal, errorMessage });\n}\n\nexport async function getHTML(url, {\n\tbody = undefined,\n\tmode = 'cors',\n\tcache = 'default',\n\tcredentials = 'omit',\n\tredirect = 'follow',\n\tpriority = 'auto',\n\treferrerPolicy = 'no-referrer',\n\theaders = new Headers({ Accept: TYPES.HTML }),\n\tintegrity = undefined,\n\tkeepalive = undefined,\n\tsignal = undefined,\n\ttimeout = null,\n\thead = true,\n\tasFrag = true,\n\tsanitizer = undefined,\n\tpolicy,\n\terrorMessage,\n} = {}) {\n\tconst html = await getText(url, { body, mode, credentials, referrerPolicy, headers,\n\t\tcache, redirect, priority, integrity, keepalive, signal, timeout, errorMessage });\n\n\tif (isTrustPolicy(policy)) {\n\t\treturn parse(policy.createHTML(html), { asFrag, head });\n\t} else {\n\t\treturn parse(html, { head, asFrag, sanitizer, policy });\n\t}\n}\n\nexport const createTemplateGetter = (...args) => callOnce(() => getHTML(...args));\n\nexport async function getText(url, {\n\tbody = undefined,\n\tmode = 'cors',\n\tcache = 'default',\n\tcredentials = 'omit',\n\tredirect = 'follow',\n\tpriority = 'auto',\n\treferrerPolicy = 'no-referrer',\n\theaders = new Headers({ Accept: TYPES.TEXT }),\n\tintegrity = undefined,\n\tkeepalive = undefined,\n\tsignal = undefined,\n\ttimeout = null,\n\terrorMessage,\n} = {}) {\n\tconst resp = await GET(url, { body, mode, credentials, referrerPolicy, headers,\n\t\tcache, redirect, priority, integrity, keepalive, signal, timeout, errorMessage });\n\n\treturn await resp.text();\n}\n\nexport async function getJSON(url, {\n\tbody = undefined,\n\tmode = 'cors',\n\tcache = 'default',\n\tcredentials = 'omit',\n\tredirect = 'follow',\n\treferrerPolicy = 'no-referrer',\n\tpriority = 'auto',\n\theaders = new Headers({ Accept: TYPES.JSON }),\n\tintegrity = undefined,\n\tkeepalive = undefined,\n\tsignal = undefined,\n\ttimeout = null,\n\terrorMessage,\n} = {}) {\n\tconst resp = await GET(url, { body, mode, credentials, referrerPolicy, headers,\n\t\tcache, redirect, priority, integrity, keepalive, signal, timeout, errorMessage });\n\n\treturn await resp.json();\n}\n\nexport async function getFile(url, {\n\tname = null,\n\tbody = undefined,\n\tmode = 'cors',\n\tcache = 'default',\n\tcredentials = 'omit',\n\tredirect = 'follow',\n\treferrerPolicy = 'no-referrer',\n\tpriority = 'auto',\n\theaders = new Headers(),\n\tintegrity = undefined,\n\tkeepalive = undefined,\n\tsignal = undefined,\n\ttimeout = null,\n\terrorMessage,\n} = {}) {\n\tif (typeof name !== 'string') {\n\t\tname = filename(url);\n\t}\n\n\tconst resp = await GET(url, { body, mode, credentials, referrerPolicy, headers,\n\t\tcache, redirect, priority, integrity, keepalive, signal, timeout, errorMessage });\n\n\tconst type = getType(resp);\n\treturn new File([await resp.blob()], name, { type });\n}\n\nexport async function submitForm(form) {\n\tif (typeof form === 'string') {\n\t\treturn await submitForm(document.forms[form]);\n\t} else if (form instanceof Event) {\n\t\tform.preventDefault();\n\t\treturn await submitForm(form.target);\n\t} else if (form instanceof HTMLFormElement) {\n\t\tswitch (form.method.toLowerCase()) {\n\t\t\tcase 'get':\n\t\t\t\treturn GET(form.action, { body: new FormData(form) });\n\n\t\t\tcase 'post':\n\t\t\t\treturn POST(form.action, { body: new FormData(form) });\n\n\t\t\tcase 'delete':\n\t\t\t\treturn DELETE(form.action, { body: new FormData(form) });\n\n\t\t\tdefault:\n\t\t\t\tthrow new Error(`Unsupported method: ${form.method}`);\n\t\t}\n\t}\n}\n\nexport const getManifest = callOnce(async function getManifest({ timeout, signal } = {}) {\n\tconst resp = await getLink('link[rel=\"manifest\"][href]', { timeout, signal });\n\treturn await resp.json();\n});\n\nexport async function getLink(link, { timeout, signal } = {}) {\n\tif (typeof link === 'string') {\n\t\treturn await getLink(document.querySelector(link, { timeout, signal }));\n\t} else if (! (link instanceof HTMLLinkElement)) {\n\t\tthrow new DOMException('Expected a <link>');\n\t} else if (link.href.length === 0) {\n\t\tthrow new DOMException('Missing `href` on <link>');\n\t} else {\n\t\tconst { href, integrity, type, referrerPolicy, crossOrigin } = link;\n\n\t\tlet credentials;\n\t\tconst mode = typeof crossOrigin === 'string' ? 'cors' : 'no-cors';\n\t\tconst headers = new Headers();\n\n\t\tif (mode === 'cors') {\n\t\t\tcredentials = crossOrigin === 'use-credentials' ? 'include' : 'omit';\n\t\t}\n\n\t\tif (typeof type === 'string') {\n\t\t\theaders.set('Accept', type);\n\t\t}\n\n\t\treturn await GET(href, { mode, credentials, headers, integrity, referrerPolicy, timeout, signal });\n\t}\n}\n\nexport async function postHTML(url, {\n\tbody = undefined,\n\tmode = 'cors',\n\tcache = 'default',\n\tcredentials = 'omit',\n\tredirect = 'follow',\n\treferrerPolicy = 'no-referrer',\n\tpriority = 'auto',\n\theaders = new Headers({ Accept: TYPES.HTML }),\n\tintegrity = undefined,\n\tkeepalive = undefined,\n\tsignal = undefined,\n\ttimeout = null,\n\thead = true,\n\tasFrag = true,\n\tsanitizer = undefined,\n\tpolicy,\n\terrorMessage,\n} = {}) {\n\tconst html = await postText(url, { body, mode, credentials, referrerPolicy, headers,\n\t\tcache, redirect, priority, integrity, keepalive, signal, timeout, errorMessage });\n\n\treturn parse(html, { head, asFrag, sanitizer, policy });\n}\n\nexport async function postJSON(url, {\n\tbody = undefined,\n\tmode = 'cors',\n\tcache = 'default',\n\tcredentials = 'omit',\n\tredirect = 'follow',\n\treferrerPolicy = 'no-referrer',\n\tpriority = 'auto',\n\theaders = new Headers({ Accept: TYPES.JSON }),\n\tintegrity = undefined,\n\tkeepalive = undefined,\n\tsignal = undefined,\n\ttimeout = null,\n\terrorMessage,\n} = {}) {\n\tconst resp = await POST(url, { body, mode, credentials, referrerPolicy, headers,\n\t\tcache, redirect, priority, integrity, keepalive, signal, timeout, errorMessage });\n\n\treturn await resp.json();\n}\n\nexport async function postText(url, {\n\tbody = undefined,\n\tmode = 'cors',\n\tcache = 'default',\n\tcredentials = 'omit',\n\tredirect = 'follow',\n\treferrerPolicy = 'no-referrer',\n\tpriority = 'auto',\n\theaders = new Headers({ Accept: TYPES.TEXT }),\n\tintegrity = undefined,\n\tkeepalive = undefined,\n\tsignal = undefined,\n\ttimeout = null,\n\terrorMessage,\n} = {}) {\n\tconst resp = await POST(url, { body, mode, credentials, referrerPolicy, headers,\n\t\tcache, redirect, priority, integrity, keepalive, signal, timeout, errorMessage });\n\n\treturn await resp.text();\n}\n\nexport function navigateTo(to, {\n\tparams = {},\n\tutm: {\n\t\tsource: utm_source,\n\t\tmedium: utm_medium = 'referral',\n\t\tcontent: utm_content,\n\t\tcampaign: utm_campaign,\n\t\tterm: utm_term,\n\t} = {},\n\tallowedOrigins = [],\n\trequirePath = false,\n\torigin = location.origin,\n} = {}) {\n\tconst url = new URL(to, origin);\n\n\tif (! Array.isArray(allowedOrigins)) {\n\t\tthrow new TypeError('`allowedOrigins` must be an array');\n\t} else if (! (url.origin === location.origin || allowedOrigins.includes(url.origin))) {\n\t\tthrow new TypeError(`${url.origin} is not an allowed origin`);\n\t} else if (requirePath && url.pathname.length === 1) {\n\t\tthrow new TypeError('`pathname` is required');\n\t} else if (! isObject(params)) {\n\t\tthrow new TypeError('Expected `params` to be an object');\n\t} else {\n\t\tif (typeof utm_source === 'string') {\n\t\t\tObject.entries({...params, utm_source, utm_medium, utm_content, utm_campaign, utm_term })\n\t\t\t\t.filter(([,v]) => ! isNullish(v))\n\t\t\t\t.forEach(([k, v]) => url.searchParams.set(k, v));\n\t\t} else {\n\t\t\tObject.entries(params)\n\t\t\t\t.filter(([,v]) => ! isNullish(v))\n\t\t\t\t.forEach(([k, v]) => url.searchParams.set(k, v));\n\t\t}\n\n\t\tlocation.href = url.href;\n\t}\n}\n\nexport function postNav(url, data = {}, {\n\ttarget = '_self' ,\n\tenctype = TYPES.FORM_URL_ENCODED,\n\tsignal,\n} = {}) {\n\tif (! (signal instanceof AbortSignal && signal.aborted)) {\n\t\tconst form = document.createElement('form');\n\t\tconst inputs = Object.entries(data).map(([name, value]) => {\n\t\t\tconst input = document.createElement('input');\n\t\t\tinput.name = name;\n\t\t\tinput.type = 'hidden';\n\t\t\tinput.readOnly = true;\n\t\t\tinput.value = value;\n\t\t\treturn input;\n\t\t});\n\n\t\tform.action = url;\n\t\tform.method = 'POST';\n\t\tform.target = target;\n\t\tform.enctype = enctype;\n\t\tform.hidden = true;\n\t\tform.append(...inputs);\n\t\tform.addEventListener('submit', ({ target }) => setTimeout(() => target.remove(), 100), { signal });\n\n\t\trequestAnimationFrame(() => {\n\t\t\tdocument.body.append(form);\n\t\t\tform.submit();\n\t\t});\n\t}\n}\n\nexport { setURLParams, setUTMParams };\n","/**\n * @copyright 2023 Chris Zuber <admin@kernvalley.us>\n */\nimport { JS } from './types.js';\nimport { createScript, createImage, createLink } from './elements.js';\nimport { getDeferred } from './promises.js';\nimport { getHTML } from './http.js';\nimport { callOnce } from './utility.js';\n\n/**\n * @deprecated\n */\nexport async function loadLink(...args) {\n\tconsole.warn('`loadLink()` is deprecated. Please us `createLink()` instead');\n\treturn createLink(...args);\n}\n\nexport function getTemplateLoader(url, {\n\tmode = 'cors',\n\tcredentials = 'omit',\n\tcache = 'default',\n\tredirect = 'follow',\n\treferrerPolicy = 'no-referrer',\n\tintegrity = undefined,\n\tpriority = 'auto',\n\tpolicy = 'trustedTypes' in globalThis ? trustedTypes.defaultPolicy : null,\n\tsanitizer,\n} = {}) {\n\tconst getTmp = callOnce(async ({ signal } = {}) => getHTML(url, {\n\t\tsignal, policy, sanitizer, cache, redirect, integrity, referrerPolicy,\n\t\tpriority, credentials, mode,\n\t}));\n\n\treturn ({ signal } = {}) => getTmp({ signal }).then(frag => frag.cloneNode(true));\n}\n\nexport async function preload(href, {\n\tas = 'fetch',\n\ttype = null,\n\tcrossOrigin = 'anonymous',\n\treferrerPolicy = 'no-referrer',\n\tfetchPriority = 'auto',\n\tmedia = null,\n\tintegrity = null,\n\tsignal,\n} = {}) {\n\tif (signal instanceof AbortSignal) {\n\t\tsignal.throwIfAborted();\n\t}\n\n\tconst link = createLink(href, {\n\t\trel: ['preload'], as, type, crossOrigin, referrerPolicy,\n\t\tfetchPriority, media, integrity,\n\t});\n\n\tdocument.head.append(link);\n\treturn link;\n}\n\nexport async function preconnect(href, {\n\tcrossOrigin = 'anonymous',\n\treferrerPolicy = 'no-referrer',\n\tsignal,\n} = {}) {\n\tif (signal instanceof AbortSignal) {\n\t\tsignal.throwIfAborted();\n\t}\n\n\tconst link = createLink(href, { rel: ['preconnect'], crossOrigin, referrerPolicy });\n\tdocument.head.append(link);\n\treturn link;\n}\n\nexport async function dnsPrefetch(href, {\n\tcrossOrigin = 'anonymous',\n\treferrerPolicy = 'no-referrer',\n\tsignal,\n} = {}) {\n\tif (signal instanceof AbortSignal) {\n\t\tsignal.throwIfAborted();\n\t}\n\n\tconst link = createLink(href, { rel: ['dsn-prefetch'], crossOrigin, referrerPolicy });\n\tdocument.head.append(link);\n\treturn link;\n}\n\nexport async function prerender(href, { signal } = {}) {\n\tif (signal instanceof AbortSignal) {\n\t\tsignal.throwIfAborted();\n\t}\n\n\tconst link = document.createElement('link');\n\tlink.relList.add('prerender');\n\tlink.href = href;\n\tdocument.head.append(link);\n\treturn link;\n}\n\nexport async function loadScript(src, {\n\tasync = true,\n\tdefer = false,\n\tblocking = null,\n\tnoModule = false,\n\ttype = JS,\n\tcrossOrigin = 'anonymous',\n\treferrerPolicy = 'no-referrer',\n\tintegrity = null,\n\tnonce = null,\n\tfetchPriority = 'auto',\n\tparent = document.head,\n\tpolicy = 'trustedTypes' in globalThis ? globalThis.trustedTypes.defaultPolicy : null,\n\tsignal,\n\tdata = {},\n} = {}) {\n\tconst { resolve, reject, promise } = getDeferred();\n\n\tif (signal instanceof AbortSignal && signal.aborted) {\n\t\treject(signal.reason);\n\t} else {\n\t\tconst controller = new AbortController();\n\t\tconst script = createScript(src, {\n\t\t\tasync, defer, noModule, type, crossOrigin, referrerPolicy, integrity,\n\t\t\tnonce, fetchPriority, policy, dataset: data, blocking,\n\t\t\tevents: {\n\t\t\t\tload: ({ target }) => {\n\t\t\t\t\tresolve(target);\n\t\t\t\t\tcontroller.abort();\n\t\t\t\t},\n\t\t\t\terror: ({ target }) => {\n\t\t\t\t\tconst err = new DOMException(`Error loading <script src=\"${target.src}\">`);\n\t\t\t\t\treject(err);\n\t\t\t\t\tcontroller.abort(err);\n\t\t\t\t},\n\t\t\t\tsignal: signal instanceof AbortSignal\n\t\t\t\t\t? AbortSignal.any([signal, controller.signal])\n\t\t\t\t\t: controller.signal,\n\t\t\t}\n\t\t});\n\n\t\tif (parent instanceof Element) {\n\t\t\tparent.append(script);\n\t\t} else {\n\t\t\tdocument.head.append(script);\n\t\t}\n\n\t\tif (signal instanceof AbortSignal) {\n\t\t\tsignal.addEventListener(\n\t\t\t\t'abort',\n\t\t\t\t({ target }) => {\n\t\t\t\t\treject(target.reason);\n\t\t\t\t\tcontroller.abort(target.reason);\n\n\t\t\t\t\tif (script.parentElement instanceof Element) {\n\t\t\t\t\t\tscript.remove();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{ once: true, signal: controller.signal });\n\t\t}\n\t}\n\n\treturn await promise;\n}\n\nexport async function loadStylesheet(href, {\n\trel = 'stylesheet',\n\tmedia = 'all',\n\tblocking = null,\n\tcrossOrigin = 'anonymous',\n\treferrerPolicy = 'no-referrer',\n\tintegrity = null,\n\tdisabled = false,\n\tfetchPriority = 'auto',\n\ttitle = null,\n\tnonce = null,\n\tparent = document.head,\n\tsignal,\n} = {}) {\n\tconst { resolve, reject, promise } = getDeferred();\n\n\tif (signal instanceof AbortSignal && signal.aborted) {\n\t\treject(signal.reason);\n\t} else {\n\t\tconst controller = new AbortController();\n\n\t\tconst link = await createLink(href, {\n\t\t\trel, media, crossOrigin, referrerPolicy, integrity, disabled, fetchPriority,\n\t\t\ttitle, nonce, blocking,\n\t\t\tevents: {\n\t\t\t\tload: ({ target }) => {\n\t\t\t\t\tresolve(target);\n\t\t\t\t\tcontroller.abort();\n\t\t\t\t},\n\t\t\t\terror: ({ target }) => {\n\t\t\t\t\tconst err = new DOMException(`Error loading <link href=\"${target.href}\">`);\n\t\t\t\t\treject(err);\n\t\t\t\t\tcontroller.abort(err);\n\t\t\t\t},\n\t\t\t\tsignal: signal instanceof AbortSignal\n\t\t\t\t\t? AbortSignal.any([signal, controller.signal])\n\t\t\t\t\t: controller.signal,\n\t\t\t}\n\t\t});\n\n\t\tif (signal instanceof AbortSignal) {\n\t\t\tsignal.addEventListener(\n\t\t\t\t'abort',\n\t\t\t\t({ target }) => {\n\t\t\t\t\treject(target.reason);\n\t\t\t\t\tcontroller.abort(target.reason);\n\n\t\t\t\t\tif (link.parentELement instanceof Element) {\n\t\t\t\t\t\tlink.disabled = true;\n\t\t\t\t\t\tlink.remove();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t{ once: true, signal: controller.signal });\n\t\t}\n\n\t\tparent.append(link);\n\t}\n\n\treturn await promise;\n}\n\nexport async function loadImage(src, {\n\tloading = 'eager',\n\tdecoding = 'async',\n\tcrossOrigin = 'anonymous',\n\treferrerPolicy = 'no-referrer',\n\tfetchPriority = 'auto',\n\tsizes = null,\n\tsrcset = null,\n\theight = undefined,\n\twidth = undefined,\n\tslot = null,\n\tpart = [],\n\tclasses = [],\n\tclassList = [],\n\trole = 'img',\n\talt = '',\n\tsignal,\n} = {}) {\n\tif (signal instanceof AbortSignal) {\n\t\tsignal.throwIfAborted();\n\t}\n\n\tif (Array.isArray(classes) && classes.length !== 0) {\n\t\tconsole.warn('`classes` is deprecated. Please use `classList` instead.');\n\t}\n\n\tconst img = createImage(src, {\n\t\tloading, decoding, crossOrigin, referrerPolicy, sizes, srcset, height,\n\t\twidth, slot, part, classList: [...classList, ...classes], role, alt, fetchPriority,\n\t});\n\n\tif (img.loading !== 'lazy') {\n\t\tawait img.decode();\n\t}\n\n\treturn img;\n}\n","/**\n * @copyright 2021-2023 Chris Zuber <admin@kernvalley.us>\n */\nimport { loadScript } from './loader.js';\nexport const trustPolicies = ['goog#html'];\n\nif (! Array.isArray(window.dataLayer)) {\n\twindow.dataLayer = [];\n}\n\nexport function ga(...args) {\n\tif (window.ga instanceof Function) {\n\t\treturn window.ga(...args);\n\t}\n}\n\nexport async function ready(timeout = 2000) {\n\tawait new Promise((resolve, reject) => {\n\t\tif (! hasGa()) {\n\t\t\treject(new DOMException('Google Analytics script not loaded'));\n\t\t} else {\n\t\t\tconst id = setTimeout(() => reject(new DOMException('GA ready callback timed-out')), timeout);\n\n\t\t\tga(() => {\n\t\t\t\tclearTimeout(id);\n\t\t\t\tresolve();\n\t\t\t});\n\t\t}\n\t});\n}\n\nexport function getUTMParams(search = window.location.search) {\n\tconst params = new URLSearchParams(search);\n\treturn  {\n\t\tcampaign: params.get('utm_campaign'),\n\t\tcontent: params.get('utm_content'),\n\t\tmedium: params.get('utm_medium'),\n\t\tsource: params.get('utm_source'),\n\t\tterm: params.get('utm_term'),\n\t};\n}\n\nexport async function create(...args) {\n\tawait ready();\n\treturn ga('create', ...args);\n}\n\nexport async function remove() {\n\tawait ready();\n\treturn ga('remove');\n}\n\nexport async function get(prop, timeout = 150) {\n\treturn await getTracker(timeout).then(tracker => tracker.get(prop));\n}\n\nexport async function getTracker(timeout = 150) {\n\tif (hasGa()) {\n\t\treturn await new Promise(async (resolve, reject) => {\n\t\t\tconst id = setTimeout(() => reject(new DOMException('Timeout obtaining tracker')), timeout);\n\n\t\t\tga(tracker => {\n\t\t\t\tif (typeof tracker !== 'undefined') {\n\t\t\t\t\tclearTimeout(id);\n\t\t\t\t\tresolve(tracker);\n\t\t\t\t} else {\n\t\t\t\t\treject(new DOMException('Unable to obtain GA tracker'));\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t} else {\n\t\tnew DOMException('Google Analytics script not loaded');\n\t}\n}\n\nexport async function set(...args) {\n\tawait ready();\n\treturn ga('set', ...args);\n}\n\nexport async function require(...args) {\n\tawait ready();\n\treturn ga('require', ...args);\n}\n\nexport async function provide(...args) {\n\tawait ready();\n\treturn ga('provide', ...args);\n}\n\nexport async function location(url = window.location.href) {\n\treturn set('page', url);\n}\n\nexport async function pageView(page = window.location.pathname) {\n\treturn send({ hitType: 'pageview', page });\n}\n\nexport async function send({\n\teventCategory,\n\teventAction,\n\teventValue,\n\teventLabel,\n\thitType       = 'event',\n\ttransport     = 'beacon',\n} = {}) {\n\tawait new Promise(async(hitCallback, reject) => {\n\t\tif (hasGa()) {\n\t\t\tawait ready();\n\t\t\tga('send', { hitType, eventCategory, eventAction, eventLabel,\n\t\t\t\teventValue, transport, hitCallback });\n\t\t} else {\n\t\t\treject(new Error('ga has not been successfully initialized'));\n\t\t}\n\t});\n}\n\nexport function gtag() {\n\twindow.dataLayer.push(arguments);\n}\n\nexport function hasGa() {\n\treturn window.ga instanceof Function;\n}\n\nexport async function importGa(id, params = {}, { policy } = {}) {\n\tconst url = new URL('https://www.googletagmanager.com/gtag/js');\n\turl.searchParams.set('id', id);\n\tObject.entries(params).forEach(([k, v]) => url.searchParams.set(k, v));\n\n\tawait loadScript(url.href, { crossOrigin: 'use-credentials', policy, }).then(() => {\n\t\tgtag('js', new Date());\n\t\tgtag('config', id);\n\t\tcreate(id, 'auto');\n\t}).catch(console.error);\n\n\treturn { gtag, ga, send, get, set, ready, create, remove, require,\n\t\tlocation, pageView, getTracker, getUTMParams, hasGa };\n}\n\nexport function externalHandler() {\n\tif (hasGa()) {\n\t\tsend({\n\t\t\thitType: 'event',\n\t\t\teventCategory: 'outbound',\n\t\t\teventAction: 'click',\n\t\t\teventLabel: this.href,\n\t\t\ttransport: 'beacon',\n\t\t});\n\t}\n}\n\nexport function telHandler() {\n\tif (hasGa()) {\n\t\tsend({\n\t\t\thitType: 'event',\n\t\t\teventCategory: 'call',\n\t\t\teventLabel: this.href.replace('tel:', '').trim(),\n\t\t\ttransport: 'beacon',\n\t\t});\n\t}\n}\n\nexport function mailtoHandler() {\n\tif (hasGa()) {\n\t\tsend({\n\t\t\thitType: 'event',\n\t\t\teventCategory: 'email',\n\t\t\teventLabel: this.href.replace('mailto:', '').trim(),\n\t\t\ttransport: 'beacon',\n\t\t});\n\t}\n}\n\nexport function geoHandler() {\n\tif (hasGa()) {\n\t\tsend({\n\t\t\thitType: 'event',\n\t\t\teventCategory: 'geo',\n\t\t\teventLabel: this.href.replace('geo:', '').trim(),\n\t\t\ttransport: 'beacon',\n\t\t});\n\t}\n}\n\nexport function genericHandler() {\n\tif (hasGa()) {\n\t\tconst {\n\t\t\thitType = 'event', eventCategory = 'unknown', eventLabel = 'unknown',\n\t\t\ttransport = 'beacon',\n\t\t} = this.dataset;\n\t\tsend({ hitType, eventCategory, eventLabel, transport });\n\t}\n}\n","export const name = '@shgysk8zer0/components';\nexport const version = '0.0.9';\nexport const url = `https://unpkg.com/${name}@${version}/`;\n","import { url } from './consts.js';\n\nexport const isModule = ! (document.currentScript instanceof HTMLScriptElement);\nexport const meta = isModule\n\t? { url: import.meta.url, resolve: path => import.meta.resolve(path) }\n\t: { url, resolve: path => new URL(path, url).href };\n","/**\n * @copyright 2023 Chris Zuber <admin@kernvalley.us>\n */\nexport const HTML = 'http://www.w3.org/1999/xhtml';\nexport const SVG = 'http://www.w3.org/2000/svg';\nexport const XLINK = 'http://www.w3.org/1999/xlink';\nexport const MATHML = 'http://www.w3.org/1998/Math/MathML';\n","/**\n * @copyright 2022-2023 Chris Zuber <admin@kernvalley.us>\n */\nimport { SVG, XLINK } from './namespaces.js';\nimport { isObject } from './utility.js';\nimport { css, data, attr } from './attrs.js';\nimport { SVG as TYPE } from './types.js';\nexport { rotate, scale, translate } from './animate.js';\n\nexport function createSVGFile(svg, { name = 'image.svg' } = {}) {\n\tif (svg instanceof SVGElement) {\n\t\treturn new File([svg.outerHTML], name, { type: TYPE });\n\t} else {\n\t\tthrow new TypeError('Expected an <svg>');\n\t}\n}\n\nexport function createSVGElement (tag, {\n\tfill, stroke, width, height, pathLength, children = [], id, classList = [],\n\tstyles, dataset,\n\tevents: {\n\t\tcapture,\n\t\tpassive,\n\t\tonce,\n\t\tsignal,\n\t\t...events\n\t} = {},\n\tanimation: {\n\t\tkeyframes,\n\t\tduration = 0,\n\t\tdelay = 0,\n\t\tendDelay = 0,\n\t\teasing = 'linear',\n\t\tdirection = 'normal',\n\t\tfill: svgFill = 'none',\n\t\titerations = 1,\n\t\titerationStart = 0,\n\t\tcomposite = 'replace',\n\t\titerationComposite = 'replace',\n\t\tpseudoElement,\n\t} = {},\n\t...rest } = {}) {\n\tconst el = document.createElementNS(SVG, tag);\n\t\n\tif (typeof id === 'string') {\n\t\tel.id = id;\n\t}\n\t\n\tif (Array.isArray(classList) && classList.length !== 0) {\n\t\tel.classList.add(...classList);\n\t}\n\n\tif (typeof fill === 'string') {\n\t\tel.setAttribute('fill', fill);\n\t}\n\n\tif (typeof stroke === 'string') {\n\t\tel.setAttribute('stroke', stroke);\n\t}\n\n\tif (typeof height === 'number' && ! Number.isNaN(height)) {\n\t\tel.setAttribute('height', height.toString());\n\t}\n\n\tif (typeof width === 'number' && ! Number.isNaN(width)) {\n\t\tel.setAttribute('width', width.toString());\n\t}\n\n\tif (typeof pathLength === 'number' && ! Number.isNaN(pathLength)) {\n\t\tel.setAttribute('pathLength', pathLength.toString());\n\t}\n\n\tif (typeof rest.title === 'string') {\n\t\tconst title = createSVGElement('title');\n\t\ttitle.textContent = rest.title;\n\t\tel.prepend(title);\n\t}\n\n\tif (Array.isArray(keyframes) || isObject(keyframes) && el.animate instanceof Function) {\n\t\tel.animate(keyframes, {\n\t\t\tduration, delay, endDelay, easing, direction, fill: svgFill, iterations,\n\t\t\titerationStart, composite, iterationComposite, pseudoElement,\n\t\t});\n\t}\n\t\n\tif (Array.isArray(children) && children.length !== 0) {\n\t\tel.append(...children.filter(node => (typeof node === 'string') || (node instanceof Element)));\n\t}\n\n\tif (isObject(styles)) {\n\t\tcss(el, styles);\n\t}\n\n\tif (isObject(events)) {\n\t\tObject.entries(events).forEach(\n\t\t\t([event, callback]) => el.addEventListener(event, callback, { capture, passive, once, signal })\n\t\t);\n\t}\n\n\tif (isObject(dataset)) {\n\t\tdata(el, dataset);\n\t}\n\n\tattr(el, rest);\n\n\treturn el;\n}\n\nexport function createSVG({\n\tid = null,\n\tfill = null,\n\tviewBox = null,\n\theight = null,\n\twidth = null,\n\tlabel = null,\n\tslot = null,\n\trole = 'img',\n\thidden = false,\n\tclassList = [],\n\tchildren = [],\n\tanimation,\n\tpart = [],\n\t...rest\n} = {}) {\n\tconst svg = createSVGElement('svg', { width, height, fill, animation, children, id, classList, ...rest });\n\n\tsvg.setAttribute('role', role);\n\tsvg.setAttribute('xmlns', SVG);\n\n\tif (typeof viewBox === 'string') {\n\t\tsvg.setAttributeNS(null, 'viewBox', viewBox);\n\t} else if (Array.isArray(viewBox)) {\n\t\tsvg.setAttributeNS(null, 'viewBox', viewBox.map(n => n.toString()).join(' '));\n\t}\n\n\tif (typeof label === 'string') {\n\t\tsvg.setAttribute('aria-label', label);\n\t}\n\n\tif (hidden === true) {\n\t\tsvg.setAttribute('aria-hidden', 'true');\n\t}\n\n\tif (typeof slot === 'string') {\n\t\tsvg.slot = slot;\n\t}\n\n\tif (Array.isArray(classList) && classList.length !== 0) {\n\t\tsvg.classList.add(...classList);\n\t}\n\n\tif (Array.isArray(part) && part.length !== 0) {\n\t\tif('part' in svg) {\n\t\t\tsvg.part.add(...part);\n\t\t} else {\n\t\t\tsvg.setAttribute('part', part.join(' '));\n\t\t}\n\t}\n\n\treturn svg;\n}\n\nexport function useSVG(sprite, {\n\tid = null,\n\tsrc = '/img/icons.svg',\n\tfill = null,\n\theight = null,\n\twidth = null,\n\tslot = null,\n\tpart = [],\n\tclassList = [],\n\tlabel = null,\n\tanimation,\n\t...rest\n} = {}) {\n\tconst svg = createSVG({ id, fill, height, width, classList, label, slot, part, animation, hidden: true, ...rest });\n\tconst use = createSVGElement('use');\n\n\tif (typeof src === 'string') {\n\t\tconst url = new URL(src, document.baseURI);\n\t\turl.hash = `#${sprite}`;\n\t\tuse.setAttributeNS(XLINK, 'xlink:href', url.href);\n\t} else {\n\t\tuse.setAttributeNS(XLINK, 'xlink:href', `#${sprite}`);\n\t}\n\n\tsvg.append(use);\n\n\treturn svg;\n}\n\nexport function createPath(d, { id, fill, stroke, pathLength, animation, ...rest } = {}) {\n\tconst path = createSVGElement('path', { id, fill, stroke, pathLength, animation, ...rest });\n\n\tif (Array.isArray(d) && d.length !== 0) {\n\t\tpath.setAttribute('d', d.join(' '));\n\t} else if (typeof d === 'string') {\n\t\tpath.setAttribute('d', d);\n\t} else {\n\t\tthrow new TypeError('Invalid `d` attribute in <path>.');\n\t}\n\n\treturn path;\n}\n\nexport function createGroup({ id, fill, stroke, children, animation, ...attrs }) {\n\treturn createSVGElement('g', { id, fill, stroke, children, animation, ...attrs });\n}\n\nexport function createRect({ id, width, height, x, y, rx, ry, fill, stroke, pathLength, animation, ...rest }) {\n\treturn createSVGElement('rect', { id, width, height, x, y, rx, ry, fill, stroke, pathLength, animation, ...rest });\n}\n\nexport function createCircle({ id, width, height, cx, cy, r, fill, stroke, pathLength, animation, ...rest }) {\n\treturn createSVGElement('circle', { id, width, height, cx, cy, r, fill, stroke, pathLength, animation, ...rest });\n}\n\nexport function createEllipse({ id, width, height, cx, cy, rx, ry, fill, stroke, pathLength, animation, ...rest }) {\n\treturn createSVGElement('ellipse', { id, width, height, cx, cy, rx, ry, fill, stroke, pathLength, animation, ...rest });\n}\n\nexport function createPolygon(points, { id, fill, stroke, pathLength, animation, ...rest } = {}) {\n\tconst polygon = createSVGElement('polygon', { id, fill, stroke, pathLength, animation, ...rest });\n\n\tif (Array.isArray(points) && points.length !== 0) {\n\t\tpolygon.setAttribute('points', points.map(([x, y]) => `${x},${y}`).join(' '));\n\t} else if (typeof points === 'string') {\n\t\tpolygon.setAttribute('points', points);\n\t} else {\n\t\tthrow new TypeError('Invalid `points` attribute in <polygon>.');\n\t}\n\n\treturn polygon;\n}\n\nexport function createPolyline(points, { id, fill, stroke, pathLength, animation, ...rest } = {}) {\n\tconst polyline = createSVGElement('polyline', { id, fill, stroke, pathLength, animation, ...rest });\n\n\tif (Array.isArray(points) && points.length !== 0) {\n\t\tpolyline.setAttribute('points', points.map(([x, y]) => `${x},${y}`).join(' '));\n\t} else if (typeof points === 'string') {\n\t\tpolyline.setAttribute('points', points);\n\t} else {\n\t\tthrow new TypeError('Invalid `points` attribute in <polygon>.');\n\t}\n\n\treturn polyline;\n}\n\nexport function createLine([[x1, y1], [x2, y2]], { id, fill, stroke, pathLength, animation, ...rest } = {}) {\n\tif (! [x1, x2, y1, y2].every(n => typeof n === 'number' && ! Number.isNaN(n))) {\n\t\tthrow new TypeError('Invalid coordinates in <line>.');\n\t} else {\n\t\treturn createSVGElement('line', { id, fill, stroke, x1, y1, x2, y2, pathLength, animation, ...rest });\n\t}\n}\n\nexport { TYPE };\n","/**\n * @copyright 2023 Chris Zuber <admin@kernvalley.us>\n */\nimport {\n\tcreateSVG, createPath, createGroup, createCircle, createRect, translate, rotate,\n} from './svg.js';\n\nconst role = 'presentation';\n\n/**\n * Adwaita Icons\n */\nexport function createAddressBookIcon({\n\tsize = 16,\n\tfill = 'currentColor',\n\tclassList = [],\n\tpart = [],\n\tslot,\n\tanimation,\n\t...rest\n} = {}) {\n\treturn createSVG({\n\t\tviewBox: [0, 0, 16, 16],\n\t\t...rest, height: size, width: size, fill, classList, part, slot, animation, role,\n\t\tchildren: [\n\t\t\tcreatePath('M1.189 14c0 1.09.91 2 2 2h8.823c1.09 0 2-.91 2-2V3c0-1.09-.91-2-2-2H3.189c-1.09 0-2 .91-2 2h10.823v11H1.189z', {\n\t\t\t\t'fill-rule': 'evenodd',\n\t\t\t}),\n\t\t\tcreatePath('M.594 12a.502.502 0 1 0 .093 1H2.5a.5.5 0 1 0 0-1H.687a.5.5 0 0 0-.093 0zm0-2a.502.502 0 1 0 .093 1H2.5a.5.5 0 1 0 0-1H.687a.5.5 0 0 0-.093 0zm0-2a.502.502 0 1 0 .093 1H2.5a.5.5 0 1 0 0-1H.687a.5.5 0 0 0-.093 0zm0-2a.502.502 0 1 0 .093 1H2.5a.5.5 0 1 0 0-1H.687a.5.5 0 0 0-.093 0zm0-2a.502.502 0 1 0 .093 1H2.5a.5.5 0 1 0 0-1H.687a.5.5 0 0 0-.093 0z', {\n\t\t\t\t'fill-rule': 'evenodd',\n\t\t\t}),\n\t\t\tcreatePath('M7 10c.328.066.666.007 1 0 .334-.007.669.04 1 0 .624-.074 1.196-.462 1.523-.998a2.41 2.41 0 0 0 .26-1.817A2.807 2.807 0 0 0 9.75 5.652 3.366 3.366 0 0 0 8.009 5a3.737 3.737 0 0 0-2.565.746 3.69 3.69 0 0 0-1.382 2.285 3.647 3.647 0 0 0 .185 1.895c.228.6.618 1.137 1.119 1.54.5.402 1.11.668 1.744.76A3.647 3.647 0 0 0 9 12v-1c-.453.299-1 .453-1.542.437a2.677 2.677 0 0 1-1.513-.53 2.676 2.676 0 0 1-.932-1.304A2.677 2.677 0 0 1 5 8a2.818 2.818 0 0 1 1.154-1.511A3.13 3.13 0 0 1 8 6c.537.026 1.082.193 1.483.551.2.18.362.404.456.656.095.252.12.53.061.793-.054.24-.18.464-.355.637a1.294 1.294 0 0 1-.645.34V8a1.628 1.628 0 0 0-.595-.737 1.628 1.628 0 0 0-.905-.277c-.32 0-.64.098-.905.277-.266.18-.476.44-.595.737-.158.394-.152.856.033 1.238.186.383.55.678.967.762m1.036-.977a.708.708 0 0 1-.814.132.707.707 0 0 1-.378-.732.707.707 0 0 1 .453-.554A.706.706 0 0 1 8 8', {\n\t\t\t\t'letter-spacing': '0',\n\t\t\t\t'word-spacing': '0',\n\t\t\t})\n\t\t]\n\t});\n}\n\nexport function createAlertIcon({\n\tsize = 16,\n\tfill = 'currentColor',\n\tclassList = [],\n\tpart = [],\n\tslot,\n\tanimation,\n\t...rest\n} = {}) {\n\treturn createSVG({\n\t\tviewBox: [0, 0, 16, 16],\n\t\t...rest, height: size, width: size, fill, classList, part, slot, animation, role,\n\t\tchildren: [\n\t\t\tcreatePath('M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z', {\n\t\t\t\t'fill-rule': 'evenodd',\n\t\t\t})\n\t\t]\n\t});\n}\n\nexport  function createAppsIcon({\n\tsize = 16,\n\tfill = 'currentColor',\n\tclassList = [],\n\tpart = [],\n\tslot,\n\tanimation,\n\t...rest\n} = {}) {\n\treturn createSVG({\n\t\tviewBox: [0, 0,24, 24],\n\t\t...rest, height: size, width: size, fill, classList, part, slot, animation, role,\n\t\tchildren: [\n\t\t\tcreatePath('M 15.9994,19.9981L 19.9994,19.9981L 19.9994,15.9981L 15.9994,15.9981M 15.9994,13.9981L 19.9994,13.9981L 19.9994,9.99807L 15.9994,9.99807M 9.99938,7.99807L 13.9994,7.99807L 13.9994,3.99807L 9.99938,3.99807M 15.9994,7.99807L 19.9994,7.99807L 19.9994,3.99807L 15.9994,3.99807M 9.99938,13.9981L 13.9994,13.9981L 13.9994,9.99807L 9.99938,9.99807M 3.99938,13.9981L 7.99938,13.9981L 7.99938,9.99807L 3.99938,9.99807M 3.99938,19.9981L 7.99938,19.9981L 7.99938,15.9981L 3.99938,15.9981M 9.99938,19.9981L 13.9994,19.9981L 13.9994,15.9981L 9.99938,15.9981M 3.99938,7.99807L 7.99938,7.99807L 7.99938,3.99807L 3.99938,3.99807L 3.99938,7.99807 Z', {\n\t\t\t\t'stroke-width': 0.2,\n\t\t\t\t'stroke-linejoin': 'round',\n\t\t\t})\n\t\t]\n\t});\n}\n\nexport function createBellIcon({\n\tsize = 16,\n\tfill = 'currentColor',\n\tclassList = [],\n\tpart = [],\n\tslot,\n\tanimation,\n\t...rest\n} = {}) {\n\treturn createSVG({\n\t\tviewBox: [0, 0, 14, 16],\n\t\t...rest, height: size, width: parseInt(14 * (size / 16)), fill, classList, part, slot, animation, role,\n\t\tchildren: [\n\t\t\tcreatePath('M13.99 11.991v1H0v-1l.73-.58c.769-.769.809-2.547 1.189-4.416.77-3.767 4.077-4.996 4.077-4.996 0-.55.45-1 .999-1 .55 0 1 .45 1 1 0 0 3.387 1.229 4.156 4.996.38 1.879.42 3.657 1.19 4.417l.659.58h-.01zM6.995 15.99c1.11 0 1.999-.89 1.999-1.999H4.996c0 1.11.89 1.999 1.999 1.999z', {\n\t\t\t\t'fill-rule': 'evenodd',\n\t\t\t})\n\t\t]\n\t});\n}\n\n/**\n * Adwaita Icons\n */\nexport function createCallStartIcon({\n\tsize = 16,\n\tfill = 'currentColor',\n\tclassList = [],\n\tpart = [],\n\tslot,\n\tanimation,\n\t...rest\n} = {}) {\n\treturn createSVG({\n\t\tviewBox: [0, 0, 16, 16],\n\t\t...rest, height: size, width: size, fill, classList, part, slot, animation, role,\n\t\tchildren: [\n\t\t\tcreatePath('M13.032 1c.534 0 .969.427.969.969v.062c-.017 6.613-5.383 11.97-12 11.97H1.97c-.545 0-.97-.447-.97-1v-3c0-.555.447-1 1-1h2c.555 0 1 .445 1 1v.468A8.967 8.967 0 0 0 10.47 5H10c-.553 0-1-.446-1-1V2c0-.554.447-1 1-1h3.032z', {\n\t\t\t\t'overflow': 'visible',\n\t\t\t})\n\t\t]\n\t});\n}\n\nexport function createCheckIcon({\n\tsize = 16,\n\tfill = 'currentColor',\n\tclassList = [],\n\tpart = [],\n\tslot,\n\tanimation,\n\t...rest\n} = {}) {\n\treturn createSVG({\n\t\tviewBox: [0, 0, 16, 16],\n\t\t...rest, height: size, width: size, fill, classList, part, slot, animation, role,\n\t\tchildren: [\n\t\t\tcreatePath('M12 5l-8 8-4-4 1.5-1.5L4 10l6.5-6.5L12 5z', {\n\t\t\t\t'fill-rule': 'evenodd',\n\t\t\t})\n\t\t]\n\t});\n}\n\nexport function createCreditCardIcon({\n\tsize = 16,\n\tfill = 'currentColor',\n\tclassList = [],\n\tpart = [],\n\tslot,\n\tanimation,\n\t...rest\n} = {}) {\n\treturn createSVG({\n\t\tviewBox: [0, 0, 16, 16],\n\t\t...rest, height: size, width: size, fill, classList, part, slot, animation, role,\n\t\tchildren: [\n\t\t\tcreatePath('M12 9H2V8h10v1zm4-6v9c0 .55-.45 1-1 1H1c-.55 0-1-.45-1-1V3c0-.55.45-1 1-1h14c.55 0 1 .45 1 1zm-1 3H1v6h14V6zm0-3H1v1h14V3zm-9 7H2v1h4v-1z', {\n\t\t\t\t'fill-rule': 'evenodd',\n\t\t\t})\n\t\t]\n\t});\n}\n\nexport function createCommentIcon({\n\tsize = 16,\n\tfill = 'currentColor',\n\tclassList = [],\n\tpart = [],\n\tslot,\n\tanimation,\n\t...rest\n} = {}) {\n\treturn createSVG({\n\t\tviewBox: [0, 0, 16, 16],\n\t\t...rest, height: size, width: size, fill, classList, part, slot, animation, role,\n\t\tchildren: [\n\t\t\tcreatePath('M14 1H2c-.55 0-1 .45-1 1v8c0 .55.45 1 1 1h2v3.5L7.5 11H14c.55 0 1-.45 1-1V2c0-.55-.45-1-1-1zm0 9H7l-2 2v-2H2V2h12v8z', {\n\t\t\t\t'fill-rule': 'evenodd',\n\t\t\t})\n\t\t]\n\t});\n}\n\n/**\n * Adwaita Icons\n */\nexport function createContactNewIcon({\n\tsize = 16,\n\tfill = 'currentColor',\n\tclassList = [],\n\tpart = [],\n\tslot,\n\tanimation,\n\t...rest\n} = {}) {\n\treturn createSVG({\n\t\tviewBox: [0, 0, 16, 16],\n\t\t...rest, height: size, width: size, fill, classList, part, slot, animation, role,\n\t\tchildren: [\n\t\t\tcreateGroup({\n\t\t\t\ttransform: translate(-261, -727),\n\t\t\t\tchildren: [\n\t\t\t\t\tcreatePath('M269.55 735.09c-.705.624-1.54.906-2.555.906s-1.853-.29-2.558-.914c-1.11.363-2.436 1.288-2.438 2.902l-.004 3.012c0 .554.446 1 1 1h8c.554 0 1-.446 1-1v-3c0-1.387-1.102-2.556-2.445-2.906z'),\n\t\t\t\t\tcreateCircle({ cx: 49.5, cy: 342.5, r: 2.5, transform: 'matrix(1.2 0 0 1.2 207.6 321)' }),\n\t\t\t\t\tcreatePath('M273 728v1.997h-2v1.996h2v1.997h2v-1.997h2v-1.996h-2V728z')\n\t\t\t\t]\n\t\t\t}),\n\t\t\tcreatePath('M14 1H2c-.55 0-1 .45-1 1v8c0 .55.45 1 1 1h2v3.5L7.5 11H14c.55 0 1-.45 1-1V2c0-.55-.45-1-1-1zm0 9H7l-2 2v-2H2V2h12v8z', {\n\t\t\t\t'fill-rule': 'evenodd',\n\t\t\t})\n\t\t]\n\t});\n}\n\n/**\n * Adwaita Icons\n */\nexport function createDialogPasswordIcon({\n\tsize = 16,\n\tfill = 'currentColor',\n\tclassList = [],\n\tpart = [],\n\tslot,\n\tanimation,\n\t...rest\n} = {}) {\n\treturn createSVG({\n\t\tviewBox: [0, 0, 16, 16],\n\t\t...rest, height: size, width: size, fill, classList, part, slot, animation, role,\n\t\tchildren: [\n\t\t\tcreatePath('M5 3C2.25 3 0 5.25 0 8s2.25 5 5 5c1.586 0 2.903-.845 3.813-2h5.593l.22-.75 1.03-4L15.97 5H8.813C7.903 3.845 6.586 3 5 3zm0 2c1.116 0 2.038.595 2.563 1.5l.312.5h5.531l-.53 2H7.874l-.312.5C7.038 10.405 6.116 11 5 11c-1.669 0-3-1.331-3-3s1.331-3 3-3z', {\n\t\t\t\t'overflow': 'visible',\n\t\t\t}),\n\t\t\tcreatePath('M14.498 8H9l-.563 2H14z', {\n\t\t\t\t'overflow': 'visible',\n\t\t\t\t'opacity': 0.35,\n\t\t\t}),\n\t\t\tcreatePath('M5 8a1 1 0 1 1-2 0 1 1 0 1 1 2 0z', {\n\t\t\t\t'overflow': 'visible',\n\t\t\t}),\n\t\t]\n\t});\n}\n\nexport function createFileIcon({\n\tsize = 16,\n\tfill = 'currentColor',\n\tclassList = [],\n\tpart = [],\n\tslot,\n\tanimation,\n\t...rest\n} = {}) {\n\treturn createSVG({\n\t\tviewBox: [0, 0, 12, 16],\n\t\t...rest, height: size, width: parseInt(12 * (size / 16)), fill, classList, part, slot, animation, role,\n\t\tchildren: [\n\t\t\tcreatePath('M6 5H2V4h4v1zM2 8h7V7H2v1zm0 2h7V9H2v1zm0 2h7v-1H2v1zm10-7.5V14c0 .55-.45 1-1 1H1c-.55 0-1-.45-1-1V2c0-.55.45-1 1-1h7.5L12 4.5zM11 5L8 2H1v12h10V5z', {\n\t\t\t\t'fill-rule': 'evenodd',\n\t\t\t})\n\t\t]\n\t});\n}\n\nexport function createFileCodeIcon({\n\tsize = 16,\n\tfill = 'currentColor',\n\tclassList = [],\n\tpart = [],\n\tslot,\n\tanimation,\n\t...rest\n} = {}) {\n\treturn createSVG({\n\t\tviewBox: [0, 0, 12, 16],\n\t\t...rest, height: size, width: parseInt(12 * (size / 16)), fill, classList, part, slot, animation, role,\n\t\tchildren: [\n\t\t\tcreatePath('M8.5 1H1c-.55 0-1 .45-1 1v12c0 .55.45 1 1 1h10c.55 0 1-.45 1-1V4.5L8.5 1zM11 14H1V2h7l3 3v9zM5 6.98L3.5 8.5 5 10l-.5 1L2 8.5 4.5 6l.5.98zM7.5 6L10 8.5 7.5 11l-.5-.98L8.5 8.5 7 7l.5-1z', {\n\t\t\t\t'fill-rule': 'evenodd',\n\t\t\t})\n\t\t]\n\t});\n}\n\nexport function createFileMediaIcon({\n\tsize = 16,\n\tfill = 'currentColor',\n\tclassList = [],\n\tpart = [],\n\tslot,\n\tanimation,\n\t...rest\n} = {}) {\n\treturn createSVG({\n\t\tviewBox: [0, 0, 12, 16],\n\t\t...rest, height: size, width: parseInt(12 * (size / 16)), fill, classList, part, slot, animation, role,\n\t\tchildren: [\n\t\t\tcreatePath('M6 5h2v2H6V5zm6-.5V14c0 .55-.45 1-1 1H1c-.55 0-1-.45-1-1V2c0-.55.45-1 1-1h7.5L12 4.5zM11 5L8 2H1v11l3-5 2 4 2-2 3 3V5z', {\n\t\t\t\t'fill-rule': 'evenodd',\n\t\t\t})\n\t\t]\n\t});\n}\n\nexport function createFilePDFIcon({\n\tsize = 16,\n\tfill = 'currentColor',\n\tclassList = [],\n\tpart = [],\n\tslot,\n\tanimation,\n\t...rest\n} = {}) {\n\treturn createSVG({\n\t\tviewBox: [0, 0, 12, 16],\n\t\t...rest, height: size, width: parseInt(12 * (size / 16)), fill, classList, part, slot, animation, role,\n\t\tchildren: [\n\t\t\tcreatePath('M8.5 1H1a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1V4.5L8.5 1zM1 2h4a.68.68 0 0 0-.31.2 1.08 1.08 0 0 0-.23.47 4.22 4.22 0 0 0-.09 1.47c.06.609.173 1.211.34 1.8A21.78 21.78 0 0 1 3.6 8.6c-.5 1-.8 1.66-.91 1.84a7.161 7.161 0 0 0-.69.3 4.19 4.19 0 0 0-1 .64V2zm4.42 4.8a5.65 5.65 0 0 0 1.17 2.09c.275.237.595.417.94.53-.64.09-1.23.2-1.81.33a12.22 12.22 0 0 0-1.81.59c-.587.243.22-.44.61-1.25.365-.74.67-1.51.91-2.3l-.01.01zM11 14H1.5a.743.743 0 0 1-.17 0 2.12 2.12 0 0 0 .73-.44 10.14 10.14 0 0 0 1.78-2.38c.31-.13.58-.23.81-.31l.42-.14c.45-.13.94-.23 1.44-.33s1-.16 1.48-.2c.447.216.912.394 1.39.53.403.11.814.188 1.23.23h.38V14H11zm0-4.86a3.74 3.74 0 0 0-.64-.28 4.22 4.22 0 0 0-.75-.11c-.411.003-.822.03-1.23.08a3 3 0 0 1-1-.64 6.07 6.07 0 0 1-1.29-2.33c.111-.662.178-1.33.2-2 .02-.25.02-.5 0-.75a1.05 1.05 0 0 0-.2-.88.82.82 0 0 0-.61-.23H8l3 3v4.14z', {\n\t\t\t\t'fill-rule': 'evenodd',\n\t\t\t})\n\t\t]\n\t});\n}\n\nexport function createFileZipIcon({\n\tsize = 16,\n\tfill = 'currentColor',\n\tclassList = [],\n\tpart = [],\n\tslot,\n\tanimation,\n\t...rest\n} = {}) {\n\treturn createSVG({\n\t\tviewBox: [0, 0, 12, 16],\n\t\t...rest, height: size, width: parseInt(12 * (size / 16)), fill, classList, part, slot, animation, role,\n\t\tchildren: [\n\t\t\tcreatePath('M8.5 1H1a1 1 0 0 0-1 1v12a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1V4.5L8.5 1zM11 14H1V2h3v1h1V2h3l3 3v9zM5 4V3h1v1H5zM4 4h1v1H4V4zm1 2V5h1v1H5zM4 6h1v1H4V6zm1 2V7h1v1H5zM4 9.28A2 2 0 0 0 3 11v1h4v-1a2 2 0 0 0-2-2V8H4v1.28zM6 10v1H4v-1h2z', {\n\t\t\t\t'fill-rule': 'evenodd',\n\t\t\t})\n\t\t]\n\t});\n}\n\n\n\nexport function createFindLocationIcon({\n\tsize = 16,\n\tfill = 'currentColor',\n\tclassList = [],\n\tpart = [],\n\tslot,\n\tanimation,\n\t...rest\n} = {}) {\n\treturn createSVG({\n\t\tviewBox: [0, 0, 16, 16],\n\t\t...rest, height: size, width: size, fill, classList, part, slot, animation, role,\n\t\tchildren: [\n\t\t\tcreatePath('M7 0v1.031A6.514 6.514 0 0 0 1.062 7H0v1h1.063A6.514 6.514 0 0 0 7 13.969V15h1v-1.031c3.188-.234 5.724-2.78 5.969-5.969H15V7h-1.031C13.724 3.811 11.189 1.233 8 1V0zm.531 2.813c2.607 0 4.688 2.08 4.688 4.687s-2.081 4.688-4.688 4.688c-2.606 0-4.75-2.082-4.75-4.688s2.144-4.688 4.75-4.688zM7.5 4a3.5 3.5 0 1 0 0 7 3.5 3.5 0 0 0 0-7z')\n\t\t]\n\t});\n}\n\nexport function createGrabberIcon({\n\tsize = 16,\n\tfill = 'currentColor',\n\tclassList = [],\n\tpart = [],\n\tslot,\n\tanimation,\n\t...rest\n} = {}) {\n\treturn createSVG({\n\t\tviewBox: [0, 0, 8, 16],\n\t\t...rest, height: size, width: parseInt(8 * (size / 16)), fill, classList, part, slot, animation, role,\n\t\tchildren: [\n\t\t\tcreatePath('M8 4v1H0V4h8zM0 8h8V7H0v1zm0 3h8v-1H0v1z', { 'fill-rule': 'evenodd' })\n\t\t]\n\t});\n}\n\nexport function createGlobeIcon({\n\tsize = 16,\n\tfill = 'currentColor',\n\tclassList = [],\n\tpart = [],\n\tslot,\n\tanimation,\n\t...rest\n} = {}) {\n\treturn createSVG({\n\t\tviewBox: [0, 0, 14, 16],\n\t\t...rest, height: size, width: parseInt(14 * (size / 16)), fill, classList, part, slot, animation, role,\n\t\tchildren: [\n\t\t\tcreatePath('M7 1C3.14 1 0 4.14 0 8s3.14 7 7 7c.48 0 .94-.05 1.38-.14-.17-.08-.2-.73-.02-1.09.19-.41.81-1.45.2-1.8-.61-.35-.44-.5-.81-.91-.37-.41-.22-.47-.25-.58-.08-.34.36-.89.39-.94.02-.06.02-.27 0-.33 0-.08-.27-.22-.34-.23-.06 0-.11.11-.2.13-.09.02-.5-.25-.59-.33-.09-.08-.14-.23-.27-.34-.13-.13-.14-.03-.33-.11s-.8-.31-1.28-.48c-.48-.19-.52-.47-.52-.66-.02-.2-.3-.47-.42-.67-.14-.2-.16-.47-.2-.41-.04.06.25.78.2.81-.05.02-.16-.2-.3-.38-.14-.19.14-.09-.3-.95s.14-1.3.17-1.75c.03-.45.38.17.19-.13-.19-.3 0-.89-.14-1.11-.13-.22-.88.25-.88.25.02-.22.69-.58 1.16-.92.47-.34.78-.06 1.16.05.39.13.41.09.28-.05-.13-.13.06-.17.36-.13.28.05.38.41.83.36.47-.03.05.09.11.22s-.06.11-.38.3c-.3.2.02.22.55.61s.38-.25.31-.55c-.07-.3.39-.06.39-.06.33.22.27.02.5.08.23.06.91.64.91.64-.83.44-.31.48-.17.59.14.11-.28.3-.28.3-.17-.17-.19.02-.3.08-.11.06-.02.22-.02.22-.56.09-.44.69-.42.83 0 .14-.38.36-.47.58-.09.2.25.64.06.66-.19.03-.34-.66-1.31-.41-.3.08-.94.41-.59 1.08.36.69.92-.19 1.11-.09.19.1-.06.53-.02.55.04.02.53.02.56.61.03.59.77.53.92.55.17 0 .7-.44.77-.45.06-.03.38-.28 1.03.09.66.36.98.31 1.2.47.22.16.08.47.28.58.2.11 1.06-.03 1.28.31.22.34-.88 2.09-1.22 2.28-.34.19-.48.64-.84.92s-.81.64-1.27.91c-.41.23-.47.66-.66.8 3.14-.7 5.48-3.5 5.48-6.84 0-3.86-3.14-7-7-7L7 1zm1.64 6.56c-.09.03-.28.22-.78-.08-.48-.3-.81-.23-.86-.28 0 0-.05-.11.17-.14.44-.05.98.41 1.11.41.13 0 .19-.13.41-.05.22.08.05.13-.05.14zM6.34 1.7c-.05-.03.03-.08.09-.14.03-.03.02-.11.05-.14.11-.11.61-.25.52.03-.11.27-.58.3-.66.25zm1.23.89c-.19-.02-.58-.05-.52-.14.3-.28-.09-.38-.34-.38-.25-.02-.34-.16-.22-.19.12-.03.61.02.7.08.08.06.52.25.55.38.02.13 0 .25-.17.25zm1.47-.05c-.14.09-.83-.41-.95-.52-.56-.48-.89-.31-1-.41-.11-.1-.08-.19.11-.34.19-.15.69.06 1 .09.3.03.66.27.66.55.02.25.33.5.19.63h-.01z', {\n\t\t\t\t'fill-rule': 'evenodd',\n\t\t\t})\n\t\t]\n\t});\n}\n\nexport function createHeartIcon({\n\tsize = 16,\n\tfill = 'currentColor',\n\tclassList = [],\n\tpart = [],\n\tslot,\n\tanimation,\n\t...rest\n} = {}) {\n\treturn createSVG({\n\t\tviewBox: [0, 0, 12, 16],\n\t\t...rest, height: size, width: parseInt(12 * (size / 16)), fill, classList, part, slot, animation, role,\n\t\tchildren: [\n\t\t\tcreatePath('M9 2c-.97 0-1.69.42-2.2 1-.51.58-.78.92-.8 1-.02-.08-.28-.42-.8-1-.52-.58-1.17-1-2.2-1-1.632.086-2.954 1.333-3 3 0 .52.09 1.52.67 2.67C1.25 8.82 3.01 10.61 6 13c2.98-2.39 4.77-4.17 5.34-5.33C11.91 6.51 12 5.5 12 5c-.047-1.69-1.342-2.913-3-3z', {\n\t\t\t\t'fill-rule': 'evenodd',\n\t\t\t})\n\t\t]\n\t});\n}\n\nexport function createInfoIcon({\n\tsize = 16,\n\tfill = 'currentColor',\n\tclassList = [],\n\tpart = [],\n\tslot,\n\tanimation,\n\t...rest\n} = {}) {\n\treturn createSVG({\n\t\tviewBox: [0, 0, 14, 16],\n\t\t...rest, height: size, width: parseInt(14 * (size / 16)), fill, classList, part, slot, animation, role,\n\t\tchildren: [\n\t\t\tcreatePath('M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z', {\n\t\t\t\t'fill-rule': 'evenodd',\n\t\t\t})\n\t\t]\n\t});\n}\n\nexport function createLinkIcon({\n\tsize = 16,\n\tfill = 'currentColor',\n\tclassList = [],\n\tpart = [],\n\tslot,\n\tanimation,\n\t...rest\n} = {}) {\n\treturn createSVG({\n\t\tviewBox: [0, 0, 16, 16],\n\t\t...rest, height: size, width: size, fill, classList, part, slot, animation, role,\n\t\tchildren: [\n\t\t\tcreatePath('M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z', {\n\t\t\t\t'fill-rule': 'evenodd',\n\t\t\t})\n\t\t]\n\t});\n}\n\nexport function createLinkExternalIcon({\n\tsize = 16,\n\tfill = 'currentColor',\n\tclassList = [],\n\tpart = [],\n\tslot,\n\tanimation,\n\t...rest\n} = {}) {\n\treturn createSVG({\n\t\tviewBox: [0, 0, 12, 16],\n\t\t...rest, height: size, width: parseInt(12 * (size / 16)), fill, classList, part, slot, animation, role,\n\t\tchildren: [\n\t\t\tcreatePath('M11 10h1v3c0 .55-.45 1-1 1H1c-.55 0-1-.45-1-1V3c0-.55.45-1 1-1h3v1H1v10h10v-3zM6 2l2.25 2.25L5 7.5 6.5 9l3.25-3.25L12 8V2H6z', {\n\t\t\t\t'fill-rule': 'evenodd',\n\t\t\t})\n\t\t]\n\t});\n}\n\nexport function createMarkLocationIcon({\n\tsize = 16,\n\tfill = 'currentColor',\n\tclassList = [],\n\tpart = [],\n\tslot,\n\tanimation,\n\t...rest\n} = {}) {\n\treturn createSVG({\n\t\tviewBox: [0, 0, 16, 16],\n\t\t...rest, height: size, width: size, fill, classList, part, slot, animation, role,\n\t\tchildren: [\n\t\t\tcreatePath('M8 0a5 5 0 0 0-5 5c0 .173.014.332.031.5.014.167.036.336.063.5C3.666 9.514 6 12.003 8 14.003c2-2 4.334-4.489 4.906-8.003a6.38 6.38 0 0 0 .063-.5c.017-.168.03-.327.03-.5a5 5 0 0 0-5-5zm0 3a2 2 0 1 1 0 4 2 2 0 0 1 0-4z')\n\t\t]\n\t});\n}\n\n/**\n * Adwaita Icons\n */\nexport function createOpenMenuIcon({\n\tsize = 16,\n\tfill = 'currentColor',\n\tclassList = [],\n\tpart = [],\n\tslot,\n\tanimation,\n\t...rest\n} = {}) {\n\treturn createSVG({\n\t\tviewBox: [0, 0, 16, 16],\n\t\t...rest, height: size, width: size, fill, classList, part, slot, animation, role,\n\t\tchildren: [\n\t\t\tcreatePath('M3 3h10v2H3zm0 4h10v2H3zm0 4h10v2H3z')\n\t\t]\n\t});\n}\n\n/**\n * Adwaita Icons\n */\nexport function createPublicShareIcon({\n\tsize = 16,\n\tfill = 'currentColor',\n\tclassList = [],\n\tpart = [],\n\tslot,\n\tanimation,\n\t...rest\n} = {}) {\n\treturn createSVG({\n\t\tviewBox: [0, 0, 16, 16],\n\t\t...rest, height: size, width: size, fill, classList, part, slot, animation, role,\n\t\tchildren: [\n\t\t\tcreatePath('M5.969 7.969a2.969 2.969 0 1 1-5.938 0 2.969 2.969 0 1 1 5.938 0zm9.969 5a2.969 2.969 0 1 1-5.938 0 2.969 2.969 0 1 1 5.938 0zm0-10a2.969 2.969 0 1 1-5.938 0 2.969 2.969 0 1 1 5.938 0z', {\n\t\t\t\t'overflow': 'visible',\n\t\t\t}),\n\t\t\tcreatePath('M12.625 2.156L2.562 7.031.75 7.938l1.812.906 10.032 5.062.906-1.812-8.22-4.156 8.219-4-.875-1.782z', {\n\t\t\t\t'overflow': 'visible',\n\t\t\t})\n\t\t]\n\t});\n}\n\nexport function createLockIcon({\n\tsize = 16,\n\tfill = 'currentColor',\n\tclassList = [],\n\tpart = [],\n\tslot,\n\tanimation,\n\t...rest\n} = {}) {\n\treturn createSVG({\n\t\tviewBox: [0, 0, 12, 16],\n\t\t...rest, height: size, width: parseInt(12 * (size / 16)), fill, classList, part, slot, animation, role,\n\t\tchildren: [\n\t\t\tcreatePath('M4 13H3v-1h1v1zm8-6v7c0 .55-.45 1-1 1H1c-.55 0-1-.45-1-1V7c0-.55.45-1 1-1h1V4c0-2.2 1.8-4 4-4s4 1.8 4 4v2h1c.55 0 1 .45 1 1zM3.8 6h4.41V4c0-1.22-.98-2.2-2.2-2.2-1.22 0-2.2.98-2.2 2.2v2H3.8zM11 7H2v7h9V7zM4 8H3v1h1V8zm0 2H3v1h1v-1z', {\n\t\t\t\t'fill-rule': 'evenodd',\n\t\t\t})\n\t\t]\n\t});\n}\n\nexport function createMailIcon({\n\tsize = 16,\n\tfill = 'currentColor',\n\tclassList = [],\n\tpart = [],\n\tslot,\n\tanimation,\n\t...rest\n} = {}) {\n\treturn createSVG({\n\t\tviewBox: [0, 0, 14, 16],\n\t\t...rest, height: size, width: parseInt(14 * (size / 16)), fill, classList, part, slot, animation, role,\n\t\tchildren: [\n\t\t\tcreatePath('M0 4v8c0 .55.45 1 1 1h12c.55 0 1-.45 1-1V4c0-.55-.45-1-1-1H1c-.55 0-1 .45-1 1zm13 0L7 9 1 4h12zM1 5.5l4 3-4 3v-6zM2 12l3.5-3L7 10.5 8.5 9l3.5 3H2zm11-.5l-4-3 4-3v6z', {\n\t\t\t\t'fill-rule': 'evenodd',\n\t\t\t})\n\t\t]\n\t});\n}\n\nexport function createMapIcon({\n\tsize = 16,\n\tfill = 'currentColor',\n\tclassList = [],\n\tpart = [],\n\tslot,\n\tanimation,\n\t...rest\n} = {}) {\n\treturn createSVG({\n\t\tviewBox: [0, 0, 48, 48],\n\t\t...rest, height: size, width: size, fill, classList, part, slot, animation, role,\n\t\tchildren: [\n\t\t\tcreatePath('M41 6c-.11 0-.21.01-.31.05L30 10.2 18 6 6.73 9.8c-.42.14-.73.5-.73.96V41c0 .55.45 1 1 1 .11 0 .21-.01.31-.05L18 37.8 30 42l11.28-3.79c.42-.15.72-.51.72-.97V7c0-.55-.45-1-1-1zM30 38l-12-4.21V10l12 4.21V38z')\n\t\t]\n\t});\n}\n\nexport function createPersonIcon({\n\tsize = 16,\n\tfill = 'currentColor',\n\tclassList = [],\n\tpart = [],\n\tslot,\n\tanimation,\n\t...rest\n} = {}) {\n\treturn createSVG({\n\t\tviewBox: [0, 0, 12, 16],\n\t\t...rest, height: size, width: parseInt(12 * (size / 16)), fill, classList, part, slot, animation, role,\n\t\tchildren: [\n\t\t\tcreatePath('M12 14.002a.998.998 0 0 1-.998.998H1.001A1 1 0 0 1 0 13.999V13c0-2.633 4-4 4-4s.229-.409 0-1c-.841-.62-.944-1.59-1-4 .173-2.413 1.867-3 3-3s2.827.586 3 3c-.056 2.41-.159 3.38-1 4-.229.59 0 1 0 1s4 1.367 4 4v1.002z', {\n\t\t\t\t'fill-rule': 'evenodd',\n\t\t\t})\n\t\t]\n\t});\n}\n\nexport function createPinIcon({\n\tsize = 16,\n\tfill = 'currentColor',\n\tclassList = [],\n\tpart = [],\n\tslot,\n\tanimation,\n\t...rest\n} = {}) {\n\treturn createSVG({\n\t\tviewBox: [0, 0, 16, 16],\n\t\t...rest, height: size, width: size, fill, classList, part, slot, animation, role,\n\t\tchildren: [\n\t\t\tcreatePath('M10 1.2V2l.5 1L6 6H2.2c-.44 0-.67.53-.34.86L5 10l-4 5 5-4 3.14 3.14a.5.5 0 0 0 .86-.34V10l3-4.5 1 .5h.8c.44 0 .67-.53.34-.86L10.86.86a.5.5 0 0 0-.86.34z', {\n\t\t\t\t'fill-rule': 'evenodd',\n\t\t\t})\n\t\t]\n\t});\n}\n\nexport function createPlusIcon({\n\tsize = 16,\n\tfill = 'currentColor',\n\tclassList = [],\n\tpart = [],\n\tslot,\n\tanimation,\n\t...rest\n} = {}) {\n\treturn createSVG({\n\t\tviewBox: [0, 0, 12, 16],\n\t\t...rest, height: size, width: parseInt(12 * (size / 16)), fill, classList, part, slot, animation, role,\n\t\tchildren: [\n\t\t\tcreatePath('M12 9H7v5H5V9H0V7h5V2h2v5h5v2z', {\n\t\t\t\t'fill-rule': 'evenodd',\n\t\t\t})\n\t\t]\n\t});\n}\n\nexport function createQuestionIcon({\n\tsize = 16,\n\tfill = 'currentColor',\n\tclassList = [],\n\tpart = [],\n\tslot,\n\tanimation,\n\t...rest\n} = {}) {\n\treturn createSVG({\n\t\tviewBox: [0, 0, 14, 16],\n\t\t...rest, height: size, width: parseInt(14 * (size / 16)), fill, classList, part, slot, animation, role,\n\t\tchildren: [\n\t\t\tcreatePath('M6 10h2v2H6v-2zm4-3.5C10 8.64 8 9 8 9H6c0-.55.45-1 1-1h.5c.28 0 .5-.22.5-.5v-1c0-.28-.22-.5-.5-.5h-1c-.28 0-.5.22-.5.5V7H4c0-1.5 1.5-3 3-3s3 1 3 2.5zM7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7z', {\n\t\t\t\t'fill-rule': 'evenodd',\n\t\t\t})\n\t\t]\n\t});\n}\n\nexport function createQuoteIcon({\n\tsize = 16,\n\tfill = 'currentColor',\n\tclassList = [],\n\tpart = [],\n\tslot,\n\tanimation,\n\t...rest\n} = {}) {\n\treturn createSVG({\n\t\tviewBox: [0, 0, 14, 16],\n\t\t...rest, height: size, width: parseInt(14 * (size / 16)), fill, classList, part, slot, animation, role,\n\t\tchildren: [\n\t\t\tcreatePath('M6.16 3.5C3.73 5.06 2.55 6.67 2.55 9.36c.16-.05.3-.05.44-.05 1.27 0 2.5.86 2.5 2.41 0 1.61-1.03 2.61-2.5 2.61-1.9 0-2.99-1.52-2.99-4.25 0-3.8 1.75-6.53 5.02-8.42L6.16 3.5zm7 0c-2.43 1.56-3.61 3.17-3.61 5.86.16-.05.3-.05.44-.05 1.27 0 2.5.86 2.5 2.41 0 1.61-1.03 2.61-2.5 2.61-1.89 0-2.98-1.52-2.98-4.25 0-3.8 1.75-6.53 5.02-8.42l1.14 1.84h-.01z', {\n\t\t\t\t'fill-rule': 'evenodd',\n\t\t\t})\n\t\t]\n\t});\n}\n\nexport function createReplyIcon({\n\tsize = 16,\n\tfill = 'currentColor',\n\tclassList = [],\n\tpart = [],\n\tslot,\n\tanimation,\n\t...rest\n} = {}) {\n\treturn createSVG({\n\t\tviewBox: [0, 0, 14, 16],\n\t\t...rest, height: size, width: parseInt(14 * (size / 16)), fill, classList, part, slot, animation, role,\n\t\tchildren: [\n\t\t\tcreatePath('M6 3.5c3.92.44 8 3.125 8 10-2.312-5.062-4.75-6-8-6V11L.5 5.5 6 0v3.5z', {\n\t\t\t\t'fill-rule': 'evenodd',\n\t\t\t})\n\t\t]\n\t});\n}\n\nexport function createRepoIcon({\n\tsize = 16,\n\tfill = 'currentColor',\n\tclassList = [],\n\tpart = [],\n\tslot,\n\tanimation,\n\t...rest\n} = {}) {\n\treturn createSVG({\n\t\tviewBox: [0, 0, 12, 16],\n\t\t...rest, height: size, width: parseInt(12 * (size / 16)), fill, classList, part, slot, animation, role,\n\t\tchildren: [\n\t\t\tcreatePath('M4 9H3V8h1v1zm0-3H3v1h1V6zm0-2H3v1h1V4zm0-2H3v1h1V2zm8-1v12c0 .55-.45 1-1 1H6v2l-1.5-1.5L3 16v-2H1c-.55 0-1-.45-1-1V1c0-.55.45-1 1-1h10c.55 0 1 .45 1 1zm-1 10H1v2h2v-1h3v1h5v-2zm0-10H2v9h9V1z', {\n\t\t\t\t'fill-rule': 'evenodd',\n\t\t\t})\n\t\t]\n\t});\n}\n\nexport function createScreenFullIcon({\n\tsize = 16,\n\tfill = 'currentColor',\n\tclassList = [],\n\tpart = [],\n\tslot,\n\tanimation,\n\t...rest\n} = {}) {\n\treturn createSVG({\n\t\tviewBox: [0, 0, 14, 16],\n\t\t...rest, height: size, width: parseInt(14 * (size / 16)), fill, classList, part, slot, animation, role,\n\t\tchildren: [\n\t\t\tcreatePath('M13 10h1v3c0 .547-.453 1-1 1h-3v-1h3v-3zM1 10H0v3c0 .547.453 1 1 1h3v-1H1v-3zm0-7h3V2H1c-.547 0-1 .453-1 1v3h1V3zm1 1h10v8H2V4zm2 6h6V6H4v4zm6-8v1h3v3h1V3c0-.547-.453-1-1-1h-3z', {\n\t\t\t\t'fill-rule': 'evenodd',\n\t\t\t})\n\t\t]\n\t});\n}\n\nexport function createScreenNormalIcon({\n\tsize = 16,\n\tfill = 'currentColor',\n\tclassList = [],\n\tpart = [],\n\tslot,\n\tanimation,\n\t...rest\n} = {}) {\n\treturn createSVG({\n\t\tviewBox: [0, 0, 14, 16],\n\t\t...rest, height: size, width: parseInt(14 * (size / 16)), fill, classList, part, slot, animation, role,\n\t\tchildren: [\n\t\t\tcreatePath('M2 4H0V3h2V1h1v2c0 .547-.453 1-1 1zm0 8H0v1h2v2h1v-2c0-.547-.453-1-1-1zm9-2c0 .547-.453 1-1 1H4c-.547 0-1-.453-1-1V6c0-.547.453-1 1-1h6c.547 0 1 .453 1 1v4zM9 7H5v2h4V7zm2 6v2h1v-2h2v-1h-2c-.547 0-1 .453-1 1zm1-10V1h-1v2c0 .547.453 1 1 1h2V3h-2z', {\n\t\t\t\t'fill-rule': 'evenodd',\n\t\t\t})\n\t\t]\n\t});\n}\n\nexport function createSearchIcon({\n\tsize = 16,\n\tfill = 'currentColor',\n\tclassList = [],\n\tpart = [],\n\tslot,\n\tanimation,\n\t...rest\n} = {}) {\n\treturn createSVG({\n\t\tviewBox: [0, 0, 16, 16],\n\t\t...rest, height: size, width: size, fill, classList, part, slot, animation, role,\n\t\tchildren: [\n\t\t\tcreatePath('M15.7 13.3l-3.81-3.83A5.93 5.93 0 0 0 13 6c0-3.31-2.69-6-6-6S1 2.69 1 6s2.69 6 6 6c1.3 0 2.48-.41 3.47-1.11l3.83 3.81c.19.2.45.3.7.3.25 0 .52-.09.7-.3a.996.996 0 0 0 0-1.41v.01zM7 10.7c-2.59 0-4.7-2.11-4.7-4.7 0-2.59 2.11-4.7 4.7-4.7 2.59 0 4.7 2.11 4.7 4.7 0 2.59-2.11 4.7-4.7 4.7z', {\n\t\t\t\t'fill-rule': 'evenodd',\n\t\t\t})\n\t\t]\n\t});\n}\n\nexport function createSettingsIcon({\n\tsize = 16,\n\tfill = 'currentColor',\n\tclassList = [],\n\tpart = [],\n\tslot,\n\tanimation,\n\t...rest\n} = {}) {\n\treturn createSVG({\n\t\tviewBox: [0, 0, 16, 16],\n\t\t...rest, height: size, width: size, fill, classList, part, slot, animation, role,\n\t\tchildren: [\n\t\t\tcreatePath('M4 7H3V2h1v5zm-1 7h1v-3H3v3zm5 0h1V8H8v6zm5 0h1v-2h-1v2zm1-12h-1v6h1V2zM9 2H8v2h1V2zM5 8H2c-.55 0-1 .45-1 1s.45 1 1 1h3c.55 0 1-.45 1-1s-.45-1-1-1zm5-3H7c-.55 0-1 .45-1 1s.45 1 1 1h3c.55 0 1-.45 1-1s-.45-1-1-1zm5 4h-3c-.55 0-1 .45-1 1s.45 1 1 1h3c.55 0 1-.45 1-1s-.45-1-1-1z', {\n\t\t\t\t'fill-rule': 'evenodd',\n\t\t\t})\n\t\t]\n\t});\n}\n\nexport const createShareIcon = (...args) => createPublicShareIcon(...args);\n\nexport function createSignInIcon({\n\tsize = 16,\n\tfill = 'currentColor',\n\tclassList = [],\n\tpart = [],\n\tslot,\n\tanimation,\n\t...rest\n} = {}) {\n\treturn createSVG({\n\t\tviewBox: [0, 0, 14, 16],\n\t\t...rest, height: size, width: parseInt(14 * (size / 16)), fill, classList, part, slot, animation, role,\n\t\tchildren: [\n\t\t\tcreatePath('M7 6.75V12h4V8h1v4c0 .55-.45 1-1 1H7v3l-5.45-2.72c-.33-.17-.55-.52-.55-.91V1c0-.55.45-1 1-1h9c.55 0 1 .45 1 1v3h-1V1H3l4 2v2.25L10 3v2h4v2h-4v2L7 6.75z', {\n\t\t\t\t'fill-rule': 'evenodd',\n\t\t\t})\n\t\t]\n\t});\n}\n\nexport function createSignOutIcon({\n\tsize = 16,\n\tfill = 'currentColor',\n\tclassList = [],\n\tpart = [],\n\tslot,\n\tanimation,\n\t...rest\n} = {}) {\n\treturn createSVG({\n\t\tviewBox: [0, 0, 16, 16],\n\t\t...rest, height: size, width: size, fill, classList, part, slot, animation, role,\n\t\tchildren: [\n\t\t\tcreatePath('M11.992 8.994V6.996H7.995v-2h3.997V2.999l3.998 2.998-3.998 2.998zm-1.998 2.998H5.996V2.998L2 1h7.995v2.998h1V1c0-.55-.45-.999-1-.999H.999A1.001 1.001 0 0 0 0 1v11.372c0 .39.22.73.55.91L5.996 16v-3.008h3.998c.55 0 1-.45 1-1V7.996h-1v3.998z', {\n\t\t\t\t'fill-rule': 'evenodd',\n\t\t\t})\n\t\t]\n\t});\n}\n\nexport const createSignUpIcon = (...args) => createContactNewIcon(...args);\n\nexport function createSpinnerIcon({\n\tsize = 16,\n\tfill = 'currentColor',\n\tclassList = [],\n\tpart = [],\n\tslot,\n\tanimation,\n\t...rest\n} = {}) {\n\tconst height = 12.837;\n\tconst width = 26.263;\n\tconst rx = 6.4187;\n\tconst ry = rx;\n\n\treturn createSVG({\n\t\t...rest, height: size, width: size, fill, classList, part, slot, animation, role,\n\t\tviewBox: [0, 0, 106.82, 106.82],\n\t\tchildren: [\n\t\t\tcreateGroup({\n\t\t\t\ttransform: translate(-73.591, -148.34),\n\t\t\t\tchildren: [\n\t\t\t\t\tcreateRect({ height, width, rx, ry, x: 154.15,  y: 195.33,                                            }),\n\t\t\t\t\tcreateRect({ height, width, rx, ry, x: 36.256,  y: 231.8,   transform: rotate(-30),                   }),\n\t\t\t\t\tcreateRect({ height, width, rx, ry, x: -84.075, y: 204.44,  transform: rotate(-60), opacity: 0.0833,  }),\n\t\t\t\t\tcreateRect({ height, width, rx, ry, x: -174.6,  y: 120.58,  transform: rotate(-90), opacity: 0.16666, }),\n\t\t\t\t\tcreateRect({ height, width, rx, ry, x: -211.07, y: 2.6915,  transform: rotate(240), opacity: 0.25,    }),\n\t\t\t\t\tcreateRect({ height, width, rx, ry, x: -183.71, y: -117.64, transform: rotate(210), opacity: 0.3333,  }),\n\t\t\t\t\tcreateRect({ height, width, rx, ry, x: -99.854, y: -208.17, transform: rotate(180), opacity: 0.4166,  }),\n\t\t\t\t\tcreateRect({ height, width, rx, ry, x: 18.035,  y: -244.64, transform: rotate(150), opacity: 0.5,     }),\n\t\t\t\t\tcreateRect({ height, width, rx, ry, x: 138.37,  y: -217.28, transform: rotate(120), opacity: 0.5833,  }),\n\t\t\t\t\tcreateRect({ height, width, rx, ry, x: 228.9,   y: -133.42, transform: rotate(90),  opacity: 0.6666,  }),\n\t\t\t\t\tcreateRect({ height, width, rx, ry, x: 265.37,  y: -15.529, transform: rotate(60),  opacity: 0.75,    }),\n\t\t\t\t\tcreateRect({ height, width, rx, ry, x: 238.01,  y: 104.8,   transform: rotate(30),  opacity: 0.8333,  }),\n\t\t\t\t]\n\t\t\t})\n\t\t],\n\t});\n}\n\nexport function createStarIcon({\n\tsize = 16,\n\tfill = 'currentColor',\n\tclassList = [],\n\tpart = [],\n\tslot,\n\tanimation,\n\t...rest\n} = {}) {\n\treturn createSVG({\n\t\tviewBox: [0, 0, 14, 16],\n\t\t...rest, height: size, width: parseInt(14 * (size / 16)), fill, classList, part, slot, animation, role,\n\t\tchildren: [\n\t\t\tcreatePath('M14 6l-4.9-.64L7 1 4.9 5.36 0 6l3.6 3.26L2.67 14 7 11.67 11.33 14l-.93-4.74L14 6z', {\n\t\t\t\t'fill-rule': 'evenodd',\n\t\t\t})\n\t\t]\n\t});\n}\n\nexport function createSyncIcon({\n\tsize = 16,\n\tfill = 'currentColor',\n\tclassList = [],\n\tpart = [],\n\tslot,\n\tanimation,\n\t...rest\n} = {}) {\n\treturn createSVG({\n\t\tviewBox: [0, 0, 12, 16],\n\t\t...rest, height: size, width: parseInt(12 * (size / 16)), fill, classList, part, slot, animation, role,\n\t\tchildren: [\n\t\t\tcreatePath('M10.24 7.4a4.15 4.15 0 0 1-1.2 3.6 4.346 4.346 0 0 1-5.41.54L4.8 10.4.5 9.8l.6 4.2 1.31-1.26c2.36 1.74 5.7 1.57 7.84-.54a5.876 5.876 0 0 0 1.74-4.46l-1.75-.34zM2.96 5a4.346 4.346 0 0 1 5.41-.54L7.2 5.6l4.3.6-.6-4.2-1.31 1.26c-2.36-1.74-5.7-1.57-7.85.54C.5 5.03-.06 6.65.01 8.26l1.75.35A4.17 4.17 0 0 1 2.96 5z', {\n\t\t\t\t'fill-rule': 'evenodd',\n\t\t\t})\n\t\t]\n\t});\n}\n\nexport function createSystemSoftwareInstallIcon({\n\tsize = 16,\n\tfill = 'currentColor',\n\tclassList = [],\n\tpart = [],\n\tslot,\n\tanimation,\n\t...rest\n} = {}) {\n\treturn createSVG({\n\t\tviewBox: [0, 0, 16, 16],\n\t\t...rest, height: size, width: size, fill, classList, part, slot, animation, role,\n\t\tchildren: [\n\t\t\tcreatePath('M3 8h10v7.059c0 .492-.472.937-.996.937H4c-.539 0-1-.43-1-1z', {\n\t\t\t\t'overflow': 'visible',\n\t\t\t}),\n\t\t\tcreatePath('M6.688 2.969a1 1 0 0 0-.657.375L3.22 6.812a1 1 0 0 0-.22.625v1a1 1 0 1 0 2 0v-.656l2.594-3.156a1 1 0 0 0-.907-1.656zm2.218 3a1 1 0 1 0-.031 2l2.156.375V8.5a1 1 0 1 0 2 0v-1a1 1 0 0 0-.812-1l-3-.5a1 1 0 0 0-.313-.031z', {\n\t\t\t\t'overflow': 'visible',\n\t\t\t})\n\t\t]\n\t});\n}\n\nexport function createTagIcon({\n\tsize = 16,\n\tfill = 'currentColor',\n\tclassList = [],\n\tpart = [],\n\tslot,\n\tanimation,\n\t...rest\n} = {}) {\n\treturn createSVG({\n\t\tviewBox: [0, 0, 14, 16],\n\t\t...rest, height: size, width: parseInt(14 * (size / 16)), fill, classList, part, slot, animation, role,\n\t\tchildren: [\n\t\t\tcreatePath('M7.685 1.72a2.49 2.49 0 0 0-1.76-.726H3.48A2.5 2.5 0 0 0 .994 3.48v2.456c0 .656.269 1.292.726 1.76l6.024 6.024a.99.99 0 0 0 1.402 0l4.563-4.563a.99.99 0 0 0 0-1.402L7.685 1.72zM2.366 7.048A1.54 1.54 0 0 1 1.9 5.925V3.48c0-.874.716-1.58 1.58-1.58h2.456c.418 0 .825.159 1.123.467l6.104 6.094-4.702 4.702-6.094-6.114zm.626-4.066h1.989v1.989H2.982V2.982h.01z', {\n\t\t\t\t'fill-rule': 'evenodd',\n\t\t\t})\n\t\t]\n\t});\n}\n\nexport function createThumbsUpIcon({\n\tsize = 16,\n\tfill = 'currentColor',\n\tclassList = [],\n\tpart = [],\n\tslot,\n\tanimation,\n\t...rest\n} = {}) {\n\treturn createSVG({\n\t\tviewBox: [0, 0, 16, 16],\n\t\t...rest, height: size, width: size, fill, classList, part, slot, animation, role,\n\t\tchildren: [\n\t\t\tcreatePath('M13.991 13.991c-.05.69-1.269 1-1.998 1H5.666l-1.668-1V7.995c1.359 0 2.108-.75 3.128-1.879 1.229-1.359 1.139-2.558.879-4.127-.08-.5.5-1 1-1 .829 0 1.998 2.729 1.998 3.998l-.02 1.03c0 .689.33.969 1.02.969H14c.63 0 .98.36 1 .999l-1 5.996-.01.01zm0-7.995h-2.018l.02-.98C11.993 3.719 10.823 0 8.994 0c-.58 0-1.169.3-1.559.77-.36.41-.5.909-.42 1.409.25 1.479.28 2.278-.629 3.278-1 1.089-1.48 1.549-2.388 1.549h-2C.94 6.996 0 7.935 0 8.994v3.998c0 1.06.94 1.999 1.999 1.999h1.719l1.439.86c.16.089.33.139.52.139h6.325c1.13 0 2.839-.5 2.999-1.879l.979-5.946c.02-.08.02-.14.02-.2-.03-1.17-.84-1.969-1.999-1.969h-.01z', {\n\t\t\t\t'fill-rule': 'evenodd',\n\t\t\t})\n\t\t]\n\t});\n}\n\nexport function createThumbsDownIcon({\n\tsize = 16,\n\tfill = 'currentColor',\n\tclassList = [],\n\tpart = [],\n\tslot,\n\tanimation,\n\t...rest\n} = {}) {\n\treturn createSVG({\n\t\tviewBox: [0, 0, 16, 16],\n\t\t...rest, height: size, width: size, fill, classList, part, slot, animation, role,\n\t\tchildren: [\n\t\t\tcreatePath('M15.97 7.825L15 1.88C14.83.499 13.123 0 11.994 0H5.686c-.2 0-.38.05-.53.14L3.719 1h-1.72C.94 1 0 1.938 0 2.997v3.998c0 1.059.94 2.018 1.999 1.998h1.999c.909 0 1.389.45 2.388 1.55.91.999.88 1.798.63 3.267-.08.5.06 1 .42 1.42.39.47.979.769 1.558.769 1.83 0 2.999-3.718 2.999-5.017l-.02-.98h2.038c1.16 0 1.949-.799 1.979-1.968 0-.06.02-.13-.02-.2v-.01zm-1.969 1.19h-1.989c-.7 0-1.029.28-1.029.969l.03 1.03c0 1.268-1.17 3.997-1.999 3.997-.5 0-1.079-.5-.999-1 .25-1.579.34-2.778-.89-4.137-1.019-1.13-1.768-1.879-3.127-1.879V1.999l1.668-1h6.327c.729 0 1.948.31 1.998 1l.02.02 1 5.996c-.03.64-.38 1-1 1h-.01z', {\n\t\t\t\t'fill-rule': 'evenodd',\n\t\t\t})\n\t\t]\n\t});\n}\n\nexport function createToolsIcon({\n\tsize = 16,\n\tfill = 'currentColor',\n\tclassList = [],\n\tpart = [],\n\tslot,\n\tanimation,\n\t...rest\n} = {}) {\n\treturn createSVG({\n\t\tviewBox: [0, 0, 16, 16],\n\t\t...rest, height: size, width: size, fill, classList, part, slot, animation, role,\n\t\tchildren: [\n\t\t\tcreatePath('M4.48 7.27c.26.26 1.28 1.33 1.28 1.33l.56-.58-.88-.91 1.69-1.8s-.76-.74-.43-.45c.32-1.19.03-2.51-.87-3.44C4.93.5 3.66.2 2.52.51l1.93 2-.51 1.96-1.89.52-1.93-2C-.19 4.17.1 5.48 1 6.4c.94.98 2.29 1.26 3.48.87zm6.44 1.94l-2.33 2.3 3.84 3.98c.31.33.73.49 1.14.49.41 0 .82-.16 1.14-.49.63-.65.63-1.7 0-2.35l-3.79-3.93zM16 2.53L13.55 0 6.33 7.46l.88.91-4.31 4.46-.99.53-1.39 2.27.35.37 2.2-1.44.51-1.02L7.9 9.08l.88.91L16 2.53z', {\n\t\t\t\t'fill-rule': 'evenodd',\n\t\t\t})\n\t\t]\n\t});\n}\n\nexport function createTrashCanIcon({\n\tsize = 16,\n\tfill = 'currentColor',\n\tclassList = [],\n\tpart = [],\n\tslot,\n\tanimation,\n\t...rest\n} = {}) {\n\treturn createSVG({\n\t\tviewBox: [0, 0, 14, 16],\n\t\t...rest, height: size, width: size, fill, classList, part, slot, animation, role,\n\t\tchildren: [\n\t\t\tcreatePath('M11 2H9c0-.55-.45-1-1-1H5c-.55 0-1 .45-1 1H2c-.55 0-1 .45-1 1v1c0 .55.45 1 1 1v9c0 .55.45 1 1 1h7c.55 0 1-.45 1-1V5c.55 0 1-.45 1-1V3c0-.55-.45-1-1-1zm-1 12H3V5h1v8h1V5h1v8h1V5h1v8h1V5h1v9zm1-10H2V3h9v1z', {\n\t\t\t\t'fill-rule': 'evenodd',\n\t\t\t})\n\t\t]\n\t});\n}\n\nexport function createXIcon({\n\tsize = 16,\n\tfill = 'currentColor',\n\tclassList = [],\n\tpart = [],\n\tslot,\n\tanimation,\n\t...rest\n} = {}) {\n\treturn createSVG({\n\t\tviewBox: [0, 0, 12, 16],\n\t\t...rest, height: size, width: parseInt(12 * (size / 16)), fill, classList, part, slot, animation, role,\n\t\tchildren: [\n\t\t\tcreatePath('M7.48 8l3.75 3.75-1.48 1.48L6 9.48l-3.75 3.75-1.48-1.48L4.52 8 .77 4.25l1.48-1.48L6 6.52l3.75-3.75 1.48 1.48L7.48 8z', {\n\t\t\t\t'fill-rule': 'evenodd',\n\t\t\t})\n\t\t]\n\t});\n}\n\nexport function createZoomInIcon({\n\tsize = 16,\n\tfill = 'currentColor',\n\tclassList = [],\n\tpart = [],\n\tslot,\n\tanimation,\n\t...rest\n} = {}) {\n\treturn createSVG({\n\t\tviewBox: [0, 0, 16, 16],\n\t\t...rest, height: size, width: size, fill, classList, part, slot, animation, role,\n\t\tchildren: [\n\t\t\tcreatePath('M3.19 2c-.663 0-1.188.549-1.188 1.219v9.562c0 .67.525 1.22 1.188 1.22h9.625c.663 0 1.187-.55 1.187-1.22V3.22c0-.67-.524-1.219-1.187-1.219zm3.812 3h2v2h2v2h-2v2h-2V9h-2V7h2z')\n\t\t]\n\t});\n}\n\nexport function createZoomOutIcon({\n\tsize = 16,\n\tfill = 'currentColor',\n\tclassList = [],\n\tpart = [],\n\tslot,\n\tanimation,\n\t...rest\n} = {}) {\n\treturn createSVG({\n\t\tviewBox: [0, 0, 16, 16],\n\t\t...rest, height: size, width: size, fill, classList, part, slot, animation, role,\n\t\tchildren: [\n\t\t\tcreatePath('M3.19 2c-.663 0-1.188.549-1.188 1.219v9.562c0 .67.525 1.22 1.188 1.22h9.625c.663 0 1.187-.55 1.187-1.22V3.22c0-.67-.524-1.219-1.187-1.219zm1.812 5h6v2h-6z')\n\t\t]\n\t});\n}\n","/**\n * @copyright 2023 Chris Zuber <admin@kernvalley.us>\n */\nexport const supported = window.customElements instanceof Object;\n\nexport function isDefined(...tags) {\n\treturn supported && tags.every(tag => typeof customElements.get(tag) !== 'undefined');\n}\n\nexport function registerCustomElement(tag, cls, ...rest) {\n\tif (! supported) {\n\t\tconsole.error(new Error('`customElements` not supported'));\n\t\treturn false;\n\t} else if (isDefined(tag)) {\n\t\tconsole.warn(new Error(`<${tag}> is already defined`));\n\t\t// Returns true/false if element being registered matches given class\n\t\treturn customElements.get(tag) === cls;\n\t} else {\n\t\tcustomElements.define(tag, cls, ...rest);\n\t\treturn true;\n\t}\n}\n\nexport async function getCustomElement(tag) {\n\tif (supported) {\n\t\tawait customElements.whenDefined(tag);\n\t\treturn customElements.get(tag);\n\t} else {\n\t\tthrow new Error('`customElements` not supported');\n\t}\n}\n\nexport async function createCustomElement(tag, ...args) {\n\tconst Pro = await getCustomElement(tag);\n\treturn new Pro(...args);\n}\n\nexport async function whenDefined(...els) {\n\tif (supported) {\n\t\tawait Promise.all(els.map(el => customElements.whenDefined(el)));\n\t} else {\n\t\tthrow new Error('`customElements` not supported');\n\t}\n}\n\nexport async function defined(...els) {\n\tconsole.error('`defined()` is deprecated. Please use `whenDefined()` instead');\n\tawait whenDefined(...els);\n}\n","import { getDeferred } from '@shgysk8zer0/kazoo/promises.js';\nimport { getURLResolver, callOnce } from '@shgysk8zer0/kazoo/utility.js';\nimport { createPolicy } from '@shgysk8zer0/kazoo/trust.js';\nimport { meta } from '../import.meta.js';\nimport { loadStylesheet } from '@shgysk8zer0/kazoo/loader.js';\nimport { createElement, createImage } from '@shgysk8zer0/kazoo/elements.js';\nimport { createXIcon, createBellIcon } from '@shgysk8zer0/kazoo/icons.js';\nimport { getString, setString, getInt, setInt } from '@shgysk8zer0/kazoo/attrs.js';\nimport { remove } from '@shgysk8zer0/kazoo/dom.js';\nimport { registerCustomElement } from '@shgysk8zer0/kazoo/custom-elements.js';\n\n// Need to create `<script type=\"application/json\">`s\nconst policyName = 'html-notification#script';\nconst resolveURL = getURLResolver({ base: meta.url, path: './notification/' });\nconst getPolicy = callOnce(() => createPolicy(policyName, { createScript: input => input }));\nconst protectedData = new WeakMap();\n\nfunction getSlot(name, base) {\n\tconst { shadow } = protectedData.get(base);\n\tconst slot = shadow.querySelector(`slot[name=\"${name}\"]`);\n\n\tif (slot instanceof HTMLElement) {\n\t\tconst els = slot.assignedElements();\n\n\t\treturn els.length === 1 ? els[0].textContent : null;\n\t} else {\n\t\treturn null;\n\t}\n}\n\nfunction clearSlot(name, base) {\n\tremove(`[slot=\"${name}\"]`, { base });\n}\n\nfunction setSlot(name, content, base) {\n\tif (typeof content === 'string') {\n\t\treturn setSlot(name, createElement('span', { text: content, slot: name }), base);\n\t} else if (content instanceof Element) {\n\t\tclearSlot(name, base);\n\t\tcontent.slot = name;\n\t\tbase.append(content);\n\t}\n\n}\n\n/**\n * Notification API implemented as a custom element\n * Note: Unlike most other custom elements, this exports the class\n * for better compatibility with the Notification API.\n *\n * Also, since `actions` are only available in service worker notifications,\n * here they still dispatch a `notificationclick` event with `actions` & `notification`\n * set on the event.\n *\n * @SEE https://developer.mozilla.org/en-US/docs/Web/API/Notification\n */\nexport class HTMLNotificationElement extends HTMLElement {\n\tconstructor(title, {\n\t\tbody = null,\n\t\ticon = null,\n\t\tbadge = null,\n\t\timage = null,\n\t\tdir = 'auto',\n\t\tlang = '',\n\t\ttag = '',\n\t\tdata = null,\n\t\tvibrate = null,\n\t\tsilent = false,\n\t\ttimestamp = undefined,\n\t\trequireInteraction = false,\n\t\tactions = [],\n\t\tsignal = undefined,\n\t} = {}) {\n\t\tsuper();\n\t\tconst shadow = this.attachShadow({ mode: 'open' });\n\t\tconst internals = this.attachInternals();\n\t\tprotectedData.set(this, { shadow, internals });\n\n\t\tPromise.resolve().then(() => {\n\t\t\tinternals.role = 'dialog';\n\t\t\tthis.hidden = true;\n\t\t\tthis.onshow = null;\n\t\t\tthis.onclose = null;\n\t\t\tthis.onclick = null;\n\t\t\tthis.onerror = null;\n\t\t});\n\n\t\tconst tmp = createElement('div', {\n\t\t\tpart: 'container',\n\t\t\tchildren: [\n\t\t\t\tcreateElement('button', {\n\t\t\t\t\ttype: 'button',\n\t\t\t\t\tevents: { click: () => this.close() },\n\t\t\t\t\tchildren: [\n\t\t\t\t\t\tcreateElement('slot', {\n\t\t\t\t\t\t\tname: 'close-icon',\n\t\t\t\t\t\t\tchildren: [createXIcon({ size: 22, fill: 'currentColor' })]\n\t\t\t\t\t\t})\n\t\t\t\t\t]\n\t\t\t\t}),\n\t\t\t\tcreateElement('span', {\n\t\t\t\t\tpart: ['url'],\n\t\t\t\t\tchildren: [createElement('slot', { name: 'url' })]\n\t\t\t\t}),\n\t\t\t\tcreateElement('span', {\n\t\t\t\t\tpart: ['icon'],\n\t\t\t\t\tchildren: [\n\t\t\t\t\t\tcreateElement('slot', {\n\t\t\t\t\t\t\tname: 'icon',\n\t\t\t\t\t\t\tchildren: [createBellIcon({ size: 56, fill: 'currentColor' })],\n\t\t\t\t\t\t})\n\t\t\t\t\t]\n\t\t\t\t}),\n\t\t\t\tcreateElement('h4', {\n\t\t\t\t\tpart: ['title'],\n\t\t\t\t\tchildren: [createElement('slot', { name: 'title' })]\n\t\t\t\t}),\n\t\t\t\tcreateElement('span', {\n\t\t\t\t\tpart: ['badge'],\n\t\t\t\t\tchildren: [\n\t\t\t\t\t\tcreateElement('slot', {\n\t\t\t\t\t\t\tname: 'badge',\n\t\t\t\t\t\t\tchildren: [createBellIcon({ size: 16, fill: 'currentColor' })]\n\t\t\t\t\t\t})\n\t\t\t\t\t]\n\t\t\t\t}),\n\t\t\t\tcreateElement('p', {\n\t\t\t\t\tpart: ['body'],\n\t\t\t\t\tchildren: [createElement('slot', { name: 'body' })]\n\t\t\t\t}),\n\t\t\t\tcreateElement('div', {\n\t\t\t\t\tpart: ['image'],\n\t\t\t\t\tchildren: [createElement('slot', { name: 'image' })]\n\t\t\t\t}),\n\t\t\t\tcreateElement('div', {\n\t\t\t\t\tpart: ['actions'],\n\t\t\t\t\tchildren: [createElement('slot', { name: 'actions' })],\n\t\t\t\t}),\n\t\t\t\tcreateElement('slot', { name: 'data', hidden: true }),\n\t\t\t\tcreateElement('slot', { name: 'timestamp' })\n\t\t\t]\n\t\t});\n\n\t\tloadStylesheet(resolveURL('./html-notification.css'), { parent: shadow }).then(() => {\n\t\t\tshadow.append(...tmp.children);\n\n\t\t\tif (typeof title === 'string') {\n\t\t\t\tsetSlot('title', title, this);\n\t\t\t}\n\n\t\t\tif (Array.isArray(actions) && actions.length !== 0) {\n\t\t\t\tconst click = event => {\n\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\tconst evt = new Event('notificationclick');\n\t\t\t\t\tevt.action = event.currentTarget.dataset.action;\n\t\t\t\t\tevt.notification = this;\n\t\t\t\t\tthis.dispatchEvent(evt);\n\t\t\t\t};\n\n\t\t\t\tthis.append(...actions.map(({ title = '', action = '', icon = null }) => {\n\t\t\t\t\tconst btn = createElement('button', {\n\t\t\t\t\t\ttype: 'button',\n\t\t\t\t\t\tclassList: ['no-border', 'no-background', 'background-transparent'],\n\t\t\t\t\t\ttitle: title,\n\t\t\t\t\t\tdataset: { action },\n\t\t\t\t\t\tevents: { click },\n\t\t\t\t\t\tslot: 'actions',\n\t\t\t\t\t});\n\n\t\t\t\t\tif ((typeof icon === 'string' && icon !== '') || icon instanceof URL) {\n\t\t\t\t\t\tbtn.append(createImage(icon, {\n\t\t\t\t\t\t\theight: 22,\n\t\t\t\t\t\t\twidth: 22,\n\t\t\t\t\t\t\tdecoding: 'async',\n\t\t\t\t\t\t\tcrossOrigin: 'anonymous',\n\t\t\t\t\t\t\treferrerPolicy: 'no-referrer',\n\t\t\t\t\t\t}), document.createElement('br'), createElement('span', { text: title }));\n\t\t\t\t\t} else {\n\t\t\t\t\t\tbtn.append(createElement('span', { text: title }));\n\t\t\t\t\t}\n\n\t\t\t\t\treturn btn;\n\t\t\t\t}));\n\t\t\t}\n\n\t\t\tif (typeof body === 'string') {\n\t\t\t\tsetSlot('body', body, this);\n\t\t\t}\n\n\t\t\tif (Number.isInteger(timestamp)) {\n\t\t\t\tthis.timestamp = timestamp;\n\t\t\t}\n\n\t\t\tif (typeof icon === 'string' || icon instanceof URL) {\n\t\t\t\tsetSlot('icon', createImage(icon, {\n\t\t\t\t\theight: 64,\n\t\t\t\t\twidth: 64,\n\t\t\t\t\tloading: 'lazy',\n\t\t\t\t\tdecoding: 'async',\n\t\t\t\t\tcrossorigin: 'anonymous',\n\t\t\t\t\treferrerpolicy: 'no-referrer',\n\t\t\t\t}), this);\n\t\t\t}\n\n\t\t\tif (typeof badge === 'string' || badge instanceof URL) {\n\t\t\t\tsetSlot('badge', createImage(badge, {\n\t\t\t\t\theight: 22,\n\t\t\t\t\twidth: 22,\n\t\t\t\t\tloading: 'lazy',\n\t\t\t\t\tdecoding: 'async',\n\t\t\t\t\tcrossorigin: 'anonymous',\n\t\t\t\t\treferrerpolicy: 'no-referrer',\n\n\t\t\t\t}), this);\n\t\t\t}\n\n\t\t\tif (data) {\n\t\t\t\tconst script = createElement('script', { type: 'application/json' });\n\t\t\t\tscript.text = getPolicy().createScript(JSON.stringify(data));\n\t\t\t\tsetSlot('data', script, this);\n\t\t\t}\n\n\t\t\tif (typeof image === 'string' || image instanceof URL) {\n\t\t\t\tsetSlot('image', createImage(image, {\n\t\t\t\t\tdecoding: 'async',\n\t\t\t\t\treferrerpolicy: 'no-referrer',\n\t\t\t\t\tcrossorigin: 'anonymous',\n\t\t\t\t\tloading: 'lazy',\n\t\t\t\t\theight: 80,\n\t\t\t\t}), this);\n\t\t\t}\n\n\t\t\tthis.dispatchEvent(new Event('ready'));\n\n\t\t\tif ('locks' in navigator && navigator.locks.request instanceof Function) {\n\t\t\t\tnavigator.locks.request('html-notification', { mode: 'exclusive', signal }, async () => {\n\t\t\t\t\tconst { resolve, promise } = getDeferred();\n\t\t\t\t\tthis.hidden = false;\n\t\t\t\t\tthis.dispatchEvent(new Event('show'));\n\t\t\t\t\tthis.addEventListener('close', resolve);\n\t\t\t\t\tawait promise;\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tthis.hidden = false;\n\t\t\t\tthis.dispatchEvent(new Event('show'));\n\t\t\t}\n\t\t});\n\n\t\tthis.dir = dir;\n\t\tthis.lang = lang;\n\t\tthis.setAttribute('tag', tag);\n\n\t\tif (silent) {\n\t\t\tthis.setAttribute('silent', '');\n\t\t}\n\n\t\tif (requireInteraction) {\n\t\t\tthis.setAttribute('requireinteraction', '');\n\t\t}\n\n\t\tif (Array.isArray(vibrate) || Number.isInteger(vibrate)) {\n\t\t\tthis.vibrate = vibrate;\n\t\t}\n\n\t\tthis.addEventListener('close', () => {\n\t\t\tif (! this.hidden && this.isConnected && this.animate instanceof Function) {\n\t\t\t\tthis.animate([{\n\t\t\t\t\topacity: 1,\n\t\t\t\t\ttransform: 'none',\n\t\t\t\t}, {\n\t\t\t\t\topacity: 0,\n\t\t\t\t\ttransform: 'translateY(64px)',\n\t\t\t\t}], {\n\t\t\t\t\tduration: 300,\n\t\t\t\t\teasing: 'ease-in',\n\t\t\t\t\tfill: 'forwards',\n\t\t\t\t}).finished.then(() => this.remove());\n\t\t\t} else {\n\t\t\t\tthis.remove();\n\t\t\t}\n\t\t}, {\n\t\t\tonce: true,\n\t\t});\n\n\t\tif (! this.isConnected && ! (signal instanceof AbortSignal && signal.aborted)) {\n\t\t\tdocument.body.append(this);\n\t\t}\n\n\t\tthis.addEventListener('show', () => {\n\t\t\tconst actions = shadow.querySelector('slot[name=\"actions\"]').assignedElements();\n\t\t\tconsole.log({ actions });\n\t\t\tif (! this.requireInteraction) {\n\t\t\t\tsetTimeout(() => this.close(), 5000);\n\t\t\t}\n\n\t\t\tconst pattern = this.vibrate;\n\t\t\tif (\n\t\t\t\t! this.silent\n\t\t\t\t&& pattern.length !== 0\n\t\t\t\t&& ! pattern.every(n => n === 0)\n\t\t\t\t&& (navigator.vibrate instanceof Function)\n\t\t\t) {\n\t\t\t\tnavigator.vibrate(this.vibrate);\n\t\t\t}\n\n\t\t\tif (actions.length !== 0) {\n\t\t\t\tactions[0].focus();\n\t\t\t}\n\t\t}, {\n\t\t\tonce: true,\n\t\t\tsignal,\n\t\t});\n\n\t\tif (signal instanceof AbortSignal && ! signal.aborted) {\n\t\t\tsignal.addEventListener('abort', () => {\n\t\t\t\tif (this.hidden) {\n\t\t\t\t\tthis.remove();\n\t\t\t\t} else {\n\t\t\t\t\tthis.close();\n\t\t\t\t}\n\t\t\t}, { once: true });\n\t\t}\n\t}\n\n\tconnectedCallback() {\n\t\tthis.dispatchEvent(new Event('connected'));\n\t}\n\n\tdisconnectedCallback() {\n\t\tif (! this.hidden) {\n\t\t\tthis.dispatchEvent(new Event('close'));\n\t\t}\n\t}\n\n\tget actions() {\n\t\treturn this.shadowRoot.querySelector('slot[name=\"actions\"]').assignedElements()\n\t\t\t.map(btn => {\n\t\t\t\tconst icon = btn.querySelector('img');\n\t\t\t\treturn {\n\t\t\t\t\ttitle: btn.title,\n\t\t\t\t\taction: btn.dataset.action,\n\t\t\t\t\ticon: icon instanceof HTMLImageElement ? icon.src : null,\n\t\t\t\t};\n\t\t\t});\n\t}\n\n\tget badge() {\n\t\tconst slot = this.shadowRoot.querySelector('slot[name=\"badge\"]');\n\t\tconst assigned = slot.assignedElements();\n\n\t\tif (assigned.length !== 0) {\n\t\t\treturn assigned[0].src;\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n\n\tget body() {\n\t\treturn getSlot('body', this);\n\t}\n\n\tget data() {\n\t\tconst dataSlot = this.shadowRoot.querySelector('slot[name=\"data\"]');\n\n\t\tconst assigned = dataSlot.assignedElements();\n\n\t\tif (assigned.length === 0) {\n\t\t\treturn null;\n\t\t} else if (assigned.length === 1) {\n\t\t\treturn JSON.parse(assigned[0].textContent);\n\t\t} else {\n\t\t\treturn assigned.map(script => script.textContent);\n\t\t}\n\t}\n\n\tget icon() {\n\t\tconst slot = this.shadowRoot.querySelector('slot[name=\"icon\"]');\n\t\tconst assigned = slot.assignedElements();\n\n\t\tif (assigned.length !== 0) {\n\t\t\treturn assigned[0].src;\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n\n\tget image() {\n\t\tconst slot = this.shadowRoot.querySelector('slot[name=\"image\"]');\n\t\tconst assigned = slot.assignedElements();\n\n\t\tif (assigned.length !== 0) {\n\t\t\treturn assigned[0].src;\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n\n\tget requireInteraction() {\n\t\treturn this.hasAttribute('requireinteraction');\n\t}\n\n\tset requireInteraction(value) {\n\t\tthis.toggleAttribute('requireinteraction', value);\n\t}\n\n\tget silent() {\n\t\treturn this.hasAttribute('silent');\n\t}\n\n\tset silent(value) {\n\t\tthis.toggleAttribute('silent', value);\n\t}\n\n\tget tag() {\n\t\treturn getString(this, 'tag');\n\t}\n\n\tset tag(value) {\n\t\tsetString(this, 'tag', value);\n\t}\n\n\tget timestamp() {\n\t\treturn getInt(this, 'timestamp', { fallback: Date.now() });\n\t}\n\n\tset timestamp(value) {\n\t\tif (value instanceof Date) {\n\t\t\tsetInt(this, 'timestamp', value.getTime());\n\t\t} else {\n\t\t\tsetInt(this, 'timestmap', value);\n\t\t}\n\t}\n\n\tget title() {\n\t\treturn getSlot('title', this);\n\t}\n\n\tget vibrate() {\n\t\tif (this.hasAttribute('vibrate')) {\n\t\t\treturn this.getAttribute('vibrate').split(' ')\n\t\t\t\t.map(n => parseInt(n));\n\t\t} else {\n\t\t\treturn [0];\n\t\t}\n\t}\n\n\tset vibrate(value) {\n\t\tif (Array.isArray(value)) {\n\t\t\tthis.setAttribute('vibrate', value.join(' '));\n\t\t} else if (Number.isInteger(value) || typeof value === 'string') {\n\t\t\tthis.setAttribute('vibrate', value);\n\t\t}\n\t}\n\n\tget whenConnected() {\n\t\treturn new Promise(resolve => {\n\t\t\tif (this.isConnected) {\n\t\t\t\tresolve();\n\t\t\t} else {\n\t\t\t\tthis.addEventListener('connected', () => resolve(), { once: true });\n\t\t\t}\n\t\t});\n\t}\n\n\tclose() {\n\t\tthis.dispatchEvent(new Event('close'));\n\t}\n\n\tstatic get permission() {\n\t\treturn 'granted';\n\t}\n\n\tstatic get maxActions() {\n\t\treturn 5;\n\t}\n\n\tstatic async requestPermission() {\n\t\treturn 'granted';\n\t}\n}\n\n// @SEE https://developer.mozilla.org/en-US/docs/Web/API/Notification\nregisterCustomElement('html-notification', HTMLNotificationElement);\nexport const trustPolicies = [policyName];\n","/**\n * @copyright 2023 Chris Zuber <admin@kernvalley.us>\n */\nimport { css } from './dom.js';\nimport { getDeferred } from './promises.js';\n\nfunction fadeIn(dialog) {\n\tif (dialog.animate instanceof Function) {\n\t\tdialog.animate([{\n\t\t\topacity: 0,\n\t\t\ttransform: 'translate(0, -50vh)',\n\t\t}, {\n\t\t\topacity: 1,\n\t\t\ttransform: 'none',\n\t\t}], {\n\t\t\tduration: 400,\n\t\t\teasing: 'ease-in-out',\n\t\t});\n\t}\n\n\tdocument.body.append(dialog);\n\tdialog.showModal();\n}\n\nconst btnStyles = {\n\t'max-width': '180px',\n\t'min-width': '60px',\n};\n\nconst btnContainerStyles = {\n\t'justify-content': 'center',\n\t'gap': '16px',\n};\n\nexport async function alert(text, { signal } = {}) {\n\tconst { resolve, reject, promise } = getDeferred({ signal });\n\n\tif (! (signal instanceof AbortSignal && signal.aborted)) {\n\t\tconst dialog = document.createElement('dialog');\n\t\tconst msg = document.createElement('div');\n\t\tconst close = document.createElement('button');\n\t\tconst btns = document.createElement('div');\n\t\tconst controller = new AbortController();\n\n\t\tcss(btns, btnContainerStyles);\n\t\tbtns.classList.add('flex', 'row', 'no-wrap');\n\t\tclose.classList.add('btn', 'btn-primary', 'grow-1');\n\t\tcss(close, btnStyles);\n\t\tdialog.classList.add('clearfix');\n\t\tmsg.textContent = text;\n\t\tclose.textContent = 'Ok';\n\t\tbtns.append(close);\n\t\tdialog.append(msg, document.createElement('br'), btns);\n\n\t\tdialog.addEventListener('close', ({ target }) => {\n\t\t\tresolve();\n\t\t\ttarget.remove();\n\n\t\t\tif (! controller.signal.aborted) {\n\t\t\t\tcontroller.abort();\n\t\t\t}\n\t\t}, { once: true });\n\n\t\tclose.addEventListener('click', ({ target }) => {\n\t\t\ttarget.closest('dialog[open]').close();\n\t\t}, { signal: controller.signal });\n\n\t\tif (signal instanceof AbortSignal) {\n\t\t\tsignal.addEventListener('abort', () => {\n\t\t\t\treject(signal.reason);\n\t\t\t\tcontroller.abort(signal.reason);\n\t\t\t\tdialog.close();\n\t\t\t}, { signal: controller.signal});\n\t\t}\n\n\t\tfadeIn(dialog);\n\t} else {\n\t\treject(signal.reason);\n\t}\n\n\treturn promise;\n}\n\nexport async function confirm(text, { signal } = {}) {\n\tconst { resolve, reject, promise } = getDeferred({ signal });\n\n\tif (! (signal instanceof AbortSignal && signal.aborted)) {\n\t\tconst dialog = document.createElement('dialog');\n\t\tconst msg = document.createElement('div');\n\t\tconst close = document.createElement('button');\n\t\tconst ok = document.createElement('button');\n\t\tconst btns = document.createElement('div');\n\t\tconst controller = new AbortController();\n\t\tcss(btns, btnContainerStyles);\n\n\t\tclose.type = 'button';\n\t\tok.type = 'button';\n\t\tok.classList.add('btn', 'btn-accept', 'grow-1');\n\t\tclose.classList.add('btn', 'btn-reject', 'grow-1');\n\t\tbtns. classList.add('flex', 'row', 'no-wrap');\n\t\tcss(ok, btnStyles);\n\t\tcss(close, btnStyles);\n\n\t\tmsg.textContent = text;\n\t\tclose.textContent = 'Cancel';\n\t\tok.textContent = 'Ok';\n\t\tbtns.append(close, ok);\n\t\tdialog.append(msg, document.createElement('br'), btns);\n\n\t\tdialog.addEventListener('close', event => {\n\t\t\tevent.target.remove();\n\t\t\tresolve(event.returnValue && event.target.returnValue === 'confirm');\n\n\t\t\tif (! controller.signal.aborted) {\n\t\t\t\tcontroller.abort();\n\t\t\t}\n\t\t\tcontroller.abort();\n\t\t}, { once: true });\n\n\t\tclose.addEventListener('click', event => {\n\t\t\tevent.target.closest('dialog[open]').close();\n\t\t}, { signal: controller.signal });\n\n\t\tok.addEventListener('click', event => {\n\t\t\tevent.target.closest('dialog[open]').close('confirm');\n\t\t},{ signal: controller.signal });\n\n\t\tif (signal instanceof AbortSignal) {\n\t\t\tsignal.addEventListener('abort', ({ target }) => {\n\t\t\t\treject(target.reason);\n\t\t\t\tcontroller.abort(target.reason);\n\t\t\t\tdialog.close();\n\t\t\t}, { signal: controller.signal });\n\t\t}\n\n\t\tfadeIn(dialog);\n\t} else {\n\t\treject(signal.reason);\n\t}\n\n\treturn promise;\n}\n\nexport async function prompt(text, defaultValue = '',{ signal } = {}) {\n\tconst { resolve, reject, promise } = getDeferred({ signal });\n\n\tif (! (signal instanceof AbortSignal && signal.aborted)) {\n\t\tconst dialog = document.createElement('dialog');\n\t\tconst msg = document.createElement('div');\n\t\tconst close = document.createElement('button');\n\t\tconst ok = document.createElement('button');\n\t\tconst form = document.createElement('form');\n\t\tconst input = document.createElement('input');\n\t\tconst btns = document.createElement('div');\n\t\tconst controller = new AbortController();\n\t\tcss(btns, btnContainerStyles);\n\n\t\tclose.type = 'button';\n\t\tok.type = 'submit';\n\t\tinput.type = 'text';\n\t\tinput.placeholder = defaultValue;\n\t\tinput.value = defaultValue;\n\t\tinput.name = 'result';\n\t\tcss(input, {\n\t\t\twidth: '100%',\n\t\t\tbackground: 'transparent',\n\t\t\t'border-width': '0 0 2px 0',\n\t\t\t'border-color': 'currentColor',\n\t\t\tcolor: 'inherit',\n\t\t\tmargin: '8px',\n\t\t\tpadding: '4px 8px',\n\t\t});\n\n\t\tcss(ok, btnStyles);\n\t\tcss(close, btnStyles);\n\n\t\tok.classList.add('btn', 'btn-primary', 'grow-1', 'shrink-0');\n\t\tclose.classList.add('btn', 'btn-reject', 'grow-1');\n\t\tbtns.classList.add('flex', 'row', 'no-wrap', 'center');\n\n\t\tmsg.textContent = text;\n\t\tclose.textContent = 'Cancel';\n\t\tok.textContent = 'Ok';\n\t\tbtns.append(ok, close);\n\t\tform.append(input, document.createElement('br'), btns);\n\t\tdialog.append(msg, form);\n\n\t\tdialog.addEventListener('close', ({ target }) => {\n\t\t\ttarget.remove();\n\t\t},{ once: true });\n\n\t\tclose.addEventListener('click', ({ target }) => {\n\t\t\tresolve(null);\n\t\t\ttarget.closest('dialog[open]').close();\n\t\t}, { signal: controller.signal });\n\n\t\tform.addEventListener('submit', event => {\n\t\t\tevent.preventDefault();\n\t\t\tconst data = new FormData(event.target);\n\t\t\tresolve(data.get('result'));\n\t\t\tevent.target.closest('dialog[open]').close();\n\t\t}, { signal: controller.signal });\n\n\t\tif (signal instanceof AbortSignal) {\n\t\t\tsignal.addEventListener('abort', ({ target }) => {\n\t\t\t\treject(target.reason);\n\t\t\t\tcontroller.abort(target.reason);\n\t\t\t\tdialog.close();\n\t\t\t}, { signal: controller.signal });\n\t\t}\n\n\t\tfadeIn(dialog);\n\t\tinput.select();\n\t} else {\n\t\treject(signal.reason);\n\t}\n\n\treturn promise;\n}\n","import { HTMLNotificationElement } from '@shgysk8zer0/components/notification/html-notification.js';\nimport { alert } from '@shgysk8zer0/kazoo/asyncDialog.js';\nimport { each } from '@shgysk8zer0/kazoo/dom.js';\n\nexport async function submitHandler(event) {\n\tevent.preventDefault();\n\tconst base = event.target;\n\tconst data = new FormData(base);\n\teach('fieldset, input, button', el => el.disabled = true, { base });\n\n\tawait new Promise(resolve => {\n\t\tconst notification = new HTMLNotificationElement(`Hi, ${data.get('name')}`, {\n\t\t\tbody: 'Nothing has been submitted. This is for demonstration purposes only.',\n\t\t\ticon: '/img/favicon.svg',\n\t\t\tlang: 'en-us',\n\t\t\tdir: 'ltr',\n\t\t\ttag: 'demo',\n\t\t\tsilent: false,\n\t\t\tvibrate: [500, 0, 0, 500],\n\t\t\trequireInteraction: true,\n\t\t\tdata: {\n\t\t\t\tform : {\n\t\t\t\t\tname: data.get('name'),\n\t\t\t\t\temail: data.get('email'),\n\t\t\t\t\tphone: data.get('phone'),\n\t\t\t\t\tsubject: data.get('subject'),\n\t\t\t\t\tbody: data.get('body'),\n\t\t\t\t}\n\t\t\t},\n\t\t\tactions: [{\n\t\t\t\ttitle: 'Share',\n\t\t\t\taction: 'share',\n\t\t\t}, {\n\t\t\t\ttitle: 'Clear',\n\t\t\t\taction: 'clear',\n\t\t\t}, {\n\t\t\t\ttitle: 'Close',\n\t\t\t\taction: 'close',\n\t\t\t}]\n\t\t});\n\n\t\tnotification.addEventListener('close', () => resolve());\n\n\t\tnotification.addEventListener('notificationclick', async ({ action, notification }) => {\n\t\t\tswitch (action) {\n\t\t\t\tcase 'share':\n\t\t\t\t\tnotification.close();\n\t\t\t\t\tif (navigator.canShare({title: '', text: '', url: location.href})) {\n\t\t\t\t\t\tconst { subject, body } = notification.data.form;\n\t\t\t\t\t\tawait navigator.share({\n\t\t\t\t\t\t\ttitle: subject,\n\t\t\t\t\t\t\ttext: body,\n\t\t\t\t\t\t\turl: location.href,\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\talert('Share API not supported');\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'clear':\n\t\t\t\t\tbase.reset();\n\t\t\t\t\tnotification.close();\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'close':\n\t\t\t\t\tnotification.close();\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t});\n\t});\n\n\teach('fieldset, input, button', el => el.disabled = false, { base });\n}\n","import { registerCustomElement } from '@shgysk8zer0/kazoo/custom-elements.js';\nimport { GET } from '@shgysk8zer0/kazoo/http.js';\nimport { getString, setString } from '@shgysk8zer0/kazoo/attrs.js';\nimport { hasGa, send } from '@shgysk8zer0/kazoo/google-analytics.js';\nimport { setURLParams } from '@shgysk8zer0/kazoo/utility.js';\n\nfunction log({ url: eventAction, shareTitle: eventLabel, hitType = 'event',\n\ttransport = 'beacon', eventCategory = 'share-button'\n}) {\n\tif (hasGa()) {\n\t\tsend({ hitType, eventCategory, eventAction, eventLabel, transport });\n\t}\n}\n\nasync function getFiles(file) {\n\tif (typeof file !== 'string' || ! (navigator.canShare instanceof Function)) {\n\t\treturn [];\n\t} else {\n\t\tconst resp = await GET(file);\n\n\t\tif (! resp.ok) {\n\t\t\tthrow new Error(`Failed fetching ${file} [${resp.status} ${resp.statusText}]`);\n\t\t} else if (! resp.headers.has('Content-Type')) {\n\t\t\tthrow new Error(`Unknown Content-Type for ${file}`);\n\t\t} else {\n\t\t\tconst path = file.split('/');\n\t\t\tconst name = path[path.length - 1];\n\t\t\tconst type = resp.headers.get('Content-Type').split(';')[0];\n\t\t\tconst files = [new File([await resp.blob()], name, { type })];\n\t\t\treturn navigator.canShare({ title: 'test', files }) ? files : [];\n\t\t}\n\t}\n}\n\nregisterCustomElement('share-button', class HTMLShareButtonElement extends HTMLButtonElement {\n\tconstructor({ shareTitle, title, text, url, file, source, medium, content } = {}) {\n\t\tsuper();\n\n\t\tthis.addEventListener('connected', () => {\n\t\t\tif (typeof shareTitle === 'string') {\n\t\t\t\tthis.shareTitle = shareTitle;\n\t\t\t} else if (typeof title === 'string') {\n\t\t\t\tconsole.warn('Use of `title` is deprecated. Please use `shareTitle` instead.');\n\t\t\t\tthis.shareTitle = title;\n\t\t\t}\n\n\t\t\tif (typeof text === 'string') {\n\t\t\t\tthis.text = text;\n\t\t\t}\n\n\t\t\tif (typeof url === 'string') {\n\t\t\t\tthis.url = url;\n\t\t\t}\n\n\t\t\tif (typeof source === 'string') {\n\t\t\t\tthis.source = source;\n\t\t\t}\n\n\t\t\tif (typeof medium === 'string') {\n\t\t\t\tthis.medium = medium;\n\t\t\t}\n\n\t\t\tif (typeof content === 'string') {\n\t\t\t\tthis.content = content;\n\t\t\t}\n\n\t\t\tif (typeof file === 'string') {\n\t\t\t\tthis.file = file;\n\t\t\t}\n\t\t}, { once: true });\n\t}\n\n\tconnectedCallback() {\n\t\tthis.hidden = ! (navigator.share instanceof Function);\n\n\t\tthis.addEventListener('click', async event => {\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\n\t\t\tif (event.isTrusted !== false) {\n\t\t\t\tthis.disabled = true;\n\n\t\t\t\ttry {\n\t\t\t\t\tconst { shareTitle: title, text, url, file } = this;\n\n\t\t\t\t\tif (typeof file === 'string' && navigator.canShare instanceof Function) {\n\t\t\t\t\t\tconst files = await getFiles(file);\n\t\t\t\t\t\tawait navigator.share({ title, text, url, files });\n\t\t\t\t\t\tlog(this);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tawait navigator.share({ title, text, url });\n\t\t\t\t\t\tlog(this);\n\t\t\t\t\t}\n\t\t\t\t} catch (err) {\n\t\t\t\t\tconsole.error(err);\n\t\t\t\t} finally {\n\t\t\t\t\tthis.disabled = false;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\tthis.dispatchEvent(new Event('connected'));\n\t}\n\n\tget content() {\n\t\treturn getString(this, 'content', { fallback: 'share-button' });\n\t}\n\n\tset content(val) {\n\t\tsetString(this, 'content', val);\n\t}\n\n\tget file() {\n\t\tif (this.hasAttribute('file')) {\n\t\t\treturn new URL(this.getAttribute('file'), document.baseURI).href;\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n\n\tset file(val) {\n\t\tif (typeof val === 'string' && val.length !== 0) {\n\t\t\tthis.setAttribute('file', new URL(val, document.baseURI));\n\t\t} else {\n\t\t\tthis.removeAttribute('file');\n\t\t}\n\t}\n\n\tget medium() {\n\t\treturn getString(this, 'medium', { fallback: 'share' });\n\t}\n\n\tset medium(val) {\n\t\tsetString(this, 'medium', val);\n\t}\n\n\tget shareTitle() {\n\t\treturn getString(this, 'sharetitle', { fallback: document.title });\n\t}\n\n\tset shareTitle(val) {\n\t\tsetString(this, 'sharetitle', val);\n\t}\n\n\tget source() {\n\t\treturn getString(this, 'source');\n\t}\n\n\tset source(val) {\n\t\tsetString(this, 'source', val);\n\t}\n\n\tget text() {\n\t\treturn getString(this, 'text');\n\t}\n\n\tset text(val) {\n\t\tsetString(this, 'text', val);\n\t}\n\n\tget url() {\n\t\tif (this.hasAttribute('url')) {\n\t\t\tconst url = new URL(this.getAttribute('url'), location.href).href;\n\t\t\tconst { source, medium, content } = this;\n\n\t\t\treturn setURLParams(url, { source, medium, content }).href;\n\t\t} else if (this.hasAttribute('source')) {\n\t\t\tconst { source, medium, content } = this;\n\n\t\t\treturn setURLParams(location.href, { source, medium, content });\n\t\t} else {\n\t\t\treturn location.href;\n\t\t}\n\t}\n\n\tset url(url) {\n\t\tif (typeof url === 'string' && url.length !== 0) {\n\t\t\tthis.setAttribute('url', url);\n\t\t} else {\n\t\t\tthis.removeAttribute('url');\n\t\t}\n\t}\n\n\t/**\n\t * @deprecated\n\t */\n\tget title() {\n\t\tconsole.warn('Use of `title` is deprecated. Please use `shareTitle` instead');\n\t\treturn this.hasAttribute('title') ? this.getAttribute('title') : document.title;\n\t}\n\n\t/**\n\t * @deprecated\n\t */\n\tset title(title) {\n\t\tconsole.warn('Use of `title` is deprecated. Please use `shareTitle` instead');\n\t\tthis.setAttribute('title', title);\n\t}\n}, { extends: 'button' });\n","export const GA = null;\n\nexport const env = (location.hostname === 'localhost' || location.hostname.endsWith('.netlify.live'))\n\t? 'development'\n\t: 'production';\n\nexport const dev = env === 'development';\n\nexport const site = {\n\ttitle: 'Jekyll Template',\n};\n","const protectedData = new WeakMap();\n\nexport const style = {\n\t'-webkit-appearance': 'button',\n\tappearance: 'button',\n\tdisplay: 'inline-block',\n\tcursor: 'pointer',\n};\n\nexport const states = {\n\tdisabled: '--disabled',\n};\n\nexport class HTMLCustomButtonElement extends HTMLElement {\n\tattachInternals() {\n\t\tconst internals = super.attachInternals();\n\t\tprotectedData.set(this, internals);\n\t\treturn internals;\n\t}\n\n\tget disabled() {\n\t\treturn this.hasAttribute('disabled');\n\t}\n\n\tset disabled(val) {\n\t\tthis.toggleAttribute('disabled', val);\n\t}\n\n\tattributeChangedCallback(name, oldVal, newVal) {\n\t\tif (name === 'disabled') {\n\t\t\tconst internals = protectedData.get(this);\n\n\t\t\tif (typeof newVal === 'string') {\n\t\t\t\tinternals.ariaDisabled = 'true';\n\t\t\t\tinternals.states.add(states.disabled);\n\t\t\t} else {\n\t\t\t\tinternals.ariaDisabled = 'false';\n\t\t\t\tinternals.states.delete(states.disabled);\n\t\t\t}\n\t\t}\n\t}\n\n\tconnectedCallback() {\n\t\tif (! protectedData.has(this)) {\n\t\t\tthis.attachInternals();\n\t\t}\n\n\t\tconst internals = protectedData.get(this);\n\n\t\tif (! (this.hasAttribute('role') || typeof internals.role === 'string')) {\n\t\t\tinternals.role = 'button';\n\t\t}\n\n\t\tif (! this.hasAttribute('tabindex')) {\n\t\t\tthis.tabIndex = 0;\n\t\t}\n\t}\n\n\tstatic get observedAttributes() {\n\t\treturn ['disabled'];\n\t}\n}\n","/**\n * @copyright 2023 Chris Zuber <admin@kernvalley.us>\n */\nexport const Facebook = {\n\tname: 'Facebook',\n\tshort_name: 'Facebook',\n\ticons: [{\n\t\tsrc: 'https://cdn.kernvalley.us/img/logos/facebook.svg',\n\t\ttype: 'image/svg+xml',\n\t}],\n\tshare_target: {\n\t\taction: 'https://www.facebook.com/sharer/sharer.php',\n\t\tmethod: 'GET',\n\t\tenctype: 'application/x-www-form-urlencoded',\n\t\tparams: {\n\t\t\ttitle: null,\n\t\t\ttext: 't',\n\t\t\turl: 'u',\n\t\t}\n\t}\n};\n\nexport const Twitter = {\n\tname: 'Twitter',\n\tshort_name: 'Twitter',\n\ticons: [{\n\t\tsrc: 'https://cdn.kernvalley.us/img/logos/twitter.svg',\n\t\ttype: 'image/svg+xml',\n\t}],\n\tshare_target: {\n\t\taction: 'https://twitter.com/compose/tweet/',\n\t\tmethod: 'GET',\n\t\tenctype: 'application/x-www-form-urlencoded',\n\t\tparams: {\n\t\t\ttitle: 'title',\n\t\t\ttext: 'text',\n\t\t\turl: 'url',\n\t\t}\n\t}\n};\n\nexport const LinkedIn = {\n\tname: 'LinkedIn',\n\tshort_name: 'LinkedIn',\n\ticons: [{\n\t\tsrc: 'https://cdn.kernvalley.us/img/logos/linkedin.svg',\n\t\ttype: 'image/svg+xml',\n\t}],\n\tshare_target: {\n\t\taction: 'https://www.linkedin.com/shareArticle/',\n\t\tmethod: 'GET',\n\t\tenctype: 'application/x-www-form-urlencoded',\n\t\tparams: {\n\t\t\ttitle: 'title',\n\t\t\ttext: 'summary',\n\t\t\turl: 'url',\n\t\t}\n\t}\n};\n\nexport const Reddit = {\n\tname: 'Reddit',\n\tshort_name: 'Reddit',\n\ticons: [{\n\t\tsrc: 'https://cdn.kernvalley.us/img/logos/reddit.svg',\n\t\ttype: 'image/svg+xml',\n\t}],\n\tshare_target: {\n\t\taction: 'https://www.reddit.com/submit/',\n\t\tmethod: 'GET',\n\t\tenctype: 'application/x-www-form-urlencoded',\n\t\tparams: {\n\t\t\ttitle: 'title',\n\t\t\ttext: null,\n\t\t\turl: 'url',\n\t\t}\n\t}\n};\n\nexport const Gmail = {\n\tname: 'Gmail',\n\tshort_name: 'Gmail',\n\ticons: [{\n\t\tsrc: 'https://cdn.kernvalley.us/img/logos/gmail.svg',\n\t\ttype: 'image/svg+xml',\n\t}],\n\tshare_target: {\n\t\taction: 'https://mail.google.com/mail/u/0/?view=cm&fs=1&tf=1',\n\t\tmethod: 'GET',\n\t\tenctype: 'application/x-www-form-urlencoded',\n\t\tparams: {\n\t\t\ttitle: 'su',\n\t\t\ttext: 'body',\n\t\t\turl: null,\n\t\t}\n\t}\n};\n\nexport const Email = {\n\tname: 'Email',\n\tshort_name: 'Email',\n\ticons: [{\n\t\tsrc: 'https://cdn.kernvalley.us/img/adwaita-icons/actions/mail-send.svg',\n\t\ttype: 'image/svg+xml',\n\t}],\n\tshare_target: {\n\t\taction: 'mailto:',\n\t\tmethod: 'GET',\n\t\tenctype: 'application/x-www-form-urlencoded',\n\t\tparams: {\n\t\t\ttitle: 'subject',\n\t\t\ttext: 'body',\n\t\t\turl: null,\n\t\t}\n\t}\n};\n\nexport const Tumblr = {\n\tname: 'Tumblr',\n\tshort_name: 'Tumblr',\n\ticons: [{\n\t\tsrc: 'https://cdn.kernvalley.us/img/logos/tumblr.svg',\n\t\ttype: 'image/svg+xml',\n\t}],\n\tshare_target: {\n\t\taction: 'https://www.tumblr.com/widgets/share/tool',\n\t\tmethod: 'GET',\n\t\tenctype: 'application/x-www-form-urlencoded',\n\t\tparams: {\n\t\t\ttitle: 'title',\n\t\t\ttext: null,\n\t\t\turl: 'canonicalUrl',\n\t\t}\n\n\t}\n};\n\nexport const Telegram = {\n\tname: 'Telegram',\n\tshort_name: 'Telegram',\n\ticons: [{\n\t\tsrc: 'https://cdn.kernvalley.us/img/logos/telegram.svg',\n\t\ttype: 'image/svg+xml',\n\t}],\n\tshare_target: {\n\t\taction: 'https://telegram.me/share/url',\n\t\tmethod: 'GET',\n\t\tenctype: 'application/x-www-form-urlencoded',\n\t\tparams: {\n\t\t\ttitle: null,\n\t\t\ttext: 'text',\n\t\t\turl: 'url',\n\t\t}\n\n\t}\n};\n\nexport const Pinterest = {\n\tname: 'Pinterest',\n\tshort_name: 'Pinterest',\n\ticons: [{\n\t\tsrc: 'https://cdn.kernvalley.us/img/logos/pinterest.svg',\n\t\ttype: 'image/svg+xml',\n\t}],\n\tshare_target: {\n\t\taction: 'https://www.pinterest.it/pin/create/button/',\n\t\tmethod: 'GET',\n\t\tenctype: 'application/x-www-form-urlencoded',\n\t\tparams: {\n\t\t\ttitle: null,\n\t\t\ttext: null,\n\t\t\turl: 'url',\n\t\t}\n\t}\n};\n\nexport const Evernote = {\n\tname: 'Evernote',\n\tshort_name: 'Evernote',\n\ticons: [{\n\t\tsrc: 'https://cdn.kernvalley.us/img/logos/evernote.svg',\n\t\ttype: 'image/svg+xml',\n\t}],\n\tshare_target: {\n\t\taction: 'https://www.evernote.com/clip.action',\n\t\tmethod: 'GET',\n\t\tenctype: 'application/x-www-form-urlencoded',\n\t\tparams: {\n\t\t\ttitle: null,\n\t\t\ttext: null,\n\t\t\turl: 'url',\n\t\t}\n\t}\n};\n\nexport const GooglePlus = {\n\tname: 'Google+',\n\tshort_name: 'Google+',\n\ticons: [{\n\t\tsrc: 'https://cdn.kernvalley.us/img/logos/google-plus.svg',\n\t\ttype: 'image/svg+xml',\n\t}],\n\tshare_target: {\n\t\taction: 'https://plus.google.com/share/',\n\t\tmethod: 'GET',\n\t\tenctype: 'application/x-www-form-urlencoded',\n\t\tparams: {\n\t\t\ttitle: null,\n\t\t\ttext: null,\n\t\t\turl: 'url',\n\t\t}\n\t}\n};\n\nexport const KRVAds = {\n\ttitle: 'Kern Valleys Ads',\n\tshort_name: 'KRV Ads',\n\ticons:[{\n\t\tsrc: 'https://cdn.kernvalley.us/img/branding/ads.kernvalley.us.svg',\n\t\ttype: 'image/svg+xml',\n\t}],\n\tshare_target: {\n\t\taction: 'https://ads.kernvalley.us/#text',\n\t\tmethod: 'GET',\n\t\tenctype: 'application/x-www-form-urlencoded',\n\t\tparams: {\n\t\t\ttitle: 'label',\n\t\t\ttext: 'description',\n\t\t\turl: 'url',\n\t\t}\n\t}\n};\n\nexport function parseURL(target, url = new URL(location.href)) {\n\tif (! ('share_target' in target && 'action' in target.share_target && 'params' in target.share_target)) {\n\t\tthrow new Error('Invalid share target');\n\t} else if (typeof url === 'string') {\n\t\turl = new URL(url);\n\t}\n\n\tconst { params = { title: 'title', text: 'text', url: 'url' }} = target.share_target;\n\n\treturn {\n\t\ttitle: url.searchParams.get(params.title),\n\t\ttext: url.searchParams.get(params.text),\n\t\turl: url.searchParams.get(params.url),\n\t};\n}\n\nexport function getShareURL(target, { title, text, url, files } = {}) {\n\tif (! ('share_target' in target && 'action' in target.share_target && 'params' in target.share_target)) {\n\t\tthrow new Error('Invalid share target');\n\t} else if (Array.isArray(files) && files.length !== 0) {\n\t\tthrow new Error('Sharing files is not supported');\n\t} else if (typeof target.method === 'string' && target.method.toLowerCase() !== 'get') {\n\t\tthrow new Error(`Sharing by ${target.method} is not supported`);\n\t} else if (typeof text !== 'string' && typeof title !== 'string' && typeof url !== 'string') {\n\t\tthrow new Error('No text, url, and title given to share');\n\t} else {\n\t\tif (url instanceof URL) {\n\t\t\turl = url.href;\n\t\t}\n\n\t\tconst { action, params = { title: 'title', text: 'text', url: 'url' }} = target.share_target;\n\n\t\tconst endpoint = new URL(action);\n\n\t\tif (typeof params.title === 'string' && typeof title === 'string') {\n\t\t\tendpoint.searchParams.set(params.title, title);\n\t\t}\n\n\t\tif (typeof params.url === 'string' && typeof url === 'string' && typeof params.text === 'string' && typeof text === 'string') {\n\t\t\tendpoint.searchParams.set(params.url, url);\n\t\t\tendpoint.searchParams.set(params.text, text);\n\t\t} else if (typeof params.text === 'string' && typeof text === 'string' && typeof url === 'string') {\n\t\t\tendpoint.searchParams.set(params.text, `${text} | ${url}`);\n\t\t} else if (typeof params.url === 'string' && typeof url === 'string') {\n\t\t\tendpoint.searchParams.set(params.url, url);\n\t\t} else if (typeof params.text === 'string' && typeof text === 'string') {\n\t\t\tendpoint.searchParams.set(params.text, text);\n\t\t}\n\n\t\treturn endpoint.href;\n\t}\n}\n\nexport const ALL_TARGETS = [Facebook, Twitter, Reddit, LinkedIn, Tumblr, Telegram, Pinterest, Gmail, Email];\n","// import HTMLCustomElement from '../custom-element.js';\nimport { HTMLCustomButtonElement } from './custom.js';\nimport { popup } from '@shgysk8zer0/kazoo/popup.js';\nimport { getHTML } from '@shgysk8zer0/kazoo/http.js';\nimport { hasGa, send } from '@shgysk8zer0/kazoo/google-analytics.js';\nimport { meta } from '../import.meta.js';\nimport { getURLResolver, callOnce } from '@shgysk8zer0/kazoo/utility.js';\nimport { loadStylesheet } from '@shgysk8zer0/kazoo/loader.js';\nimport { getString, setString, getBool, setBool, getURL, setURL } from '@shgysk8zer0/kazoo/attrs.js';\nimport { setUTMParams } from '@shgysk8zer0/kazoo/utility.js';\nimport { createPolicy } from '@shgysk8zer0/kazoo/trust.js';\nimport { registerCustomElement } from '@shgysk8zer0/kazoo/custom-elements.js';\nimport {\n\tFacebook, Twitter, Reddit, LinkedIn, Gmail, Pinterest, Email, Tumblr, Telegram, getShareURL,\n} from '@shgysk8zer0/kazoo/share-targets.js';\n\nconst protectedData = new WeakMap();\n\nconst labels = {\n\tfacebook: 'Share this on Facebook',\n\ttwitter: 'Share this on Twitter',\n\treddit: 'Share this on Reddit',\n\tlinkedin: 'Share this on LinkedIn',\n\tgmail: 'Share this via Gmail',\n\tpinterest: 'Share this on Pinterest',\n\ttumblr: 'Share this on Tumblr',\n\ttelegram: 'Share this via Telegram',\n\tclipboard: 'Send this to your clipboard',\n\tprint: 'Print this',\n\temail: 'Send this via email',\n};\n\nconst resolveURL = getURLResolver({ base: meta.url, path: './button/' });\nexport const policy = createPolicy('share-to-buttons#html', {\n\tcreateHTML: input => input,\n});\n\nconst getTemplate = callOnce(() => getHTML(resolveURL('./share-to.html'), { policy }));\n\nfunction log(btn) {\n\tif (hasGa()) {\n\t\tsend({\n\t\t\thitType: 'event',\n\t\t\teventCategory: `${btn.tagName.toLowerCase()} | ${btn.target}`,\n\t\t\teventAction: btn.url,\n\t\t\teventLabel: btn.title || document.title,\n\t\t\ttransport: 'beacon',\n\t\t});\n\t}\n}\n\nfunction updateLabel(el) {\n\tconst { internals } = protectedData.get(el);\n\tinternals.ariaLabel = labels[el.target.toLowerCase()] || 'No handler available for this button';\n}\n\nfunction openShare(target, { title, text, url, height = 360, width = 720, name = 'SharePopup' } = {}) {\n\treturn popup(getShareURL(target, { title, text, url }), { height, width, name });\n}\n\nasync function handler ({ type, key, isTrusted, currentTarget }) {\n\tif (isTrusted && ! currentTarget.disabled && (type === 'click' || key === 'Enter' || key === ' ')) {\n\t\tconst { internals } = protectedData.get(currentTarget);\n\t\tinternals.ariaPressed = 'true';\n\t\tconst { shareTitle, target, url, text } = currentTarget;\n\t\tawait share({ target, title: shareTitle, url, text }).catch(console.error);\n\t\tlog(currentTarget);\n\t\tinternals.ariaPressed = 'false';\n\t}\n}\n\nasync function share({\n\ttarget,\n\ttitle = document.title,\n\ttext = '',\n\turl = location.href,\n}) {\n\tswitch(target.toLowerCase()) {\n\t\tcase 'facebook':\n\t\t\topenShare(Facebook, { title, text, url });\n\t\t\tbreak;\n\n\t\tcase 'twitter':\n\t\t\topenShare(Twitter, { title, text, url });\n\t\t\tbreak;\n\n\t\tcase 'reddit':\n\t\t\topenShare(Reddit, { title, text, url });\n\t\t\tbreak;\n\n\t\tcase 'linkedin':\n\t\t\topenShare(LinkedIn, { title, text, url });\n\t\t\tbreak;\n\n\t\tcase 'gmail':\n\t\t\topenShare(Gmail, { title, text, url });\n\t\t\tbreak;\n\n\t\tcase 'pinterest':\n\t\t\topenShare(Pinterest, { title, text, url });\n\t\t\tbreak;\n\n\t\tcase 'tumblr':\n\t\t\topenShare(Tumblr, { title, text, url });\n\t\t\tbreak;\n\n\t\tcase 'telegram':\n\t\t\topenShare(Telegram, { title, text, url });\n\t\t\tbreak;\n\n\t\tcase 'clipboard':\n\t\t\tif (typeof text === 'string' && text.length !== 0) {\n\t\t\t\tnavigator.clipboard.writeText(`${title} <${url}>\\n${text}`)\n\t\t\t\t\t.then(() => alert('Copied to clipboard'));\n\t\t\t} else {\n\t\t\t\tnavigator.clipboard.writeText(`${title} <${url}>`)\n\t\t\t\t\t.then(() => alert('Copied to clipboard'));\n\t\t\t}\n\t\t\tbreak;\n\n\t\tcase 'print':\n\t\t\twindow.print();\n\t\t\tbreak;\n\n\t\tcase 'email':\n\t\t\topenShare(Email, { title, text, url });\n\t\t\tbreak;\n\n\t\tdefault:\n\t\t\tthrow new Error(`Unknown share target: ${target}`);\n\t}\n}\n\nregisterCustomElement('share-to-button', class HTMLShareToButtonElement extends HTMLCustomButtonElement {\n\tconstructor({ target = null, url = null, source = null, medium = null, content = null } = {}) {\n\t\tsuper();\n\t\tconst shadow = this.attachShadow({ mode: 'open' });\n\t\tconst internals = this.attachInternals();\n\t\tprotectedData.set(this, { shadow, internals });\n\n\t\tgetTemplate().then(tmp => tmp.cloneNode(true)).then(tmp => {\n\t\t\tconst wasHidden = this.hidden;\n\t\t\tinternals.ariaHasPopup = 'dialog';\n\t\t\tinternals.ariaPressed = 'false';\n\t\t\tthis.hidden = true;\n\t\t\tif (typeof target === 'string') {\n\t\t\t\tthis.target = target;\n\t\t\t}\n\n\t\t\tif (typeof url === 'string') {\n\t\t\t\tthis.url = url;\n\t\t\t}\n\n\t\t\tif (typeof source === 'string') {\n\t\t\t\tthis.source = source;\n\t\t\t}\n\n\t\t\tif (typeof medium === 'string') {\n\t\t\t\tthis.medium = medium;\n\t\t\t}\n\n\t\t\tif (typeof content === 'string') {\n\t\t\t\tthis.content = content;\n\t\t\t}\n\t\t\tthis.shadowRoot.append(tmp);\n\n\t\t\tloadStylesheet(resolveURL('./share-to.css'), { parent: this.shadowRoot }).then(() => {\n\t\t\t\tthis.hidden = wasHidden;\n\t\t\t\tthis.dispatchEvent(new Event('ready'));\n\t\t\t});\n\t\t});\n\n\t\tthis.addEventListener('click', handler, { passive: true });\n\t\tthis.addEventListener('keydown', handler, { passive: true });\n\t}\n\n\tget ready() {\n\t\treturn new Promise(resolve => {\n\t\t\tif (this.shadowRoot.childElementCount === 0) {\n\t\t\t\tthis.addEventListener('ready', () => resolve(this), {once: true});\n\t\t\t} else {\n\t\t\t\tresolve(this);\n\t\t\t}\n\t\t});\n\t}\n\n\tget content() {\n\t\treturn getString(this, 'content', { fallback: 'share-to-button' });\n\t}\n\n\tset content(val) {\n\t\tsetString(this, 'content', val);\n\t}\n\n\tget disabled() {\n\t\treturn getBool(this, 'disabled');\n\t}\n\n\tset disabled(val) {\n\t\tprotectedData.get(this).ariaDisabled = val ? 'true' : 'false';\n\t\tgetBool(this, 'disabled', val);\n\t}\n\n\tget medium() {\n\t\treturn getString(this, 'medium', { fallback: 'share' });\n\t}\n\n\tset medium(val) {\n\t\tsetString(this, 'medium', val);\n\t}\n\n\tget source() {\n\t\treturn getString(this, 'source');\n\t}\n\n\tset source(val) {\n\t\tsetString(this, 'source', val);\n\t}\n\n\tget target() {\n\t\treturn getString(this, 'target');\n\t}\n\n\tset target(val) {\n\t\tsetString(this, 'target', val);\n\t}\n\n\tget url() {\n\t\tif (this.hasAttribute('url')) {\n\t\t\tconst url = getURL(this, 'url');\n\t\t\tconst { source, medium, content } = this;\n\t\t\treturn setUTMParams(url, { source, medium, content }).href;\n\t\t} else {\n\t\t\tconst { source, medium, content } = this;\n\n\t\t\tif (typeof source === 'string' && typeof medium === 'string') {\n\t\t\t\tconst url = new URL(location.href);\n\t\t\t\treturn setUTMParams(url, { source, medium, content }).href;\n\t\t\t} else {\n\t\t\t\treturn location.href;\n\t\t\t}\n\t\t}\n\t}\n\n\tset url(val) {\n\t\tsetURL(this, 'url', val);\n\t}\n\n\tget text() {\n\t\treturn getString(this, 'text');\n\t}\n\n\tset text(val) {\n\t\tsetString(this, 'text', val);\n\t}\n\n\t// `title` is not available, so use `sharetitle` / `shareTitle`\n\n\tget shareTitle() {\n\t\treturn getString(this, 'sharetitle', { fallback: document.title });\n\t}\n\n\tset shareTitle(val) {\n\t\tsetString(this, 'sharetitle', val);\n\t}\n\n\tget stack() {\n\t\treturn getBool(this, 'stack');\n\t}\n\n\tset stack(val) {\n\t\tsetBool(this, 'stack', val);\n\t}\n\n\tasync attributeChangedCallback(name, oldValue, newValue) {\n\t\tswitch (name) {\n\t\t\tcase 'target':\n\t\t\t\tupdateLabel(this);\n\t\t\t\tif (typeof newValue !== 'string' || newValue.length === 0) {\n\t\t\t\t\tthis.hidden = true;\n\t\t\t\t} else if (newValue.toLowerCase() === 'clipboard') {\n\t\t\t\t\tthis.hidden = ! (('clipboard' in navigator) && navigator.clipboard.writeText instanceof Function);\n\t\t\t\t} else {\n\t\t\t\t\tthis.ready.then(() => {\n\t\t\t\t\t\tthis.shadowRoot.getElementById('network').textContent = newValue;\n\t\t\t\t\t});\n\t\t\t\t\tthis.hidden = false;\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tthrow new Error(`Unhandled attribute change: ${name}`);\n\t\t}\n\t}\n\n\tstatic get observedAttributes() {\n\t\treturn [\n\t\t\t'target',\n\t\t];\n\t}\n});\n","/**\n * @copyright 2023 Chris Zuber <admin@kernvalley.us>\n */\nexport function popup(url, {\n\tname = '',\n\treferrer = false,\n\topener = false,\n\theight = null,\n\twidth = null,\n\tx = null,\n\ty = null,\n\tresizable = true,\n\tlocation = false,\n\tscrollbars = true,\n} = {}) {\n\tlet flags = [];\n\n\tif (opener === false) {\n\t\tflags.push('noopener');\n\t}\n\n\tif (referrer === false) {\n\t\tflags.push('noreferrer');\n\t}\n\n\t// Some properties only apply to sized windows\n\tif (Number.isInteger(width) || Number.isInteger(height)) {\n\t\tif (Number.isInteger(height)) {\n\t\t\tflags.push(`height=${height}`);\n\t\t}\n\n\t\tif (Number.isInteger(width)) {\n\t\t\tflags.push(`width=${width}`);\n\t\t}\n\n\t\tif (Number.isInteger(x)) {\n\t\t\tflags.push(`left=${x}`);\n\t\t}\n\n\t\tif (Number.isInteger(y)) {\n\t\t\tflags.push(`top=${y}`);\n\t\t}\n\n\t\tif (resizable) {\n\t\t\tflags.push('resiabled');\n\t\t}\n\n\t\tif (location) {\n\t\t\tflags.push('location');\n\t\t}\n\n\t\tif (scrollbars) {\n\t\t\tflags.push('scrollbars');\n\t\t}\n\t}\n\n\treturn window.open(url, name, flags.join(','));\n}\n","/**\n * @copyright 2023 Chris Zuber <admin@kernvalley.us>\n */\nimport { getDeferred } from './promises.js';\n\nconst protectedData = new WeakMap();\n\nconst observer = new IntersectionObserver((entries, observer) => {\n\tentries.forEach(entry => {\n\t\tif (entry.isIntersecting) {\n\t\t\tconst { resolve } = protectedData.get(entry.target);\n\t\t\tprotectedData.delete(entry.target);\n\t\t\tresolve(entry);\n\t\t\tobserver.unobserve(entry.target);\n\t\t}\n\t});\n}, {\n\trootMargin: `${Math.min(250, Math.floor(screen.height * 0.3))}px`,\n});\n\nexport async function whenIntersecting(target, { signal, base = document } = {}) {\n\tconst { resolve, reject, promise } = getDeferred();\n\n\tif (signal instanceof AbortSignal && signal.aborted) {\n\t\treject(signal.reason);\n\t} else if (typeof target === 'string') {\n\t\twhenIntersecting(base.querySelector(target), { signal }).then(resolve).catch(reject);\n\t} else if (! (target instanceof Element)) {\n\t\treject(new TypeError('Non-elements can never intersect'));\n\t} else if (protectedData.has(target)) {\n\t\tprotectedData.get(target).promise.then(resolve).catch(reject);\n\n\t\tif (signal instanceof AbortSignal) {\n\t\t\tsignal.addEventListener('abort', ({ target: { reason }}) => {\n\t\t\t\treject(reason);\n\t\t\t}, { once: true });\n\t\t}\n\t} else {\n\t\tprotectedData.set(target, { resolve, reject, promise });\n\t\tobserver.observe(target);\n\n\t\tif (signal instanceof AbortSignal) {\n\t\t\tsignal.addEventListener('abort', ({ target: { reason }}) => {\n\t\t\t\tobserver.unobserve(target);\n\n\t\t\t\tif (protectedData.has(target)) {\n\t\t\t\t\tprotectedData.get(target).reject(reason);\n\t\t\t\t\tprotectedData.delete(target);\n\t\t\t\t}\n\t\t\t}, { once: true });\n\t\t}\n\t}\n\n\treturn promise;\n}\n","import { text, attr, remove, on } from '@shgysk8zer0/kazoo/dom.js';\nimport { getJSON } from '@shgysk8zer0/kazoo/http.js';\nimport { meta } from '../import.meta.js';\nimport { loadStylesheet } from '@shgysk8zer0/kazoo/loader.js';\nimport { getDeferred } from '@shgysk8zer0/kazoo/promises.js';\nimport { whenIntersecting } from '@shgysk8zer0/kazoo/intersect.js';\nimport { getURLResolver } from '@shgysk8zer0/kazoo/utility.js';\nimport { getString, setString, getBool, setBool } from '@shgysk8zer0/kazoo/attrs.js';\nimport { getTemplateLoader }  from '@shgysk8zer0/kazoo/loader.js';\nimport { createPolicy } from '@shgysk8zer0/kazoo/trust.js';\nimport { registerCustomElement } from '@shgysk8zer0/kazoo/custom-elements.js';\n\nconst ENDPOINT = 'https://api.github.com';\nconst policy = createPolicy('github-user#html', { createHTML: input => input });\nconst resolveURL = getURLResolver({ base : meta.url, path: './github/' });\nconst getTemplate = getTemplateLoader(resolveURL('./user.html'), { policy });\n\nasync function getUser(user) {\n\tconst key = `github-user-${user}`;\n\n\tif (sessionStorage.hasOwnProperty(key)) {\n\t\treturn JSON.parse(sessionStorage.getItem(key));\n\t} else {\n\t\tconst data = await getJSON(new URL(`/users/${user}`, ENDPOINT));\n\t\tsessionStorage.setItem(key, JSON.stringify(data));\n\t\treturn data;\n\t}\n}\n\nregisterCustomElement('github-user', class HTMLGitHubUserElement extends HTMLElement {\n\tconstructor(user = null) {\n\t\tsuper();\n\n\t\tthis.attachShadow({ mode: 'open' });\n\t\tconst internals = this.attachInternals();\n\t\tinternals.states.add('--loading');\n\n\t\tPromise.resolve().then(() => {\n\t\t\tif (typeof user === 'string') {\n\t\t\t\tthis.user = user;\n\t\t\t}\n\n\t\t\tPromise.all([\n\t\t\t\tthis.whenLoad,\n\t\t\t\tthis.whenConnected,\n\t\t\t\twhenIntersecting(this),\n\t\t\t]).then(() => Promise.all([\n\t\t\t\tgetTemplate(),\n\t\t\t\tloadStylesheet(resolveURL('./user.css'), { parent: this.shadowRoot }),\n\t\t\t]).then(([tmp]) => {\n\t\t\t\tthis.shadowRoot.append(tmp);\n\t\t\t\tthis.dispatchEvent(new Event('ready'));\n\t\t\t\tinternals.states.delete('--loading');\n\t\t\t})).catch(err => {\n\t\t\t\tconsole.error(err);\n\t\t\t\tinternals.state.delete('--loading');\n\t\t\t\tinternals.states.add('--error');\n\t\t\t});\n\t\t});\n\t}\n\n\tget ready() {\n\t\tconst { resolve, promise } = getDeferred();\n\n\t\tif (this.shadowRoot.childElementCount < 2) {\n\t\t\ton([this], ['ready'], () => resolve(), { once: true });\n\t\t} else {\n\t\t\tresolve();\n\t\t}\n\t\treturn promise;\n\t}\n\n\tget bio() {\n\t\treturn getBool(this, 'bio');\n\t}\n\n\tset bio(val) {\n\t\tsetBool(this, 'bio', val);\n\t}\n\n\tget user() {\n\t\treturn getString(this, 'user');\n\t}\n\n\tset user(val) {\n\t\tsetString(this, 'user', val);\n\t}\n\n\tattributeChangedCallback(name, oldVal, newVal) {\n\t\tswitch(name) {\n\t\t\tcase 'user':\n\t\t\t\tif (typeof newVal === 'string' && newVal.length !== 0) {\n\t\t\t\t\tPromise.all([\n\t\t\t\t\t\tgetUser(newVal),\n\t\t\t\t\t\tthis.ready,\n\t\t\t\t\t]).then(async ([user]) => {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tconst base = this.shadowRoot;\n\n\t\t\t\t\t\t\tattr('[part~=\"avatar\"]', {\n\t\t\t\t\t\t\t\tsrc: `${user.avatar_url}&s=64`,\n\t\t\t\t\t\t\t\theight: 64,\n\t\t\t\t\t\t\t\twidth: 64,\n\t\t\t\t\t\t\t}, { base });\n\n\t\t\t\t\t\t\ttext('[part~=\"username\"]', user.login, { base });\n\t\t\t\t\t\t\ttext('[part~=\"name\"]', user.name, { base });\n\t\t\t\t\t\t\tattr('[part~=\"github\"]', {\n\t\t\t\t\t\t\t\thref: user.html_url,\n\t\t\t\t\t\t\t\ttitle: `View ${user.login}'s profile on GitHub`,\n\t\t\t\t\t\t\t}, { base });\n\n\t\t\t\t\t\t\tif (user.bio !== null) {\n\t\t\t\t\t\t\t\ttext('[part~=\"bio\"]', user.bio, { base });\n\t\t\t\t\t\t\t\tattr('[part~=\"bio\"]', { hidden: false }, { base });\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tattr('[part~=\"bio\"]', { hidden: true }, { base });\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (user.location !== null) {\n\t\t\t\t\t\t\t\ttext('[part~=\"location\"]', user.location, { base });\n\t\t\t\t\t\t\t\tattr('[part~=\"location-container\"]', { hidden: false }, { base });\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tattr('[part~=\"location-container\"]', { hidden: true }, { base });\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (user.email !== null) {\n\t\t\t\t\t\t\t\ttext('[part~=\"email\"]', user.email, { base });\n\t\t\t\t\t\t\t\tattr('[part~=\"email\"]',{ href: `mailto:${user.email}`}, { base });\n\t\t\t\t\t\t\t\tattr('[part~=\"email-container\"]', { hidden: false }, { base });\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tattr('[part~=\"email-container\"]', { hidden: true }, { base });\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (typeof user.company === 'string') {\n\t\t\t\t\t\t\t\ttext('[part~=\"company\"]', user.company, { base });\n\t\t\t\t\t\t\t\tattr('[part~=\"company\"]', {\n\t\t\t\t\t\t\t\t\thref: `https://github.com/${user.company.replace('@', '')}`,\n\t\t\t\t\t\t\t\t}, { base });\n\t\t\t\t\t\t\t\tattr('[part~=\"company-container\"]', { hidden: false }, { base });\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tattr('[part~=\"company-container\"]', { hidden: true }, { base });\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (typeof user.blog === 'string' && user.blog.length !== 0) {\n\t\t\t\t\t\t\t\tconst blog = new URL(user.blog);\n\t\t\t\t\t\t\t\tattr('[part~=\"blog\"]', { href: blog.href }, { base });\n\t\t\t\t\t\t\t\ttext('[part~=\"blog\"]', blog.hostname, { base });\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tremove('[part~=\"blog-container\"]', { base });\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} catch(err) {\n\t\t\t\t\t\t\tconsole.error(err);\n\t\t\t\t\t\t\tthis.hidden = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tconnectedCallback() {\n\t\tthis.dispatchEvent(new Event('connected'));\n\t}\n\n\tstatic get observedAttributes() {\n\t\treturn [\n\t\t\t'user',\n\t\t];\n\t}\n});\n","import { registerCustomElement } from '@shgysk8zer0/kazoo/custom-elements.js';\n\nexport default class HTMLCurrentYearElement extends HTMLTimeElement {\n\tconnectedCallback() {\n\t\tconst now = new Date();\n\t\tthis.textContent = now.getFullYear();\n\t\tthis.dateTime = now.toISOString();\n\t}\n}\n\nregisterCustomElement('current-year', HTMLCurrentYearElement, { extends: 'time' });\n","import { registerCustomElement } from '@shgysk8zer0/kazoo/custom-elements.js';\nimport { getJSON } from '@shgysk8zer0/kazoo/http.js';\n\nconst ENDPOINT = 'https://baconipsum.com/api/';\n\nregisterCustomElement('bacon-ipsum', class HTMLBaconIpsumElement extends HTMLElement {\n\tconstructor() {\n\t\tsuper();\n\t\tthis.update();\n\t}\n\n\tget lines() {\n\t\treturn [...this.children];\n\t}\n\n\tset lines(lines) {\n\t\tif (! Array.isArray(lines)) {\n\t\t\tthrow new Error('Lines must be an array');\n\t\t} else {\n\t\t\tconst els = lines.map(line => {\n\t\t\t\tif (line instanceof HTMLElement) {\n\t\t\t\t\treturn line;\n\t\t\t\t} else if (typeof line === 'string') {\n\t\t\t\t\tconst el = document.createElement('p');\n\t\t\t\t\tel.textContent = line;\n\t\t\t\t\treturn el;\n\t\t\t\t} else {\n\t\t\t\t\tthrow new TypeError('Attempting to set line to a non-string non-element');\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tthis.replaceChildren(...els);\n\t\t}\n\t}\n\n\tget paras() {\n\t\treturn parseInt(this.getAttribute('paras')) || 5;\n\t}\n\n\tset paras(num) {\n\t\tthis.setAttribute('paras', num);\n\t}\n\n\tget startWithLorem() {\n\t\treturn this.hasAttribute('start-with-lorem');\n\t}\n\n\tset startWithLorem(enabled) {\n\t\tthis.toggleAttribute('start-with-lorem', enabled);\n\t}\n\n\tget filler() {\n\t\treturn this.hasAttribute('filler');\n\t}\n\n\tset filler(enabled) {\n\t\tthis.toggleAttribute('filler', enabled);\n\t}\n\n\tclear() {\n\t\tthis.replaceChildren();\n\t}\n\n\tasync update({ signal } = {}) {\n\t\tconst { paras, startWithLorem, filler } = this;\n\t\tconst lines = await HTMLBaconIpsumElement.generate({paras, startWithLorem, filler, signal });\n\t\tthis.lines = lines;\n\t}\n\n\tstatic async generate({\n\t\tparas          = 5,\n\t\tstartWithLorem = true,\n\t\tfiller         = false,\n\t\tsignal,\n\t} = {}) {\n\t\tconst url = new URL(ENDPOINT);\n\n\t\turl.searchParams.set('paras', paras);\n\t\turl.searchParams.set('format', 'json');\n\n\t\tif (startWithLorem) {\n\t\t\turl.searchParams.set('start-with-lorem', 1);\n\t\t}\n\n\t\tif (filler) {\n\t\t\turl.searchParams.set('type', 'meat-and-filler');\n\t\t} else {\n\t\t\turl.searchParams.set('type', 'all-meat');\n\t\t}\n\n\t\treturn getJSON(url, { signal });\n\t}\n\n\tattributeChangedCallback(/*name, oldValue, newValue*/) {\n\t\tif (this.isConnected && this.lines.length !== 0) {\n\t\t\tthis.update();\n\t\t}\n\t}\n\n\tstatic get observedAttributes() {\n\t\treturn [\n\t\t\t'paras',\n\t\t\t'start-with-lorem',\n\t\t\t'filler',\n\t\t];\n\t}\n});\n","/**\n * @copyright 2023 Chris Zuber <admin@kernvalley.us>\n */\nexport const supported = 'serviceWorker' in navigator && navigator.serviceWorker.register instanceof Function;\nexport const controller = new AbortController();\nexport const signal = controller.signal;\nexport const aborted = new Promise(resolve => {\n\tif (signal.aborted) {\n\t\tresolve();\n\t} else {\n\t\tsignal.addEventListener('abort', () => resolve(), { once: true });\n\t}\n});\n\nexport const promise = new Promise((resolve, reject) => {\n\tif (! supported) {\n\t\tcontroller.abort();\n\t\treject(new DOMException('Service Worker not supported'));\n\t} else {\n\t\tglobalThis.addEventListener('beforeinstallprompt', event => {\n\t\t\tevent.preventDefault();\n\t\t\tresolve(event);\n\t\t}, { signal, once: true });\n\n\t\tcontroller.signal.addEventListener('abort', () => {\n\t\t\treject(new DOMException('Installation aborted'));\n\t\t}, { once: true });\n\t}\n});\n\nexport async function registerButton(el) {\n\tif (! (el instanceof HTMLButtonElement)) {\n\t\tthrow new DOMException('Not a <button>');\n\t} else if (signal.aborted) {\n\t\tel.disabled = true;\n\t\tthrow new DOMException('PWA installation aborted');\n\t} else {\n\t\tel.disabled = true;\n\t\tconst event = await promise;\n\t\tconst platforms = event.platforms;\n\t\tel.disabled = false;\n\n\t\treturn await new Promise((resolve, reject) => {\n\t\t\tlet resolved = false;\n\t\t\taborted.then(() => {\n\t\t\t\tel.disabled = true;\n\t\t\t\tif (! resolved) {\n\t\t\t\t\tresolved = true;\n\t\t\t\t\treject(new DOMException('Installation aborted'));\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tel.addEventListener('click', async () => {\n\t\t\t\tconst afterInstall =  new CustomEvent('afterinstallprompt');\n\t\t\t\tafterInstall.platforms = platforms;\n\t\t\t\tafterInstall.userResponse = await Promise.all([\n\t\t\t\t\tevent.userResponse,\n\t\t\t\t\tevent.prompt(),\n\t\t\t\t]).then(([resp]) => resp);\n\n\t\t\t\tel.dispatchEvent(afterInstall);\n\t\t\t\tel.disabled = true;\n\n\t\t\t\tif (afterInstall.userResponse === 'accepted') {\n\t\t\t\t\tresolved = true;\n\t\t\t\t\tresolve({ userResponse: afterInstall.userResponse, platforms });\n\t\t\t\t\tcontroller.abort();\n\t\t\t\t} else {\n\t\t\t\t\tresolved = true;\n\t\t\t\t\treject(new DOMException('User aborted installation'));\n\t\t\t\t\tcontroller.abort();\n\t\t\t\t}\n\t\t\t}, { signal });\n\t\t});\n\t}\n}\n","import { registerCustomElement } from '@shgysk8zer0/kazoo/custom-elements.js';\nimport { meta } from '../import.meta.js';\nimport { getURLResolver } from '@shgysk8zer0/kazoo/utility.js';\nimport { loadStylesheet } from '@shgysk8zer0/kazoo/loader.js';\nimport { getHTML } from '@shgysk8zer0/kazoo/http.js';\nimport { query, text, on, off } from '@shgysk8zer0/kazoo/dom.js';\nimport { createElement } from '@shgysk8zer0/kazoo/elements.js';\nimport { hasGa, send } from '@shgysk8zer0/kazoo/google-analytics.js';\nimport { registerButton } from '@shgysk8zer0/kazoo/pwa-install.js';\nimport { createPolicy } from '@shgysk8zer0/kazoo/trust.js';\nimport { getManifest } from '@shgysk8zer0/kazoo/http.js';\nimport { callOnce, autoServiceWorkerRegistration } from '@shgysk8zer0/kazoo/utility.js';\nimport '../notification/html-notification.js';\n\nconst policy = createPolicy('pwa-install', {\n\tcreateHTML: input => input,\n\t// How can I verify this correctly?\n\tcreateScriptURL: input => {\n\t\tif (new URL(input, document.baseURI).origin === location.origin) {\n\t\t\treturn input;\n\t\t} else {\n\t\t\tthrow new TypeError(`${input} is not a same-origin script`);\n\t\t}\n\t},\n});\n\nconst resolveURL = getURLResolver({ base: meta.url, path: './install/' });\nconst getTemplate = callOnce(() => getHTML(resolveURL('./prompt.html'), { policy }));\nconst protectedData = new WeakMap();\n\nfunction getBySize(opts, width) {\n\tif (Array.isArray(opts)) {\n\t\tconst match = opts.find(opt => opt.sizes.startsWith(`${width}x`));\n\t\treturn match || { src: null };\n\t} else {\n\t\treturn { src: null };\n\t}\n}\n\nfunction getPicture({\n\topts           = [],\n\tsizes          = '100%',\n\tdecoding       = 'async',\n\tloading        = 'lazy',\n\tcrossOrigin    = 'anonymous',\n\treferrerPolicy = 'no-referrer',\n\talt            = 'image',\n\tfallbackWidth  = 192,\n} = {}) {\n\tconst pic = document.createElement('picture');\n\tconst img = document.createElement('img');\n\n\timg.decoding = decoding;\n\timg.loading = loading;\n\timg.alt = alt;\n\timg.sizes = sizes;\n\timg.crossOrigin = crossOrigin;\n\timg.referrerPolicy = referrerPolicy;\n\timg.src = getBySize(opts, fallbackWidth).src;\n\n\tconst srcs = opts.reduce(((srcs, {src, sizes = '', type = null} = {}) => {\n\t\tconst [width = null] = sizes.split('x', 1);\n\t\tif (! (srcs.hasOwnProperty(type))) {\n\t\t\tsrcs[type] = [`${src} ${width}w`];\n\t\t} else {\n\t\t\tsrcs[type].push(`${src} ${width}w`);\n\t\t}\n\n\t\treturn srcs;\n\t}), {});\n\n\tpic.append(...Object.entries(srcs).map(([type, srcs]) => {\n\t\tconst src = document.createElement('source');\n\t\tsrc.type = type;\n\t\tsrc.srcset = srcs.join(', ');\n\t\tsrc.sizes = img.sizes;\n\t\treturn src;\n\t}), img);\n\n\treturn pic;\n}\n\nfunction getIcon(...icons) {\n\tlet icon = icons.find(icon => icon.type === 'image/svg+xml');\n\n\tif (icon) {\n\t\tconst img = document.createElement('img');\n\t\timg.src = icon.src;\n\t\timg.decoding = 'async';\n\t\timg.loading = 'lazy';\n\t\timg.alt = 'App Icon';\n\t\timg.height = 192;\n\t\timg.width = 192;\n\n\t\treturn img;\n\t} else {\n\t\treturn getPicture({\n\t\t\topts: icons,\n\t\t\tsizes: '10vmax',\n\t\t\talt: 'App Icon',\n\t\t});\n\t}\n}\n\nif ('serviceWorker' in navigator && 'serviceWorker' in document.documentElement.dataset) {\n\tconsole.warn('Installing service workers via <install-prompt> is deprecated and will be removed.');\n\tautoServiceWorkerRegistration({ policy });\n}\n\nregisterCustomElement('install-prompt', class HTMLInstallPromptElement extends HTMLElement {\n\tconstructor() {\n\t\tsuper();\n\t\tconst shadow = this.attachShadow({ mode: 'closed' });\n\t\tconst internals = this.attachInternals();\n\t\tprotectedData.set(this, { shadow, internals });\n\n\t\tPromise.all([\n\t\t\tgetTemplate().then(tmp => tmp.cloneNode(true)),\n\t\t\tgetManifest(),\n\t\t\tloadStylesheet(resolveURL('./prompt.css'), { parent: shadow }),\n\t\t]).then(async ([base, manifest]) => {\n\t\t\t/**\n\t\t\t * @TODO: Handle `prefer_related_applications` somehow\n\t\t\t */\n\n\t\t\tconst { name, description, features, categories = [], screenshots = [], icons = [],\n\t\t\t\trelated_applications: relatedApps = [],/* prefer_related_applications: preferRelatedApps = false,*/\n\t\t\t} = manifest;\n\t\t\tinternals.role = 'dialog';\n\t\t\tinternals.ariaModal = 'true';\n\t\t\tinternals.ariaHidden = this.open ? 'false': 'true';\n\t\t\tinternals.ariaLabel = `Install ${name}`;\n\n\t\t\tregisterButton(base.querySelector('.header-btn.install-btn')).catch(() => {});\n\n\t\t\tif (Array.isArray(screenshots) && screenshots.length !==0) {\n\t\t\t\tconst screenshot = getPicture({\n\t\t\t\t\topts:         screenshots,\n\t\t\t\t\tsizes:        '(max-width: 600px) 80vw, 40vw',\n\t\t\t\t\tfallbackWidth: 640,\n\t\t\t\t});\n\n\t\t\t\tbase.querySelector('[part=\"screenshots\"]').replaceChildren(screenshot);\n\t\t\t}\n\n\t\t\tif (Array.isArray(icons) && icons.length !== 0) {\n\t\t\t\tconst icon = getIcon(...icons);\n\t\t\t\tbase.querySelector('[part=\"icon\"]').replaceChildren(icon);\n\t\t\t}\n\n\t\t\ttext('[part=\"name\"]', name, { base });\n\t\t\ttext('[part=\"description\"]', description, { base });\n\t\t\ton(query('[data-click=\"close\"]', base), { click: () => this.open = false });\n\t\t\ton(query('[data-platform]', base), {\n\t\t\t\tclick: ({ target }) => {\n\t\t\t\t\tconst platform = target.closest('[data-platform]').dataset.platform;\n\n\t\t\t\t\tif (hasGa()) {\n\t\t\t\t\t\tsend({\n\t\t\t\t\t\t\teventCategory: 'install',\n\t\t\t\t\t\t\teventAction: 'install',\n\t\t\t\t\t\t\teventLabel: platform,\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.dispatchEvent(new CustomEvent('install', { detail: { platform }}));\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif (Array.isArray(features)) {\n\t\t\t\tbase.querySelector('[part=\"features\"]').replaceChildren(...features.map(text => createElement('li', { text })));\n\t\t\t}\n\n\t\t\tif (Array.isArray(categories) && categories.length !== 0) {\n\t\t\t\tbase.querySelector('[part=\"categories\"]')\n\t\t\t\t\t.replaceChildren(...categories.map(text => createElement('li', { text, part: ['category'] })));\n\t\t\t}\n\n\t\t\trelatedApps.forEach(({ platform, url, id }) => {\n\t\t\t\tswitch(platform) {\n\t\t\t\t\tcase 'webapp':\n\t\t\t\t\t\tPromise.resolve(base.querySelector('[data-platform=\"webapp\"]')).then(btn => {\n\t\t\t\t\t\t\tbtn.hidden = false;\n\n\t\t\t\t\t\t\tregisterButton(btn).catch(() => {});\n\t\t\t\t\t\t});\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'play':\n\t\t\t\t\tcase 'itunes':\n\t\t\t\t\tcase 'windows':\n\t\t\t\t\tcase 'f-droid':\n\t\t\t\t\tcase 'amazon':\n\t\t\t\t\t\tPromise.resolve(base.querySelector(`[data-platform=\"${platform}\"]`)).then(btn => {\n\t\t\t\t\t\t\tif (btn instanceof HTMLAnchorElement) {\n\t\t\t\t\t\t\t\tconst link = typeof url === 'string' ? new URL(url, btn.href) : new URL(btn.href);\n\n\t\t\t\t\t\t\t\tif (platform === 'play' && typeof id === 'string') {\n\t\t\t\t\t\t\t\t\tlink.searchParams.set('id', id);\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tbtn.href = link.href;\n\t\t\t\t\t\t\t\tbtn.hidden = false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tif (hasGa()) {\n\t\t\t\ton(query('[data-platform]', base), {\n\t\t\t\t\tclick: ({ target }) => {\n\t\t\t\t\t\tsend({\n\t\t\t\t\t\t\teventCategory: 'install',\n\t\t\t\t\t\t\teventAction: 'install',\n\t\t\t\t\t\t\teventLabel: target.closest('[data-platform]').dataset.platform,\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t}, { once: true });\n\t\t\t}\n\n\t\t\trequestAnimationFrame(() => {\n\t\t\t\tshadow.append(base);\n\t\t\t\tthis.dispatchEvent(new Event('ready'));\n\t\t\t});\n\t\t});\n\t}\n\n\tasync attributeChangedCallback(attr, oldVal, newVal) {\n\t\tconst { internals, shadow } = protectedData.get(this);\n\t\tswitch(attr) {\n\t\t\tcase 'open':\n\t\t\t\tif (typeof newVal === 'string') {\n\t\t\t\t\tinternals.ariaHidden = 'false';\n\t\t\t\t\tinternals.states.add('--open');\n\t\t\t\t\t[...document.body.children].forEach(el => el.inert = ! el.isSameNode(this));\n\t\t\t\t\tawait this.ready;\n\t\t\t\t\tshadow.querySelector('button:not([disabled])').focus();\n\t\t\t\t\tthis.dispatchEvent(new Event('open'));\n\t\t\t\t} else {\n\t\t\t\t\tinternals.ariaHidden = 'true';\n\t\t\t\t\tinternals.states.delete('--open');\n\t\t\t\t\t[...document.body.children].forEach(el => el.inert = false);\n\t\t\t\t\tthis.dispatchEvent(new Event('close'));\n\t\t\t\t}\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tthrow new DOMException(`Unhandled attribute changed: \"${name}\".`);\n\t\t}\n\t}\n\n\tasync show({ removeOnClose = true } = {}) {\n\t\tif (! this.isConnected) {\n\t\t\tdocument.body.append(this);\n\t\t}\n\n\t\tthis.open = true;\n\n\t\tif (removeOnClose) {\n\t\t\ton(this, { close: ({ target }) => target.remove() }, { once: true });\n\t\t}\n\n\t\treturn await new Promise((resolve, reject) => {\n\t\t\tconst handlers = {\n\t\t\t\tinstall: ({ detail: { platform }}) => {\n\t\t\t\t\toff(this, handlers, { once: true });\n\t\t\t\t\tresolve({ platform });\n\t\t\t\t\tthis.close();\n\t\t\t\t},\n\t\t\t\tclose: () => {\n\t\t\t\t\toff(this, handlers, { once: true });\n\t\t\t\t\treject(new DOMException('User cancelled install prompt'));\n\t\t\t\t},\n\t\t\t};\n\n\t\t\ton(this, handlers, { once: true });\n\t\t});\n\t}\n\n\tasync close() {\n\t\tthis.open = false;\n\t}\n\n\tget open() {\n\t\treturn this.hasAttribute('open');\n\t}\n\n\tset open(val) {\n\t\tthis.toggleAttribute('open', val);\n\t}\n\n\tget ready() {\n\t\treturn new Promise(resolve => {\n\t\t\tconst { shadow } = protectedData.get(this);\n\t\t\tif (shadow.childElementCount < 2) {\n\t\t\t\tthis.addEventListener('ready', () => resolve(), { once: true });\n\t\t\t} else {\n\t\t\t\tresolve();\n\t\t\t}\n\t\t});\n\t}\n\n\tstatic get observedAttributes() {\n\t\treturn ['open'];\n\t}\n\n\tstatic get serviceWorker() {\n\t\tif ('serviceWorker' in navigator) {\n\t\t\treturn navigator.serviceWorker.getRegistration();\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n});\n\nexport const trustPolicies = [policy.name];\n","import { registerCustomElement } from '@shgysk8zer0/kazoo/custom-elements.js';\nimport { createElement, createImage, createSlot } from '@shgysk8zer0/kazoo/elements.js';\nimport { getString, setString, getURL, setURL, getInt, setInt, getBool, setBool } from '@shgysk8zer0/kazoo/attrs.js';\nimport { loadStylesheet } from '@shgysk8zer0/kazoo/loader.js';\nimport { getURLResolver, isObject, setUTMParams } from '@shgysk8zer0/kazoo/utility.js';\nimport { whenIntersecting } from '@shgysk8zer0/kazoo/intersect.js';\nimport { meta } from '../import.meta.js';\nimport { save, open } from '@shgysk8zer0/kazoo/filesystem.js';\nimport {\n\tcreateCallStartIcon, createMailIcon, createMarkLocationIcon,\n\tcreateLinkExternalIcon, createInfoIcon,\n} from '@shgysk8zer0/kazoo/icons.js';\n\nconst protectedData = new WeakMap();\nconst resolveURL = getURLResolver({ base: meta.url, path: './krv/' });\nconst ITEMTYPE = new URL('/WPAdBlock', 'https://schema.org').href;\nconst size = 18;\n\nconst callIcon = createCallStartIcon({ size });\nconst emailIcon = createMailIcon({ size });\nconst linkIcon = createLinkExternalIcon({ size });\nconst infoIcon = createInfoIcon({ size });\nconst geoIcon = createMarkLocationIcon({ size });\n\nfunction getSlot(el, name) {\n\tconst { shadow } = protectedData.get(el);\n\treturn shadow.querySelector(`slot[name=\"${name}\"]`);\n}\n\nfunction getSlotted(el, name) {\n\tconst slot = getSlot(el, name);\n\n\treturn slot instanceof HTMLElement ? slot.assignedElements() : [];\n}\n\nfunction clearSlotted(el, name) {\n\tgetSlotted(el, name).forEach(el => el.remove());\n}\n\nfunction slotChange(itemprop) {\n\treturn ({ currentTarget }) => {\n\t\tconst assigned = currentTarget.assignedElements();\n\t\tassigned.forEach(el => el.setAttribute('itemprop', itemprop));\n\t};\n}\n\nfunction updateData(el, data) {\n\tif (! isObject(data)) {\n\t\tthrow new TypeError('data must be an object');\n\t} else {\n\t\tprotectedData.set(el, { ...protectedData.get(el), ...data });\n\t}\n}\n\nasync function log(type, {\n\tid: uuid, label, source, campaign, medium, term, content, layout, theme,\n}) {\n\tconst endpoint = new URL('/api/events', 'https://ads.kernvalley.us');\n\tconst params = Object.fromEntries(Object.entries({\n\t\ttype, origin: location.origin, pathname: location.pathname, layout, theme,\n\t\tdatetime: new Date().toISOString(), uuid, label, source, campaign, medium, term, content,\n\t}).filter(([,value]) => typeof value !== 'undefined' && ! Object.is(value, null)));\n\n\tif (\n\t\t['localhost'].includes(location.hostname)\n\t\t|| location.hostname.endsWith('.netlify.live')\n\t\t|| location.hostname.endsWith('.netlify.app')\n\t\t|| /^\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}\\.\\d{1,3}$/.test(location.hostname)\n\t) {\n\t\tconsole.info({ type, endpoint, params });\n\t\treturn false;\n\t} else {\n\t\treturn navigator.sendBeacon(endpoint, new URLSearchParams(params));\n\t}\n}\n\nclass HTMLKRVAdElement extends HTMLElement {\n\tconstructor({\n\t\tbackground    = null,\n\t\tborder        = null,\n\t\tborderWidth   = null,\n\t\tcallToAction  = null,\n\t\tcampaign      = null,\n\t\tcolor         = null,\n\t\tcontent       = null,\n\t\tdescription   = null,\n\t\theight        = null,\n\t\tidentifier    = null,\n\t\timage         = null,\n\t\timageFit      = null,\n\t\timagePosition = null,\n\t\tlinkColor     = null,\n\t\tlabel         = null,\n\t\tlayout        = null,\n\t\tmedia         = null,\n\t\tmedium        = null,\n\t\tsource        = null,\n\t\tterm          = null,\n\t\ttheme         = null,\n\t\turl           = null,\n\t\twidth         = null,\n\t\tloading       = null,\n\t} = {}) {\n\t\tsuper();\n\t\tconst shadow = this.attachShadow({ mode: 'closed' });\n\t\tconst internals = this.attachInternals();\n\t\tinternals.states.add('--loading');\n\t\tinternals.ariaBusy = 'true';\n\t\tinternals.role = 'document';\n\t\tconst publisher = createElement('div', {\n\t\t\t'@type': 'Organization',\n\t\t\titemprop: 'publisher',\n\t\t\titemscope: true,\n\t\t\thidden: true,\n\t\t\tchildren: [\n\t\t\t\tcreateElement('meta', { itemprop: 'name', content: 'Kern Valley Ads' }),\n\t\t\t\tcreateElement('meta', { itemprop: 'url', content: 'https://ads.kernvalley.us' }),\n\t\t\t\tcreateElement('meta', { itemprop: 'logo', content: 'https://cdn.kernvalley.us/img/branding/ads.kernvalley.us.svg' }),\n\t\t\t]\n\t\t});\n\n\t\tconst container = createElement('a', {\n\t\t\tid: 'container',\n\t\t\tpart: ['container'],\n\t\t\trel: 'noopener noreferrer external',\n\t\t\titemprop: 'url',\n\t\t\ttarget: '_blank',\n\t\t\tevents: {\n\t\t\t\tclick: event => {\n\t\t\t\t\tif (\n\t\t\t\t\t\tevent.isTrusted\n\t\t\t\t\t\t&& ! this.preview\n\t\t\t\t\t\t&& this.id.length !== 0\n\t\t\t\t\t\t&& event.currentTarget.href.length !== 0\n\t\t\t\t\t\t&& ! event.target.matches('#branding, #branding > *')\n\t\t\t\t\t) {\n\t\t\t\t\t\tlog('click', this);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tonce: true,\n\t\t\t},\n\t\t\tchildren: [\n\t\t\t\tcreateElement('h3', {\n\t\t\t\t\tid: 'label',\n\t\t\t\t\tpart: ['label', 'text'],\n\t\t\t\t\tchildren: [\n\t\t\t\t\t\tcreateSlot('label', {\n\t\t\t\t\t\t\tevents: { slotchange: slotChange('name') },\n\t\t\t\t\t\t\ttext: 'No Label',\n\t\t\t\t\t\t}),\n\t\t\t\t\t]\n\t\t\t\t}),\n\t\t\t\tcreateElement('div', {\n\t\t\t\t\tid: 'image',\n\t\t\t\t\tpart: ['image'],\n\t\t\t\t\tchildren: [\n\t\t\t\t\t\tcreateSlot('image', {\n\t\t\t\t\t\t\tevents: { slotchange: slotChange('image') },\n\t\t\t\t\t\t\tchildren: [\n\t\t\t\t\t\t\t\tcreateImage('https://cdn.kernvalley.us/img/raster/missing-image.png', {\n\t\t\t\t\t\t\t\t\treferrerPolicy: 'no-referrer',\n\t\t\t\t\t\t\t\t\tcrossOrigin: 'anonymous',\n\t\t\t\t\t\t\t\t\tloading: 'lazy',\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t}),\n\t\t\t\t\t]\n\t\t\t\t}),\n\t\t\t\tcreateElement('div', {\n\t\t\t\t\tid: 'description',\n\t\t\t\t\tpart: ['text', 'description'],\n\t\t\t\t\tchildren: [\n\t\t\t\t\t\tcreateSlot('description', {\n\t\t\t\t\t\t\ttext: 'No Description',\n\t\t\t\t\t\t\tevents: { slotchange: slotChange('description') },\n\t\t\t\t\t\t}),\n\t\t\t\t\t]\n\t\t\t\t}),\n\t\t\t\tcreateElement('div', {\n\t\t\t\t\tid: 'call-to-action',\n\t\t\t\t\tpart: ['call-to-action'],\n\t\t\t\t\tchildren: [\n\t\t\t\t\t\tcreateSlot('calltoaction', {\n\t\t\t\t\t\t\ttext: 'No Call-to-Action',\n\t\t\t\t\t\t}),\n\t\t\t\t\t\tcreateElement('span', {\n\t\t\t\t\t\t\tpart: ['icon', 'call-icon'],\n\t\t\t\t\t\t\tchildren: [\n\t\t\t\t\t\t\t\tcreateSlot('call-icon', {\n\t\t\t\t\t\t\t\t\tchildren: [callIcon.cloneNode(true)],\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t}),\n\t\t\t\t\t\tcreateElement('span', {\n\t\t\t\t\t\t\tpart: ['icon', 'email-icon'],\n\t\t\t\t\t\t\tchildren: [\n\t\t\t\t\t\t\t\tcreateSlot('email-icon', {\n\t\t\t\t\t\t\t\t\tchildren: [emailIcon.cloneNode(true)],\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t}),\n\t\t\t\t\t\tcreateElement('span', {\n\t\t\t\t\t\t\tpart: ['icon', 'link-icon'],\n\t\t\t\t\t\t\tchildren: [\n\t\t\t\t\t\t\t\tcreateSlot('link-icon', {\n\t\t\t\t\t\t\t\t\tchildren: [linkIcon.cloneNode(true)],\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t}),\n\t\t\t\t\t\tcreateElement('span', {\n\t\t\t\t\t\t\tpart: ['icon', 'geo-icon'],\n\t\t\t\t\t\t\tchildren: [\n\t\t\t\t\t\t\t\tcreateSlot('geo-icon', {\n\t\t\t\t\t\t\t\t\tchildren: [geoIcon.cloneNode(true)],\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t}),\n\t\t\t\t\t]\n\t\t\t\t}),\n\t\t\t\tcreateElement('a', {\n\t\t\t\t\tid: 'branding',\n\t\t\t\t\tpart: ['branding'],\n\t\t\t\t\thref: setUTMParams('https://ads.kernvalley.us', {\n\t\t\t\t\t\tsource: location.hostname,\n\t\t\t\t\t\tmedium: 'referral',\n\t\t\t\t\t\tcampaign: 'ad-info',\n\t\t\t\t\t}),\n\t\t\t\t\ttarget: '_blank',\n\t\t\t\t\tchildren: [\n\t\t\t\t\t\tcreateElement('span', {\n\t\t\t\t\t\t\tpart: ['icon', 'branding-icon'],\n\t\t\t\t\t\t\tchildren: [infoIcon.cloneNode(true)]\n\t\t\t\t\t\t}),\n\t\t\t\t\t\tcreateElement('span', { text: 'Ads by KernValley.US' }),\n\t\t\t\t\t]\n\t\t\t\t})\n\t\t\t]\n\t\t});\n\n\t\tprotectedData.set(this, { shadow, timeout: NaN, container, internals });\n\n\t\tif (typeof callToAction === 'string') {\n\t\t\tthis.callToAction = callToAction;\n\t\t} else if (callToAction instanceof HTMLElement) {\n\t\t\tcallToAction.slot = 'calltoaction';\n\t\t\tthis.append(callToAction);\n\t\t}\n\n\t\tif (typeof label === 'string') {\n\t\t\tthis.label = label;\n\t\t} else if(label instanceof HTMLElement) {\n\t\t\tlabel.slot = 'label';\n\t\t\tthis.append(label);\n\t\t}\n\n\t\tif (typeof description === 'string') {\n\t\t\tthis.description = description;\n\t\t} else if (description instanceof HTMLElement) {\n\t\t\tdescription.slot = 'description';\n\t\t\tthis.append(description);\n\t\t}\n\n\t\tif (typeof image === 'string' || image instanceof URL) {\n\t\t\tthis.image = image;\n\t\t} else if (image instanceof HTMLElement) {\n\t\t\timage.slot = 'image';\n\t\t\tthis.append(image);\n\t\t}\n\n\t\tshadow.append(container);\n\n\t\tconst publisherEl = this.querySelector('[itemprop=\"publisher\"]');\n\n\t\tif (publisherEl instanceof HTMLElement) {\n\t\t\tpublisherEl.replaceWith(publisher);\n\t\t} else {\n\t\t\tthis.append(publisher);\n\t\t}\n\n\t\tinternals.ariaBusy = 'false';\n\n\t\tthis.addEventListener('connected', () => {\n\t\t\t// this.tabIndex = 0;\n\t\t\tthis.setAttribute('itemtype', ITEMTYPE);\n\t\t\tthis.setAttribute('itemscope', '');\n\n\t\t\tif (typeof loading === 'string') {\n\t\t\t\tthis.loading = loading;\n\t\t\t}\n\n\t\t\tif (typeof identifier === 'string') {\n\t\t\t\tthis.id = identifier;\n\t\t\t}\n\n\t\t\tif (typeof background === 'string') {\n\t\t\t\tthis.background = background;\n\t\t\t}\n\n\t\t\tif (typeof border === 'string') {\n\t\t\t\tthis.border = border;\n\t\t\t}\n\n\t\t\tif (typeof borderWidth === 'string' || typeof borderWidth === 'number') {\n\t\t\t\tthis.borderWidth = borderWidth;\n\t\t\t}\n\n\t\t\tif (typeof color === 'string') {\n\t\t\t\tthis.color = color;\n\t\t\t}\n\n\t\t\tif (typeof linkColor === 'string') {\n\t\t\t\tthis.linkColor = linkColor;\n\t\t\t}\n\n\t\t\tif (typeof media === 'string') {\n\t\t\t\tthis.media = media;\n\t\t\t}\n\n\t\t\tif (typeof layout === 'string') {\n\t\t\t\tthis.layout = layout;\n\t\t\t}\n\n\t\t\tif (typeof url === 'string' || url instanceof URL) {\n\t\t\t\tthis.url = url;\n\t\t\t}\n\n\t\t\tif (typeof theme === 'string') {\n\t\t\t\tthis.theme = theme;\n\t\t\t}\n\n\t\t\tif (typeof imageFit === 'string') {\n\t\t\t\tthis.imageFit = imageFit;\n\t\t\t}\n\n\t\t\tif (typeof imagePosition === 'string') {\n\t\t\t\tthis.imagePosition = imagePosition;\n\t\t\t}\n\n\t\t\tif (typeof source === 'string') {\n\t\t\t\tthis.source = source;\n\t\t\t}\n\n\t\t\tif (typeof medium === 'string') {\n\t\t\t\tthis.medium = medium;\n\t\t\t}\n\n\t\t\tif (typeof campaign === 'string') {\n\t\t\t\tthis.campaign = campaign;\n\t\t\t}\n\n\t\t\tif (typeof term === 'string') {\n\t\t\t\tthis.term = term;\n\t\t\t}\n\n\t\t\tif (typeof content === 'string') {\n\t\t\t\tthis.content = content;\n\t\t\t}\n\n\t\t\tif (typeof height === 'number' && ! Number.isNaN(height)) {\n\t\t\t\tthis.height = height;\n\t\t\t}\n\n\t\t\tif (typeof width === 'number' && ! Number.isNaN(height)) {\n\t\t\t\tthis.width = width;\n\t\t\t}\n\t\t});\n\t}\n\n\tasync connectedCallback() {\n\t\tthis.dispatchEvent(new Event('connected'));\n\t\tconst { shadow, internals } = protectedData.get(this);\n\t\tawait whenIntersecting(this);\n\t\tinternals.states.add('--seen');\n\t\tawait loadStylesheet(resolveURL('./ad.css'), { parent: shadow });\n\t\tsetTimeout(() => this.hidden = false, 1);\n\t\tinternals.states.delete('--loading');\n\n\t\tif (this.id.length !== 0) {\n\t\t\tlog('view', this);\n\t\t}\n\t}\n\n\tattributeChangedCallback(name, oldVal, newVal) {\n\t\tconst { shadow, timeout, container } = protectedData.get(this);\n\n\t\tswitch(name) {\n\t\t\tcase 'url':\n\t\t\tcase 'source':\n\t\t\tcase 'medium':\n\t\t\tcase 'term':\n\t\t\tcase 'campaign':\n\t\t\tcase 'content':\n\t\t\t\tif (! Number.isNaN(timeout)) {\n\t\t\t\t\tclearTimeout(timeout);\n\t\t\t\t}\n\n\t\t\t\tupdateData(this, {\n\t\t\t\t\ttimeout: setTimeout(() => {\n\t\t\t\t\t\tconst url = this.getUrl();\n\t\t\t\t\t\tupdateData(this, { timeout: NaN });\n\t\t\t\t\t\tsetURL(shadow.querySelector('[part~=\"container\"]'), 'href', url);\n\t\t\t\t\t}, 10),\n\t\t\t\t});\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'background':\n\t\t\t\tif (typeof newVal === 'string') {\n\t\t\t\t\tcontainer.style.setProperty('--ad-background', newVal);\n\t\t\t\t} else {\n\t\t\t\t\tcontainer.style.removeProperty('--ad-background');\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\t\t\tcase 'color':\n\t\t\t\tif (typeof newVal === 'string') {\n\t\t\t\t\tcontainer.style.setProperty('--ad-color', newVal);\n\t\t\t\t} else {\n\t\t\t\t\tcontainer.style.removeProperty('--ad-color');\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'border':\n\t\t\t\tif (typeof newVal === 'string') {\n\t\t\t\t\tcontainer.style.setProperty('--ad-border', newVal);\n\t\t\t\t} else {\n\t\t\t\t\tcontainer.style.removeProperty('--ad-boder');\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'borderwidth':\n\t\t\t\tif (typeof newVal === 'string') {\n\t\t\t\t\tcontainer.style.setProperty('--ad-border-width', newVal);\n\t\t\t\t} else {\n\t\t\t\t\tcontainer.style.removeProperty('--ad-border-width');\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'linkcolor':\n\t\t\t\tif (typeof newVal === 'string') {\n\t\t\t\t\tcontainer.style.setProperty('--ad-link-color', newVal);\n\t\t\t\t} else {\n\t\t\t\t\tcontainer.style.removeProperty('--ad-link-color');\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'media':\n\t\t\t\t// this.hidden = typeof newVal !== 'string' || ! matchMedia(newVal).matches;\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tthrow new Error(`Unsupported property changed: \"${name}\"`);\n\t\t}\n\t}\n\n\ttoJSON() {\n\t\tconst {\n\t\t\tid, label, description, callToAction, image, layout, theme, campaign,\n\t\t\tcontent, source, medium, term, border, borderWidth, background, color,\n\t\t\timageFit, imagePosition, linkColor,\n\t\t} = this;\n\n\t\treturn {\n\t\t\t'@context': 'https://schema.org', '@type': 'WPAdBlock',\n\t\t\tversion: HTMLKRVAdElement.VERSION,\n\t\t\tidentifier: id, label, description, callToAction, image, layout, theme,\n\t\t\tcampaign, content, source, medium, term, border, borderWidth,\n\t\t\tbackground, color, imageFit, imagePosition, linkColor,\n\t\t};\n\t}\n\n\tget layout() {\n\t\treturn getString(this, 'layout', { fallback: 'card' });\n\t}\n\n\tset layout(val) {\n\t\tsetString(this, 'layout', val);\n\t}\n\n\tget theme() {\n\t\treturn getString(this, 'theme', { fallback: 'auto' });\n\t}\n\n\tset theme(val) {\n\t\tsetString(this, 'theme', val);\n\t}\n\n\tget preview() {\n\t\treturn getBool(this, 'preview');\n\t}\n\n\tset preview(val) {\n\t\tsetBool(this, 'preview', val);\n\t}\n\n\tget background() {\n\t\treturn getString(this, 'background');\n\t}\n\n\tset background(val) {\n\t\tsetString(this, 'background', val);\n\t}\n\n\tget color() {\n\t\treturn getString(this, 'color');\n\t}\n\n\tset color(val) {\n\t\tsetString(this, 'color', val);\n\t}\n\n\tget height() {\n\t\treturn getInt(this, 'height');\n\t}\n\n\tset height(val) {\n\t\tsetInt(this, 'height', val);\n\t}\n\n\tget width() {\n\t\treturn getInt(this, 'width');\n\t}\n\n\tset width(val) {\n\t\tsetInt(this, 'width', val);\n\t}\n\n\tget border() {\n\t\treturn getString(this, 'border');\n\t}\n\n\tset border(val) {\n\t\tsetString(this, 'border', val);\n\t}\n\n\tget borderWidth() {\n\t\treturn getInt(this, 'borderwidth');\n\t}\n\n\tset borderWidth(val) {\n\t\tsetInt(this, 'borderwidth', val);\n\t}\n\n\tget imageFit() {\n\t\treturn getString(this, 'imagefit');\n\t}\n\n\tset imageFit(val) {\n\t\tsetString(this, 'imagefit', val);\n\t}\n\n\tget imagePostion() {\n\t\treturn getString(this, 'imageposition');\n\t}\n\n\tset imagePosition(val) {\n\t\tsetString(this, 'imageposition', val);\n\t}\n\n\tget label() {\n\t\tconst slotted = getSlotted(this, 'label');\n\n\t\tif (slotted.length === 1) {\n\t\t\treturn slotted[0].textContent;\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n\n\tset label(val) {\n\t\tclearSlotted(this, 'label');\n\n\t\tif (typeof val === 'string' && val.length !== 0) {\n\t\t\tthis.append(createElement('span', {\n\t\t\t\ttext: val,\n\t\t\t\tslot: 'label',\n\t\t\t}));\n\t\t}\n\t}\n\n\tget image() {\n\t\tconst imgs = getSlotted(this, 'image');\n\n\t\tif (imgs.length === 1) {\n\t\t\treturn imgs[0].src;\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n\n\tset image(src) {\n\t\tclearSlotted(this, 'image');\n\n\t\tif (typeof src === 'string' && src.length !== 0) {\n\t\t\tthis.append(createImage(src, {\n\t\t\t\tloading: 'lazy',\n\t\t\t\talt: '',\n\t\t\t\tcrossOrigin: 'anonymous',\n\t\t\t\treferrerPolicy: 'no-referrer',\n\t\t\t\tslot: 'image',\n\t\t\t}));\n\t\t}\n\t}\n\n\tget description() {\n\t\tconst slotted = getSlotted(this, 'description');\n\n\t\tif (slotted.length === 1) {\n\t\t\treturn slotted[0].textContent;\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n\n\tset description(val) {\n\t\tclearSlotted(this, 'description');\n\n\t\tif (typeof val === 'string' && val.length !== 0) {\n\t\t\tthis.append(createElement('span', {\n\t\t\t\ttext: val,\n\t\t\t\tslot: 'description',\n\t\t\t}));\n\t\t}\n\t}\n\n\tget callToAction() {\n\t\tconst slotted = getSlotted(this, 'calltoaction');\n\n\t\tif (slotted.length === 1) {\n\t\t\treturn slotted[0].textContent;\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n\n\tset callToAction(val) {\n\t\tclearSlotted(this, 'calltoaction');\n\n\t\tif (typeof val === 'string' && val.length !== 0) {\n\t\t\tthis.append(createElement('span', {\n\t\t\t\ttext: val,\n\t\t\t\tslot: 'calltoaction',\n\t\t\t}));\n\t\t}\n\t}\n\n\tget url() {\n\t\treturn getURL(this, 'url');\n\t}\n\n\tset url(val) {\n\t\tsetURL(this, 'url', val, { requirePath: false });\n\t}\n\n\tget campaign() {\n\t\treturn getString(this, 'campaign');\n\t}\n\n\tset campaign(val) {\n\t\tsetString(this, 'campaign', val);\n\t}\n\n\tget content() {\n\t\treturn getString(this, 'content');\n\t}\n\n\tset content(val) {\n\t\tsetString(this, 'content', val);\n\t}\n\n\tget medium() {\n\t\treturn getString(this, 'medium', { fallback: 'referral' });\n\t}\n\n\tset medium(val) {\n\t\tsetString(this, 'medium', val);\n\t}\n\n\tget source() {\n\t\treturn getString(this, 'source');\n\t}\n\n\tset source(val) {\n\t\tsetString(this, 'source', val);\n\t}\n\n\tget term() {\n\t\treturn getString(this, 'term');\n\t}\n\n\tset term(val) {\n\t\tsetString(this, 'term', val);\n\t}\n\n\tgetUrl() {\n\t\tif (this.hasAttribute('url')) {\n\t\t\tconst { url, source, medium, term, content, campaign } = this;\n\t\t\tconst uri = new setUTMParams(url, { source, medium, term, content, campaign });\n\n\t\t\tswitch(url.protocol) {\n\t\t\t\tcase 'http:':\n\t\t\t\tcase 'https:':\n\t\t\t\t\treturn uri.href;\n\n\t\t\t\tcase 'mailto:':\n\t\t\t\tcase 'tel:':\n\t\t\t\tcase 'geo:':\n\t\t\t\t\treturn `${uri.protocol}${uri.pathname}`;\n\n\t\t\t\tdefault:\n\t\t\t\t\tthrow new DOMException(`Unsupported protocol \"${uri.protocol}\"`);\n\t\t\t}\n\t\t}\n\t}\n\n\tasync toFile({ name = 'ad.krvad', signal, priority } = {}) {\n\t\treturn scheduler.postTask(() => {\n\t\t\tconst data = JSON.stringify(this, null, 4);\n\t\t\treturn new File([data], name, { type: HTMLKRVAdElement.CONTENT_TYPE });\n\t\t}, { signal, priority });\n\t}\n\n\tasync downloadFile({ name = 'ad.krvad', signal, priority } = {}) {\n\t\tconst file = await this.toFile({ name, signal, priority });\n\t\tawait save(file);\n\t}\n\n\tstatic get observedAttributes() {\n\t\treturn [\n\t\t\t'background',\n\t\t\t'border',\n\t\t\t'borderwidth',\n\t\t\t'color',\n\t\t\t'linkcolor',\n\t\t\t'media',\n\t\t\t'url',\n\t\t\t'source',\n\t\t\t'term',\n\t\t\t'content',\n\t\t\t'campaign',\n\t\t\t'medium',\n\t\t];\n\t}\n\n\tstatic fromJSONObject(data) {\n\t\treturn new HTMLKRVAdElement(data);\n\t}\n\n\tstatic async fromFile(file) {\n\t\tif (! (file instanceof File)) {\n\t\t\tthrow new Error('Expected instance of `File`');\n\t\t} else if (! file.name.endsWith('.krvad')) {\n\t\t\tthrow new Error(`${file.name} is not a KRV Ad file`);\n\t\t} else {\n\t\t\tconst data = JSON.parse(await file.text());\n\t\t\treturn HTMLKRVAdElement.fromJSONObject(data);\n\t\t}\n\t}\n\n\tstatic async openFile() {\n\t\tconst [file] = await open({ accept: [\n\t\t\tHTMLKRVAdElement.FILE_EXTENSION,\n\t\t\tHTMLKRVAdElement.CONTENT_TYPE,\n\t\t] });\n\t\treturn await HTMLKRVAdElement.fromFile(file);\n\t}\n\n\tstatic get CONTENT_TYPE() {\n\t\treturn 'application/krv-ad+json';\n\t}\n\n\tstatic get FILE_EXTENSION() {\n\t\treturn '.krvad';\n\t}\n\n\tstatic get VERSION() {\n\t\treturn '1.0.0';\n\t}\n}\n\nregisterCustomElement('krv-ad', HTMLKRVAdElement);\n","/**\n * @copyright 2023 Chris Zuber <admin@kernvalley.us>\n */\nimport { getDeferred, lock } from './promises.js';\nimport { createElement, createInput } from './elements.js';\n\nexport async function save(file, { signal } = {}) {\n\tif (signal instanceof EventTarget && signal.aborted) {\n\t\tthrow signal.reason;\n\t} else if (file instanceof File) {\n\t\tconst link = document.createElement('a');\n\t\tconst url = URL.createObjectURL(file);\n\n\t\tlink.href = url;\n\t\tlink.download = file.name;\n\t\tlink.hidden = true;\n\n\t\tlink.addEventListener('click', ({ target }) => {\n\t\t\trequestIdleCallback(() => {\n\t\t\t\tURL.revokeObjectURL(target.href);\n\t\t\t\ttarget.remove();\n\t\t\t});\n\t\t}, { passive: true, capture: true, once: true, signal });\n\n\t\tlink.click();\n\t} else {\n\t\tthrow new TypeError('Not a file');\n\t}\n}\n\nexport async function open({\n\taccept = null,\n\tmultiple = false,\n\tdirectory = false,\n\tdescription = 'Select file(s)',\n\tsignal,\n} = {}) {\n\tif (signal instanceof AbortSignal && signal.aborted) {\n\t\tthrow signal.reason || new DOMException('Operation aborted.');\n\t} else {\n\t\treturn await lock('file-picker', async () => {\n\t\t\tconst { resolve, reject, promise } = getDeferred({ signal });\n\n\t\t\tif (! (signal instanceof AbortSignal && signal.aborted)) {\n\t\t\t\tconst uuid = crypto.randomUUID();\n\t\t\t\tconst dialog = createElement('dialog', {\n\t\t\t\t\t'children': [\n\t\t\t\t\t\tcreateElement('form', {\n\t\t\t\t\t\t\t'name': 'file-picker',\n\t\t\t\t\t\t\t'events': {\n\t\t\t\t\t\t\t\t'submit': event => {\n\t\t\t\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\t\t\t\tconst dialog = event.target.closest('dialog');\n\t\t\t\t\t\t\t\t\tresolve(Array.from(new FormData(event.target).getAll('files')));\n\n\t\t\t\t\t\t\t\t\tif (dialog.animate instanceof Function) {\n\t\t\t\t\t\t\t\t\t\tdialog.animate([{\n\t\t\t\t\t\t\t\t\t\t\t'opacity': 1,\n\t\t\t\t\t\t\t\t\t\t}, {\n\t\t\t\t\t\t\t\t\t\t\t'opacity': 0,\n\t\t\t\t\t\t\t\t\t\t}], {\n\t\t\t\t\t\t\t\t\t\t\t'duration': 400,\n\t\t\t\t\t\t\t\t\t\t\t'easing': 'ease-in-out',\n\t\t\t\t\t\t\t\t\t\t\t'fill': 'both',\n\t\t\t\t\t\t\t\t\t\t}).finished.then(() => dialog.close());\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tdialog.close();\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t'reset': ({ target }) => target.closest('dialog').close(),\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t'children': [\n\t\t\t\t\t\t\t\tcreateElement('div', {\n\t\t\t\t\t\t\t\t\t'classList': ['form-group'],\n\t\t\t\t\t\t\t\t\t'children': [\n\t\t\t\t\t\t\t\t\t\tcreateElement('label', {\n\t\t\t\t\t\t\t\t\t\t\t'text': description,\n\t\t\t\t\t\t\t\t\t\t\t'for': uuid,\n\t\t\t\t\t\t\t\t\t\t\t'classList': ['input-label', 'block', 'required', 'cursor-pointer'],\n\t\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t\t\tcreateInput('files', {\n\t\t\t\t\t\t\t\t\t\t\t'id': uuid,\n\t\t\t\t\t\t\t\t\t\t\t'classList': ['input'],\n\t\t\t\t\t\t\t\t\t\t\t'type': 'file',\n\t\t\t\t\t\t\t\t\t\t\t'accept': Array.isArray(accept) ? accept.join(', ') : accept,\n\t\t\t\t\t\t\t\t\t\t\t'webkitdirectory': directory,\n\t\t\t\t\t\t\t\t\t\t\t'required': true,\n\t\t\t\t\t\t\t\t\t\t\t'multiple': multiple,\n\t\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\tcreateElement('div', {\n\t\t\t\t\t\t\t\t\t'classList': ['flex', 'row', 'no-wrap'],\n\t\t\t\t\t\t\t\t\t'styles': {\n\t\t\t\t\t\t\t\t\t\t'margin-top': '18px',\n\t\t\t\t\t\t\t\t\t\t'gap': '2em',\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t'children': [\n\t\t\t\t\t\t\t\t\t\tcreateElement('button', {\n\t\t\t\t\t\t\t\t\t\t\t'type': 'submit',\n\t\t\t\t\t\t\t\t\t\t\t'text': 'Ok',\n\t\t\t\t\t\t\t\t\t\t\t'classList': ['btn', 'btn-accept', 'grow-1'],\n\t\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t\t\tcreateElement('button', {\n\t\t\t\t\t\t\t\t\t\t\t'text': 'Cancel',\n\t\t\t\t\t\t\t\t\t\t\t'type': 'reset',\n\t\t\t\t\t\t\t\t\t\t\t'classList': ['btn', 'btn-reject', 'grow-1'],\n\t\t\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\t],\n\t\t\t\t\t\t}),\n\t\t\t\t\t],\n\t\t\t\t\t'events': {\n\t\t\t\t\t\t'close': ({ target }) => {\n\t\t\t\t\t\t\treject(new DOMException('User cancelled the file select'));\n\t\t\t\t\t\t\ttarget.remove();\n\t\t\t\t\t\t},\n\t\t\t\t\t},\n\t\t\t\t});\n\n\t\t\t\tdocument.body.append(dialog);\n\n\t\t\t\tif (dialog.animate instanceof Function) {\n\t\t\t\t\tconst anim = dialog.animate([{\n\t\t\t\t\t\t'opacity': 0.1,\n\t\t\t\t\t\t'transform': 'scale(0.3)',\n\t\t\t\t\t}, {\n\t\t\t\t\t\t'opacity': 1,\n\t\t\t\t\t\t'transform': 'none',\n\t\t\t\t\t}], {\n\t\t\t\t\t\t'duration': 400,\n\t\t\t\t\t\t'easing': 'ease-in-out',\n\t\t\t\t\t\t'fill': 'both',\n\t\t\t\t\t\t'delay': 100,\n\t\t\t\t\t});\n\n\t\t\t\t\tdialog.showModal();\n\n\t\t\t\t\tanim.finished.then(() => {\n\t\t\t\t\t\tconst input = dialog.querySelector('input[type=\"file\"]');\n\n\t\t\t\t\t\tif (input.showPicker instanceof Function) {\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\tinput.showPicker({ signal });\n\t\t\t\t\t\t\t} catch(err) {\n\t\t\t\t\t\t\t\tsetTimeout(() => input.click(), 200);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tinput.click();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tconst input = dialog.querySelector('input[type=\"file\"]');\n\t\t\t\t\tsetTimeout(() => input.click(), 200);\n\t\t\t\t\tdialog.showModal();\n\t\t\t\t}\n\n\t\t\t\tif (signal instanceof AbortSignal) {\n\t\t\t\t\tsignal.addEventListener('abort', () => dialog.close(), { once: true });\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn await promise;\n\t\t}, { signal, mode: 'exclusive' });\n\t}\n}\n","/**\n * @copyright 2023 Chris Zuber <admin@kernvalley.us>\n */\nimport { getJSON } from '../http.js';\n\nexport const apps = new URL('https://apps.kernvalley.us/apps.json');\n\nexport const getApps = async ({ signal } = {}) => getJSON(apps, { signal });\n","import { css, attr } from '@shgysk8zer0/kazoo/attrs.js';\nimport { registerCustomElement } from '@shgysk8zer0/kazoo/custom-elements.js';\nimport { preload } from '@shgysk8zer0/kazoo/loader.js';\nimport { callOnce } from '@shgysk8zer0/kazoo/utility.js';\nimport { getApps, apps as SRC } from '@shgysk8zer0/kazoo/krv/apps.js';\nimport { hasGa, send } from '@shgysk8zer0/kazoo/google-analytics.js';\nimport { getString, setString, getBool, setBool } from '@shgysk8zer0/kazoo/attrs.js';\nimport { createXIcon } from '@shgysk8zer0/kazoo/icons.js';\nimport { createImage } from '@shgysk8zer0/kazoo/elements.js';\n\nconst fetchApps = callOnce(getApps);\n\nfunction log() {\n\tif (hasGa()) {\n\t\tsend({\n\t\t\thitType: 'event',\n\t\t\teventCategory: 'outbound',\n\t\t\teventAction: 'click',\n\t\t\teventLabel: this.href,\n\t\t\ttransport: 'beacon',\n\t\t});\n\t}\n}\n\nfunction makeAppItem({ name, url, description, image }) {\n\tconst container = document.createElement('a');\n\tconst nameEl = document.createElement('b');\n\tconst link = document.createElement('meta');\n\tconst descriptionEl = document.createElement('div');\n\tconst img = createImage(image.url, { height: 150, width: 150, ...image });\n\n\tcontainer.addEventListener('click', log, { passive: true, capture: true });\n\n\tattr(link, { 'itemprop': 'url', 'content': url });\n\n\tcontainer.href = url;\n\tcontainer.relList.add('noopener', 'external');\n\n\tattr(container, {\n\t\t'itemtype': 'https://schema.org/WebApplication',\n\t\t'itemscope': true,\n\t\t'title': `Open ${name}`,\n\t});\n\n\tcss(container, {\n\t\t'display': 'grid',\n\t\t'padding': '12px',\n\t\t'color': 'inherit',\n\t\t'text-decoration': 'none',\n\t\t'grid-template-areas': '\". image .\" \"name name name\" \"description description description\"',\n\t\t'grid-template-columns': 'auto 150px auto',\n\t\t'grid-template-rows': '150px auto auto',\n\t\t'gap': '8px',\n\t\t'border': '1px solid #dedede',\n\t\t'border-radius': '12px',\n\t});\n\n\tnameEl.textContent = name;\n\tattr(nameEl, { 'itemprop': 'name' });\n\tcss(nameEl, { 'grid-area': 'name', 'text-decoration': 'underline' });\n\n\tattr(descriptionEl, { 'itemprop': 'description' });\n\tdescriptionEl.textContent = description;\n\tcss(descriptionEl, { 'grid-area': 'description' });\n\n\tcss(img, { 'grid-area': 'image', 'object-fit': 'cover', 'border-radius': '8px' });\n\tattr(img, { 'itemprop': 'image' });\n\n\tcontainer.append(link, img, nameEl, descriptionEl);\n\treturn container;\n}\n\nregisterCustomElement('app-list', class HTMLKernValleyAppListButtonlement extends HTMLButtonElement {\n\tconstructor({\n\t\tsource = null,\n\t\tmedium = null,\n\t\tcontent = null,\n\t} = {}) {\n\t\tsuper();\n\t\tthis.addEventListener('click', this.show, { passive: true, capture: true });\n\t\tthis.addEventListener('connected', () => {\n\t\t\tthis.hidden = false;\n\t\t\tthis.ariaHasPopup = 'dialog';\n\t\t\tthis.ariaLabel = 'Show KRV Apps dialog';\n\n\t\t\tif (typeof source === 'string') {\n\t\t\t\tthis.source = source;\n\t\t\t}\n\n\t\t\tif (typeof medium === 'string') {\n\t\t\t\tthis.medium = medium;\n\t\t\t}\n\n\t\t\tif (typeof content === 'string') {\n\t\t\t\tthis.content = content;\n\t\t\t}\n\t\t}, { once: true });\n\t}\n\n\tconnectedCallback() {\n\t\tthis.dispatchEvent(new Event('connected'));\n\t}\n\n\tget content() {\n\t\treturn getString(this, 'content', { fallback: 'krv-app-list' });\n\t}\n\n\tset content(val) {\n\t\tsetString(this, 'content', val);\n\t}\n\n\tget dev() {\n\t\treturn getBool(this, 'dev');\n\t}\n\n\tset dev(val) {\n\t\tsetBool(this, 'dev', val);\n\t}\n\n\tget medium() {\n\t\treturn getString(this, 'medium', { fallback: 'referral' });\n\t}\n\n\tset medium(val) {\n\t\tsetString(this, 'medium', val);\n\t}\n\n\tget host() {\n\t\treturn getString(this, 'host');\n\t}\n\n\tset host(val) {\n\t\tsetBool(this, 'host', val);\n\t}\n\n\tget source() {\n\t\treturn getString(this, 'source');\n\t}\n\n\tset source(val) {\n\t\tsetString(this, 'source', val);\n\t}\n\n\tasync show() {\n\t\tthis.disabled = true;\n\t\tconst { source, medium, content, dev, host } = this;\n\t\tconst dialog = document.createElement('dialog');\n\t\tconst list = await HTMLKernValleyAppListButtonlement.getAppList({\n\t\t\tsource, medium, content, dev, host,\n\t\t});\n\t\tconst apps = list.map(makeAppItem);\n\t\tconst header = document.createElement('header');\n\t\tconst close = document.createElement('button');\n\t\tconst container = document.createElement('div');\n\t\tclose.ariaLabel = 'Close dialog';\n\n\t\tcss(header, {\n\t\t\t'height': '2.8em',\n\t\t\t'display': 'flex',\n\t\t\t'flex-direction': 'row',\n\t\t\t'position': 'sticky',\n\t\t\t'top': '0',\n\t\t\t'flex-basis': '100%',\n\t\t});\n\n\t\tclose.append(createXIcon({\n\t\t\tstyles: {\n\t\t\t\t'color': 'inherit',\n\t\t\t\t'max-width': '100%',\n\t\t\t\t'max-height': '100%',\n\t\t\t\t'width': 'var(--icon-size, 1em)',\n\t\t\t\t'height': 'var(--icon-size, 1em)',\n\t\t\t\t'vertical-align': 'middle',\n\t\t\t}\n\t\t}));\n\n\t\tclose.addEventListener('click', ({ target }) => {\n\t\t\ttarget.closest('dialog').close();\n\t\t\tthis.disabled = false;\n\t\t});\n\n\t\tcss(close, {\n\t\t\t'display': 'inline-block',\n\t\t\t'background-color': '#dc3545',\n\t\t\t'color': '#fefefe',\n\t\t\t'border': 'none',\n\t\t\t'cursor': 'pointer',\n\t\t\t'font-size': '20px',\n\t\t\t'margin-left': 'auto',\n\t\t\t'border-radius': '4px',\n\t\t\t'padding': '0.3em',\n\t\t});\n\t\tclose.title = 'Close Dialog';\n\t\theader.append(close);\n\n\t\tcontainer.append(...apps);\n\t\tcss(container, {\n\t\t\t'display': 'grid',\n\t\t\t'overflow-x': 'hidden',\n\t\t\t'overflow-y': 'auto',\n\t\t\t'grid-template-columns': 'repeat(auto-fit, 280px)',\n\t\t\t'grid-template-rows': 'repeat(auto-fit, auto)',\n\t\t\t'gap': '12px',\n\t\t\t'justify-content': 'space-evenly',\n\t\t\t'box-sizing': 'border-box',\n\t\t\t'padding': '3em 0',\n\t\t});\n\n\t\tdialog.append(header, container);\n\t\tdialog.addEventListener('close', ({ target }) => target.remove());\n\t\tcss(dialog, { 'width': '80vw' });\n\t\tdocument.body.append(dialog);\n\t\tif (dialog.animate instanceof Function) {\n\t\t\tdialog.animate([{\n\t\t\t\topacity: 0,\n\t\t\t}, {\n\t\t\t\topacity: 1,\n\t\t\t}], {\n\t\t\t\tduration: 400,\n\t\t\t\teasing: 'ease-in-out',\n\t\t\t\tfill: 'both',\n\t\t\t});\n\t\t}\n\t\tdialog.showModal();\n\t}\n\n\tstatic preloadData() {\n\t\tpreload(SRC, {\n\t\t\tas: 'fetch',\n\t\t\ttype: 'application/json',\n\t\t\timportance: 'high',\n\t\t});\n\t}\n\n\tstatic async getAppList({ source = null, medium = null, content = null,\n\t\tdev = false, host = false,\n\t} = {}) {\n\t\tconst list = await fetchApps();\n\n\t\tif (Array.isArray(list)) {\n\t\t\tconst apps = list.map(app => {\n\t\t\t\tif (typeof app.url === 'string') {\n\t\t\t\t\tconst url = new URL(app.url, document.baseURI);\n\n\t\t\t\t\tif (typeof source === 'string' && ! url.searchParams.has('utm_source')) {\n\t\t\t\t\t\turl.searchParams.set('utm_source', source);\n\t\t\t\t\t\turl.searchParams.set('utm_medium', medium || 'web');\n\t\t\t\t\t\turl.searchParams.set('utm_content', content || 'krv-app-list');\n\t\t\t\t\t\tapp.url = url.href;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn app;\n\t\t\t});\n\n\t\t\tif (dev && host) {\n\t\t\t\treturn apps;\n\t\t\t} else if (host) {\n\t\t\t\treturn apps.filter(({ dev }) => ! dev);\n\t\t\t} else if (dev) {\n\t\t\t\treturn apps.filter(({ url }) => new URL(url).hostname !== location.hostname);\n\t\t\t} else {\n\t\t\t\treturn apps.filter(({ dev, url }) =>\n\t\t\t\t\t! dev && new URL(url).hostname !== location.hostname\n\t\t\t\t);\n\t\t\t}\n\t\t} else {\n\t\t\tthrow new Error('Failed fetching app list');\n\t\t}\n\t}\n}, {\n\textends: 'button',\n});\n","import { registerCustomElement } from '@shgysk8zer0/kazoo/custom-elements.js';\nimport { getManifest } from '@shgysk8zer0/kazoo/http.js';\nimport { loadImage } from '@shgysk8zer0/kazoo/loader.js';\nimport { registerButton, promise, signal } from '@shgysk8zer0/kazoo/pwa-install.js';\nimport { css } from '@shgysk8zer0/kazoo/dom.js';\n\nconst loading = 'lazy';\nconst height = 53;\n\nconst getLogoUrl = path => new URL(path, 'https://cdn.kernvalley.us').href;\n\nconst styleImg = (img) => css(img, { width: 'auto', height: `${height}px` });\n\nif (! (navigator.getInstalledRelatedApps instanceof Function)) {\n\tnavigator.getInstalledRelatedApps = async () => [];\n}\n\nregisterCustomElement('app-stores', class HTMLAppStoresElement extends HTMLElement {\n\tasync connectedCallback() {\n\t\tconst [{ related_applications }, apps = []] = await Promise.all([\n\t\t\tgetManifest(),\n\t\t\tnavigator.getInstalledRelatedApps(),\n\t\t]).catch(console.error);\n\n\t\tconst platforms = apps.map(({ platform }) => platform);\n\n\t\tif (Array.isArray(related_applications) && related_applications.length !== 0) {\n\t\t\tconst stores = await Promise.allSettled(related_applications.filter(({ platform }) => {\n\t\t\t\treturn ! platforms.includes(platform);\n\t\t\t}).map(({ platform, id, url }) => {\n\t\t\t\tswitch(platform) {\n\t\t\t\t\tcase 'play':\n\t\t\t\t\t\treturn loadImage(getLogoUrl('./img/logos/play-badge.svg'), {\n\t\t\t\t\t\t\talt: 'Google Play Store',\n\t\t\t\t\t\t\tpart: ['store-badge', 'play-store-badge'],\n\t\t\t\t\t\t\twidth: 180,\n\t\t\t\t\t\t\theight,\n\t\t\t\t\t\t\tloading\n\t\t\t\t\t\t}).then(img => {\n\t\t\t\t\t\t\tstyleImg(img);\n\t\t\t\t\t\t\tconst a = document.createElement('a');\n\t\t\t\t\t\t\ta.classList.add('app-store', `store-${platform}`);\n\t\t\t\t\t\t\ta.relList.add('noopener', 'noreferrer', 'external');\n\n\t\t\t\t\t\t\tif (typeof url === 'string') {\n\t\t\t\t\t\t\t\ta.href = new URL(url, document.baseURI).href;\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tconst link = new URL('https://play.google.com/store/apps/details');\n\t\t\t\t\t\t\t\tlink.searchParams.set('id', id);\n\t\t\t\t\t\t\t\ta.href = link.href;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\ta.append(img);\n\t\t\t\t\t\t\treturn a;\n\t\t\t\t\t\t}).catch(console.error);\n\n\t\t\t\t\tcase 'itunes':\n\t\t\t\t\t\treturn loadImage(getLogoUrl('./img/logos/itunes-badge.svg'), {\n\t\t\t\t\t\t\talt: 'App Store',\n\t\t\t\t\t\t\tpart: ['store-badge', 'app-store-badge'],\n\t\t\t\t\t\t\twidth: 158,\n\t\t\t\t\t\t\theight,\n\t\t\t\t\t\t\tloading,\n\t\t\t\t\t\t}).then(img => {\n\t\t\t\t\t\t\tstyleImg(img);\n\t\t\t\t\t\t\tconst a = document.createElement('a');\n\t\t\t\t\t\t\ta.classList.add('app-store', `store-${platform}`);\n\t\t\t\t\t\t\ta.relList.add('noopener', 'noreferrer', 'external');\n\n\t\t\t\t\t\t\tif (typeof url === 'string') {\n\t\t\t\t\t\t\t\ta.href = new URL(url, document.baseURI).href;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\ta.append(img);\n\t\t\t\t\t\t\treturn a;\n\t\t\t\t\t\t}).catch(console.error);\n\n\t\t\t\t\tcase 'f-droid':\n\t\t\t\t\t\treturn loadImage(getLogoUrl('./img/logos/f-droid-badge.svg'), {\n\t\t\t\t\t\t\talt: 'F-Droid',\n\t\t\t\t\t\t\tpart: ['store-badge', 'f-droid-badge'],\n\t\t\t\t\t\t\twidth: 158,\n\t\t\t\t\t\t\theight,\n\t\t\t\t\t\t\tloading,\n\t\t\t\t\t\t}).then(img => {\n\t\t\t\t\t\t\tstyleImg(img);\n\t\t\t\t\t\t\tconst a = document.createElement('a');\n\t\t\t\t\t\t\ta.classList.add('app-store', `store-${platform}`);\n\t\t\t\t\t\t\ta.relList.add('noopener', 'noreferrer', 'external');\n\n\t\t\t\t\t\t\tif (typeof url === 'string') {\n\t\t\t\t\t\t\t\ta.href = new URL(url, document.baseURI).href;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\ta.append(img);\n\t\t\t\t\t\t\treturn a;\n\t\t\t\t\t\t}).catch(console.error);\n\n\t\t\t\t\tcase 'amazon':\n\t\t\t\t\t\treturn loadImage(getLogoUrl('./img/logos/amazon-appstore-badge.svg'), {\n\t\t\t\t\t\t\talt: 'App Store',\n\t\t\t\t\t\t\tpart: ['store-badge', 'amazon-appstore-badge'],\n\t\t\t\t\t\t\twidth: 158,\n\t\t\t\t\t\t\theight,\n\t\t\t\t\t\t\tloading,\n\t\t\t\t\t\t}).then(img => {\n\t\t\t\t\t\t\tstyleImg(img);\n\t\t\t\t\t\t\tconst a = document.createElement('a');\n\t\t\t\t\t\t\ta.classList.add('app-store', `store-${platform}`);\n\t\t\t\t\t\t\ta.relList.add('noopener', 'noreferrer', 'external');\n\n\t\t\t\t\t\t\tif (typeof url === 'string') {\n\t\t\t\t\t\t\t\ta.href = new URL(url, document.baseURI).href;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\ta.append(img);\n\t\t\t\t\t\t\treturn a;\n\t\t\t\t\t\t}).catch(console.error);\n\n\t\t\t\t\tcase 'windows':\n\t\t\t\t\t\treturn loadImage(getLogoUrl('./img/logos/windows-badge.svg'), {\n\t\t\t\t\t\t\talt: 'Microsoft Store',\n\t\t\t\t\t\t\tpart: ['store-badge', 'windows-store-badge'],\n\t\t\t\t\t\t\twidth: 158,\n\t\t\t\t\t\t\theight,\n\t\t\t\t\t\t\tloading,\n\t\t\t\t\t\t}).then(img => {\n\t\t\t\t\t\t\tstyleImg(img);\n\t\t\t\t\t\t\tconst a = document.createElement('a');\n\t\t\t\t\t\t\ta.classList.add('app-store', `store-${platform}`);\n\t\t\t\t\t\t\ta.relList.add('noopener', 'noreferrer', 'external');\n\n\t\t\t\t\t\t\tif (typeof url === 'string') {\n\t\t\t\t\t\t\t\ta.href = new URL(url, document.baseURI).href;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\ta.append(img);\n\t\t\t\t\t\t\treturn a;\n\t\t\t\t\t\t}).catch(console.error);\n\n\t\t\t\t\tcase 'webapp':\n\t\t\t\t\t\treturn loadImage(getLogoUrl('/img/logos/pwa-badge.svg'), {\n\t\t\t\t\t\t\talt: 'Web App',\n\t\t\t\t\t\t\tpart: ['store-badge', 'pwa-badge'],\n\t\t\t\t\t\t\twidth: 158,\n\t\t\t\t\t\t\theight,\n\t\t\t\t\t\t\tloading,\n\t\t\t\t\t\t}).then(img => {\n\t\t\t\t\t\t\tstyleImg(img);\n\t\t\t\t\t\t\tconst btn = document.createElement('button');\n\t\t\t\t\t\t\tbtn.type = 'button';\n\t\t\t\t\t\t\tbtn.disabled = true;\n\t\t\t\t\t\t\tbtn.classList.add('app-store', `store-${platform}`);\n\t\t\t\t\t\t\tbtn.append(img);\n\t\t\t\t\t\t\tcss(btn, {\n\t\t\t\t\t\t\t\t'-webkit-appearance': 'none',\n\t\t\t\t\t\t\t\t'appearance': 'none',\n\t\t\t\t\t\t\t\t'border': '0 none',\n\t\t\t\t\t\t\t\t'padding': '0',\n\t\t\t\t\t\t\t\t'filter': 'grayscale(1)',\n\t\t\t\t\t\t\t\t'cursor': 'not-allowed',\n\t\t\t\t\t\t\t\t'background-color': 'transparent',\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\tpromise.then(() => {\n\t\t\t\t\t\t\t\tcss(btn, { 'filter': false, 'cursor': 'pointer' });\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\tsignal.addEventListener('abort', () => {\n\t\t\t\t\t\t\t\tcss(btn, { 'filter': 'grayscale(1)', 'cursor': 'not-allowed' });\n\t\t\t\t\t\t\t}, { once: true });\n\n\t\t\t\t\t\t\tregisterButton(btn).catch(() => {});\n\t\t\t\t\t\t\treturn btn;\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\t// case 'chrome_web_store':\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tconsole.error(`Unknown platform: ${platform}`);\n\n\t\t\t\t}\n\t\t\t}));\n\n\t\t\tif (stores.length === 0) {\n\t\t\t\tthis.hidden = true;\n\t\t\t} else {\n\t\t\t\tthis.append(...stores.filter(({ status }) => status === 'fulfilled')\n\t\t\t\t\t.map(({ value }) => value));\n\t\t\t}\n\t\t} else {\n\t\t\tthis.hidden = true;\n\t\t}\n\t}\n});\n","import '@shgysk8zer0/kazoo/theme-cookie.js';\nimport { getGooglePolicy } from '@shgysk8zer0/kazoo/trust-policies.js';\nimport { ready, toggleClass, css, on } from '@shgysk8zer0/kazoo/dom.js';\nimport { debounce } from '@shgysk8zer0/kazoo/events.js';\nimport { init } from '@shgysk8zer0/kazoo/data-handlers.js';\nimport { importGa, externalHandler, telHandler, mailtoHandler } from '@shgysk8zer0/kazoo/google-analytics.js';\nimport { submitHandler } from './contact-demo.js';\nimport { GA } from './consts.js';\nimport './components.js';\n\nif (! CSS.supports('height', '1dvh')) {\n\tcss([document.documentElement], { '--viewport-height': `${window.innerHeight}px`});\n\n\trequestIdleCallback(() => {\n\t\ton([window], {\n\t\t\tresize: debounce(() => css([document.documentElement], { '--viewport-height': `${window.innerHeight}px`})),\n\t\t\tscroll: () => {\n\t\t\t\trequestAnimationFrame(() => {\n\t\t\t\t\tcss('#header', { 'background-position-y': `${-0.5 * scrollY}px` });\n\t\t\t\t});\n\t\t\t}\n\t\t}, { passive: true });\n\t});\n}\n\ntoggleClass([document.documentElement], {\n\t'no-dialog': document.createElement('dialog') instanceof HTMLUnknownElement,\n\t'no-details': document.createElement('details') instanceof HTMLUnknownElement,\n\t'js': true,\n\t'no-js': false,\n});\n\nif (typeof GA === 'string' && GA.length !== 0) {\n\tscheduler.postTask(() => {\n\t\timportGa(GA, {}, { policy: getGooglePolicy() }).then(async ({ ga, hasGa }) => {\n\t\t\tif (hasGa()) {\n\t\t\t\tga('create', GA, 'auto');\n\t\t\t\tga('set', 'transport', 'beacon');\n\t\t\t\tga('send', 'pageview');\n\n\t\t\t\ton('a[rel~=\"external\"]', ['click'], externalHandler, { passive: true, capture: true });\n\t\t\t\ton('a[href^=\"tel:\"]', ['click'], telHandler, { passive: true, capture: true });\n\t\t\t\ton('a[href^=\"mailto:\"]', ['click'], mailtoHandler, { passive: true, capture: true });\n\t\t\t}\n\t\t});\n\t}, { priority: 'background' });\n}\n\nPromise.all([\n\tcustomElements.whenDefined('install-prompt'),\n\tready(),\n]).then(([HTMLInstallPromptElement]) => {\n\tinit();\n\n\tif (location.pathname.startsWith('/contact')) {\n\t\ton('#contact-form', ['cubmit'], submitHandler);\n\t}\n\n\ton('#install-btn', ['click'], () => new HTMLInstallPromptElement().show())\n\t\t.forEach(el => el.hidden = false);\n});\n"],"names":["isAsyncFunction","what","Function","constructor","name","getDeferred","signal","deferred","promise","Promise","resolve","reject","EventTarget","throwIfAborted","aborted","reason","addEventListener","target","once","Object","seal","async","callAsAsync","callback","args","thisArg","globalThis","Array","isArray","AbortSignal","call","then","catch","queueMicrotask","err","TypeError","lock","mode","ifAvailable","steal","allowFallback","navigator","locks","request","locksSupported","between","min","val","max","isNumber","num","Number","isNaN","clamp","value","Math","setProp","el","prop","policy","tagName","property","supported","trustedTypes","getPropertyType","toLowerCase","createScript","createScriptURL","createHTML","setAttr","attr","elementNs","attribute","getAttributeType","setAttributeNs","setAttribute","setAttributeNS","createPolicy","isTrustPolicy","TrustedTypePolicy","isHTML","input","isScriptURL","URL","isTrustedType","isScript","getDefaultPolicy","freeze","toString","defaultPolicy","maps","Map","cache","URL_PREFIXES","PATH_PREFIXES","isBare","str","isString","some","pre","startsWith","resolveModule","specifier","imports","has","document","get","script","head","querySelector","HTMLScriptElement","scope","JSON","parse","textContent","getImportmap","hasOwnProperty","includes","found","longest","keys","filter","spec","endsWith","reduce","match","length","resolved","replace","baseURI","href","set","funcs","WeakMap","autoServiceWorkerRegistration","callOnce","documentElement","dataset","serviceWorker","updateViaCache","registerServiceWorker","ready","update","customElements","whenDefined","body","requireInteraction","actions","title","action","close","location","reload","reloadOnUpdate","console","error","source","type","register","DOMException","getURLResolver","base","path","url","isObject","thing","is","isIterable","Symbol","iterator","isNullish","Date","getTime","retVal","apply","this","delete","setURLParams","forURL","params","HTMLFormElement","FormData","URLSearchParams","fromEntries","entries","forEach","k","v","searchParams","setUTMParams","utm_source","medium","utm_medium","content","utm_content","campaign","utm_campaign","term","utm_term","features","createElement","eventFeatures","nativeSignal","AbortController","prototype","passive","capture","options","removeEventListener","getEventFeatures","addListener","targets","events","query","of","event","listen","signalAborted","finally","debounce","func","wait","immediate","warn","delay","isFinite","to","setTimeout","throttle","clearTimeout","db","window","TEXT","HTML","data","props","Element","p","toISOString","stringify","css","priority","style","setProperty","removeProperty","namespace","removeAttribute","removeAttributeNS","toggleAttribute","getBool","hasAttribute","setBool","getInt","fallback","NaN","MIN_SAFE_INTEGER","MAX_SAFE_INTEGER","parseInt","getAttribute","setInt","isInteger","getString","setString","minLength","maxLength","Infinity","pattern","RegExp","test","getURL","setURL","requirePath","pathname","readyStates","readyStateIndex","state","readyState","indexOf","matches","from","querySelectorAll","push","each","items","remove","item","setCss","text","on","when","ev","cb","off","e","whenReadyState","stateIndex","controller","settled","abort","asFrag","sanitizer","undefined","parser","DOMParser","tmp","innerHTML","sanitize","parseAsFragment","parseFromString","COOKIE_NAME","THEMES","cookieStore","all","cookie","$data","$attr","setTheme","theme","dispatchEvent","CustomEvent","detail","requestAnimationFrame","setData","changed","deleted","find","allowElements","allowAttributes","allowComments","blockElements","dropAttributes","dropElements","Sanitizer","getDefaultConfiguration","trustedOrigins","origin","googleOrigins","youtubeEmbedOrigins","isTrustedScriptOrigin","createSanitizerCallback","sanitizeFor","setHTML","createEmptyHTML","emptyHTML","createEmptyScript","emptyScript","sanitizerConfig","allowCustomElements","loading","crossorigin","count","layout","center","zoom","tilesrc","allowlocate","allowfullscreen","zoomcontrol","minzoom","maxzoom","longitude","latitude","open","appid","postalcode","height","width","large","uri","user","bio","gist","file","repo","pen","tab","editable","clicktoload","lines","paras","filler","post","showtext","hide","hidden","unhide","disable","disabled","enable","fullScreen","fullscreenElement","isSameNode","exitFullscreen","requestFullscreen","domain","maxAge","expires","sameSite","secure","scrollTo","behavior","block","inline","scrollIntoView","show","showModal","returnValue","selector","checked","copy","clipboard","writeText","navigate","history","back","forward","toggleClass","classList","add","addClass","split","removeClass","cn","toggle","isDisqusEmbed","isYouTubeEmbed","isGoogleOrigin","isDisqusEmbedScript","REFERRER_POLICY","tag","context","identifier","itemtype","itemprop","itemscope","itemref","itemid","id","accessKey","part","slot","children","styles","html","aria","animation","keyframes","duration","endDelay","easing","direction","fill","iterations","iterationStart","composite","iterationComposite","pseudoElement","attrs","append","join","accesskey","setAria","animate","createSlot","createImage","src","alt","crossOrigin","sizes","srcset","referrerPolicy","fetchPriority","decoding","role","img","isSafeInteger","map","size","createLink","rel","as","blocking","integrity","nonce","media","rest","link","relList","createInput","required","readOnly","multiple","accept","list","placeholder","inputMode","step","autocomplete","symbols","resp","HTTPException","Error","Response","message","cause","super","status","statusText","defineProperty","configurable","writable","enumerable","json","bodyUsed","headers","ok","redirected","toJSON","handleResponse","handleError","fetch","opts","Request","race","errorMessage","getHTTPCSP","method","directives","trim","directive","key","getMetaCSP","meta","HTMLMetaElement","GET","credentials","redirect","Headers","keepalive","timeout","getHTML","Accept","TYPES.HTML","TYPES.TEXT","getText","getJSON","TYPES.JSON","csp","getManifest","getLink","HTMLLinkElement","loadStylesheet","parent","load","any","parentELement","loadImage","classes","decode","ga","send","eventCategory","eventAction","eventValue","eventLabel","hitType","transport","hitCallback","hasGa","dataLayer","currentScript","SVG","createSVGElement","stroke","pathLength","svgFill","createElementNS","prepend","node","createSVG","viewBox","label","svg","n","createPath","d","createBellIcon","createXIcon","registerCustomElement","cls","tags","every","isDefined","define","resolveURL","getPolicy","protectedData","getSlot","shadow","HTMLElement","els","assignedElements","setSlot","clearSlot","HTMLNotificationElement","icon","badge","image","dir","lang","vibrate","silent","timestamp","attachShadow","internals","attachInternals","onshow","onclose","onclick","onerror","click","preventDefault","evt","Event","currentTarget","notification","btn","referrerpolicy","isConnected","opacity","transform","finished","log","focus","connectedCallback","disconnectedCallback","shadowRoot","HTMLImageElement","assigned","now","whenConnected","permission","maxActions","static","btnStyles","btnContainerStyles","gap","alert","dialog","msg","btns","closest","fadeIn","submitHandler","form","email","phone","subject","canShare","share","reset","shareTitle","hostname","HTMLButtonElement","stopPropagation","isTrusted","files","File","blob","getFiles","extends","states","HTMLCustomButtonElement","attributeChangedCallback","oldVal","newVal","ariaDisabled","tabIndex","observedAttributes","Facebook","short_name","icons","share_target","enctype","Twitter","LinkedIn","Reddit","Gmail","Email","Tumblr","Telegram","Pinterest","labels","facebook","twitter","reddit","linkedin","gmail","pinterest","tumblr","telegram","print","getTemplate","openShare","referrer","opener","x","y","resizable","scrollbars","flags","popup","endpoint","getShareURL","handler","ariaPressed","cloneNode","wasHidden","ariaHasPopup","childElementCount","stack","oldValue","newValue","ariaLabel","updateLabel","getElementById","observer","IntersectionObserver","entry","isIntersecting","unobserve","rootMargin","floor","screen","whenIntersecting","observe","getTmp","frag","getTemplateLoader","getUser","sessionStorage","getItem","setItem","whenLoad","avatar_url","login","html_url","company","blog","HTMLCurrentYearElement","HTMLTimeElement","getFullYear","dateTime","HTMLBaconIpsumElement","line","replaceChildren","startWithLorem","enabled","clear","generate","registerButton","platforms","afterInstall","userResponse","prompt","getPicture","fallbackWidth","pic","opt","getBySize","srcs","manifest","description","categories","screenshots","related_applications","relatedApps","ariaModal","ariaHidden","screenshot","getIcon","platform","HTMLAnchorElement","inert","removeOnClose","handlers","install","getRegistration","ITEMTYPE","callIcon","overflow","createCallStartIcon","emailIcon","createMailIcon","linkIcon","createLinkExternalIcon","infoIcon","createInfoIcon","geoIcon","createMarkLocationIcon","getSlotted","clearSlotted","slotChange","updateData","uuid","datetime","info","sendBeacon","HTMLKRVAdElement","background","border","borderWidth","callToAction","color","imageFit","imagePosition","linkColor","ariaBusy","publisher","container","preview","slotchange","publisherEl","replaceWith","getUrl","version","VERSION","imagePostion","slotted","imgs","protocol","scheduler","postTask","CONTENT_TYPE","toFile","createObjectURL","download","requestIdleCallback","revokeObjectURL","save","fromJSONObject","directory","crypto","randomUUID","submit","getAll","for","webkitdirectory","anim","showPicker","FILE_EXTENSION","fromFile","apps","fetchApps","makeAppItem","nameEl","descriptionEl","display","padding","HTMLKernValleyAppListButtonlement","dev","host","getAppList","header","position","top","cursor","preload","SRC","importance","app","getLogoUrl","styleImg","getInstalledRelatedApps","stores","allSettled","a","appearance","CSS","supports","innerHeight","resize","scroll","scrollY","force","cl","cond","HTMLUnknownElement","js","HTMLInstallPromptElement","init"],"mappings":"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"}